<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>
            Mayflower Code Browser - Source Code
        </title>
        <link rel="stylesheet" type="text/css" href="../../../js/jquery.sidebar/css/codebrowser/sidebar.css" />
        <link rel="stylesheet" type="text/css" href="../../../css/global.css" />
        <link rel="stylesheet" type="text/css" href="../../../css/cruisecontrol.css" />
        <link rel="stylesheet" type="text/css" href="../../../css/review.css" />

        <script type="text/javascript" src="../../../js/jquery-1.4.2.min.js"></script>
        <script type="text/javascript" src="../../../js/jquery.sidebar/jquery-ui-1.7.2.custom.min.js"></script>
        <script type="text/javascript" src="../../../js/jquery.sidebar/jquery.sidebar.js"></script>
        <script type="text/javascript" src="../../../js/jquery.cluetip/lib/jquery.hoverIntent.js"></script>
        <script type="text/javascript" src="../../../js/jquery.cluetip/lib/jquery.bgiframe.min.js"></script>
        <script type="text/javascript" src="../../../js/jquery.cluetip/jquery.cluetip.min.js"></script>

        <script type="text/javascript" src="../../../js/review.js"></script>
    </head>
    <body class="codebrowser">
        <div class="header">
            <a href="./../../../index.html">Go back to index</a> |
            <a href="http://github.com/mayflowergmbh/PHP_CodeBrowser">PHP CodeBrowser</a>
        </div>
        <hr/>
        <div id="review">
            <div class="filepath">
                js/tiny_mce/plugins/paste/editor_plugin.js            </div>

            <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="code"><ol class="code"><li id="line_1" class="odd"><span class="lineNumber">1&nbsp;</span>&nbsp;<span class="brackets">(</span><span class="keyword">function</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">c</span><span class="code">=</span><span class="default">tinymce</span><span class="code">.</span><span class="default">each</span><span class="code">,</span><span class="default">a</span><span class="code">=</span><span class="brackets">{</span><span class="default">paste_auto_cleanup_on_paste</span><span class="code">:</span><span class="keyword">true</span><span class="code">,</span><span class="default">paste_enable_default_filters</span><span class="code">:</span><span class="keyword">true</span><span class="code">,</span><span class="default">paste_block_drop</span><span class="code">:</span><span class="keyword">false</span><span class="code">,</span><span class="default">paste_retain_style_properties</span><span class="code">:</span><span class="string">"</span><span class="string">none</span><span class="string">"</span><span class="code">,</span><span class="default">paste_strip_class_attributes</span><span class="code">:</span><span class="string">"</span><span class="string">mso</span><span class="string">"</span><span class="code">,</span><span class="default">paste_remove_spans</span><span class="code">:</span><span class="keyword">false</span><span class="code">,</span><span class="default">paste_remove_styles</span><span class="code">:</span><span class="keyword">false</span><span class="code">,</span><span class="default">paste_remove_styles_if_webkit</span><span class="code">:</span><span class="keyword">true</span><span class="code">,</span><span class="default">paste_convert_middot_lists</span><span class="code">:</span><span class="keyword">true</span><span class="code">,</span><span class="default">paste_convert_headers_to_strong</span><span class="code">:</span><span class="keyword">false</span><span class="code">,</span><span class="default">paste_dialog_width</span><span class="code">:</span><span class="string">"</span><span class="string">450</span><span class="string">"</span><span class="code">,</span><span class="default">paste_dialog_height</span><span class="code">:</span><span class="string">"</span><span class="string">400</span><span class="string">"</span><span class="code">,</span><span class="default">paste_text_use_dialog</span><span class="code">:</span><span class="keyword">false</span><span class="code">,</span><span class="default">paste_text_sticky</span><span class="code">:</span><span class="keyword">false</span><span class="code">,</span><span class="default">paste_text_notifyalways</span><span class="code">:</span><span class="keyword">false</span><span class="code">,</span><span class="default">paste_text_linebreaktype</span><span class="code">:</span><span class="string">"</span><span class="string">p</span><span class="string">"</span><span class="code">,</span><span class="default">paste_text_replacements</span><span class="code">:</span><span class="brackets">[</span><span class="brackets">[</span><span class="code">/\</span><span class="default">u2026</span><span class="code">/</span><span class="default">g</span><span class="code">,</span><span class="string">"</span><span class="string">...</span><span class="string">"</span><span class="brackets">]</span><span class="code">,</span><span class="brackets">[</span><span class="code">/</span><span class="brackets">[</span><span class="code">\</span><span class="default">x93</span><span class="code">\</span><span class="default">x94</span><span class="code">\</span><span class="default">u201c</span><span class="code">\</span><span class="default">u201d</span><span class="brackets">]</span><span class="code">/</span><span class="default">g</span><span class="code">,</span><span class="string">'</span><span class="string">"</span><span class="string">'</span><span class="brackets">]</span><span class="code">,</span><span class="brackets">[</span><span class="code">/</span><span class="brackets">[</span><span class="code">\</span><span class="default">x60</span><span class="code">\</span><span class="default">x91</span><span class="code">\</span><span class="default">x92</span><span class="code">\</span><span class="default">u2018</span><span class="code">\</span><span class="default">u2019</span><span class="brackets">]</span><span class="code">/</span><span class="default">g</span><span class="code">,</span><span class="string">"</span><span class="string">'</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">]</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">b</span><span class="brackets">(</span><span class="default">d</span><span class="code">,</span><span class="default">e</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="default">d</span><span class="code">.</span><span class="default">getParam</span><span class="brackets">(</span><span class="default">e</span><span class="code">,</span><span class="default">a</span><span class="brackets">[</span><span class="default">e</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">}</span><span class="default">tinymce</span><span class="code">.</span><span class="default">create</span><span class="brackets">(</span><span class="string">"</span><span class="string">tinymce.plugins.PastePlugin</span><span class="string">"</span><span class="code">,</span><span class="brackets">{</span><span class="default">init</span><span class="code">:</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">d</span><span class="code">,</span><span class="default">e</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">f</span><span class="code">=</span><span class="keyword">this</span><span class="code">;</span><span class="default">f</span><span class="code">.</span><span class="default">editor</span><span class="code">=</span><span class="default">d</span><span class="code">;</span><span class="default">f</span><span class="code">.</span><span class="default">url</span><span class="code">=</span><span class="default">e</span><span class="code">;</span><span class="default">f</span><span class="code">.</span><span class="default">onPreProcess</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">tinymce</span><span class="code">.</span><span class="default">util</span><span class="code">.</span><span class="default">Dispatcher</span><span class="brackets">(</span><span class="default">f</span><span class="brackets">)</span><span class="code">;</span><span class="default">f</span><span class="code">.</span><span class="default">onPostProcess</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">tinymce</span><span class="code">.</span><span class="default">util</span><span class="code">.</span><span class="default">Dispatcher</span><span class="brackets">(</span><span class="default">f</span><span class="brackets">)</span><span class="code">;</span><span class="default">f</span><span class="code">.</span><span class="default">onPreProcess</span><span class="code">.</span><span class="default">add</span><span class="brackets">(</span><span class="default">f</span><span class="code">.</span><span class="default">_preProcess</span><span class="brackets">)</span><span class="code">;</span><span class="default">f</span><span class="code">.</span><span class="default">onPostProcess</span><span class="code">.</span><span class="default">add</span><span class="brackets">(</span><span class="default">f</span><span class="code">.</span><span class="default">_postProcess</span><span class="brackets">)</span><span class="code">;</span><span class="default">f</span><span class="code">.</span><span class="default">onPreProcess</span><span class="code">.</span><span class="default">add</span><span class="brackets">(</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">i</span><span class="code">,</span><span class="default">j</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">d</span><span class="code">.</span><span class="default">execCallback</span><span class="brackets">(</span><span class="string">"</span><span class="string">paste_preprocess</span><span class="string">"</span><span class="code">,</span><span class="default">i</span><span class="code">,</span><span class="default">j</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">)</span><span class="code">;</span><span class="default">f</span><span class="code">.</span><span class="default">onPostProcess</span><span class="code">.</span><span class="default">add</span><span class="brackets">(</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">i</span><span class="code">,</span><span class="default">j</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">d</span><span class="code">.</span><span class="default">execCallback</span><span class="brackets">(</span><span class="string">"</span><span class="string">paste_postprocess</span><span class="string">"</span><span class="code">,</span><span class="default">i</span><span class="code">,</span><span class="default">j</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">)</span><span class="code">;</span><span class="default">d</span><span class="code">.</span><span class="keyword">onKeyDown</span><span class="code">.</span><span class="default">addToTop</span><span class="brackets">(</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">i</span><span class="code">,</span><span class="default">j</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="brackets">(</span><span class="brackets">(</span><span class="default">tinymce</span><span class="code">.</span><span class="default">isMac</span><span class="code">?</span><span class="default">j</span><span class="code">.</span><span class="default">metaKey</span><span class="code">:</span><span class="default">j</span><span class="code">.</span><span class="default">ctrlKey</span><span class="brackets">)</span><span class="code">&amp;&amp;</span><span class="default">j</span><span class="code">.</span><span class="default">keyCode</span><span class="code">==</span><span class="number">86</span><span class="brackets">)</span><span class="code">||</span><span class="brackets">(</span><span class="default">j</span><span class="code">.</span><span class="default">shiftKey</span><span class="code">&amp;&amp;</span><span class="default">j</span><span class="code">.</span><span class="default">keyCode</span><span class="code">==</span><span class="number">45</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="keyword">false</span><span class="brackets">}</span><span class="brackets">}</span><span class="brackets">)</span><span class="code">;</span><span class="default">d</span><span class="code">.</span><span class="default">pasteAsPlainText</span><span class="code">=</span><span class="keyword">false</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">h</span><span class="brackets">(</span><span class="default">m</span><span class="code">,</span><span class="default">k</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">l</span><span class="code">=</span><span class="default">d</span><span class="code">.</span><span class="default">dom</span><span class="code">,</span><span class="default">i</span><span class="code">,</span><span class="default">j</span><span class="code">;</span><span class="default">f</span><span class="code">.</span><span class="default">onPreProcess</span><span class="code">.</span><span class="default">dispatch</span><span class="brackets">(</span><span class="default">f</span><span class="code">,</span><span class="default">m</span><span class="brackets">)</span><span class="code">;</span><span class="default">m</span><span class="code">.</span><span class="default">node</span><span class="code">=</span><span class="default">l</span><span class="code">.</span><span class="default">create</span><span class="brackets">(</span><span class="string">"</span><span class="string">div</span><span class="string">"</span><span class="code">,</span><span class="number">0</span><span class="code">,</span><span class="default">m</span><span class="code">.</span><span class="default">content</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">tinymce</span><span class="code">.</span><span class="default">isGecko</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">i</span><span class="code">=</span><span class="default">d</span><span class="code">.</span><span class="default">selection</span><span class="code">.</span><span class="default">getRng</span><span class="brackets">(</span><span class="keyword">true</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">i</span><span class="code">.</span><span class="default">startContainer</span><span class="code">==</span><span class="default">i</span><span class="code">.</span><span class="default">endContainer</span><span class="code">&amp;&amp;</span><span class="default">i</span><span class="code">.</span><span class="default">startContainer</span><span class="code">.</span><span class="default">nodeType</span><span class="code">==</span><span class="number">3</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">j</span><span class="code">=</span><span class="default">l</span><span class="code">.</span><span class="default">select</span><span class="brackets">(</span><span class="string">"</span><span class="string">p,h1,h2,h3,h4,h5,h6,pre</span><span class="string">"</span><span class="code">,</span><span class="default">m</span><span class="code">.</span><span class="default">node</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">j</span><span class="code">.</span><span class="default">length</span><span class="code">==</span><span class="number">1</span><span class="code">&amp;&amp;</span><span class="default">m</span><span class="code">.</span><span class="default">content</span><span class="code">.</span><span class="default">indexOf</span><span class="brackets">(</span><span class="string">"</span><span class="string">__MCE_ITEM__</span><span class="string">"</span><span class="brackets">)</span><span class="code">===-</span><span class="number">1</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">l</span><span class="code">.</span><span class="default">remove</span><span class="brackets">(</span><span class="default">j</span><span class="code">.</span><span class="default">reverse</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">,</span><span class="keyword">true</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">}</span><span class="brackets">}</span><span class="default">f</span><span class="code">.</span><span class="default">onPostProcess</span><span class="code">.</span><span class="default">dispatch</span><span class="brackets">(</span><span class="default">f</span><span class="code">,</span><span class="default">m</span><span class="brackets">)</span><span class="code">;</span><span class="default">m</span><span class="code">.</span><span class="default">content</span><span class="code">=</span><span class="default">d</span><span class="code">.</span><span class="default">serializer</span><span class="code">.</span><span class="default">serialize</span><span class="brackets">(</span><span class="default">m</span><span class="code">.</span><span class="default">node</span><span class="code">,</span><span class="brackets">{</span><span class="default">getInner</span><span class="code">:</span><span class="number">1</span><span class="brackets">}</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="brackets">(</span><span class="code">!</span><span class="default">k</span><span class="brackets">)</span><span class="code">&amp;&amp;</span><span class="brackets">(</span><span class="default">d</span><span class="code">.</span><span class="default">pasteAsPlainText</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">f</span><span class="code">.</span><span class="default">_insertPlainText</span><span class="brackets">(</span><span class="default">d</span><span class="code">,</span><span class="default">l</span><span class="code">,</span><span class="default">m</span><span class="code">.</span><span class="default">content</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="default">b</span><span class="brackets">(</span><span class="default">d</span><span class="code">,</span><span class="string">"</span><span class="string">paste_text_sticky</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">d</span><span class="code">.</span><span class="default">pasteAsPlainText</span><span class="code">=</span><span class="keyword">false</span><span class="code">;</span><span class="default">d</span><span class="code">.</span><span class="default">controlManager</span><span class="code">.</span><span class="default">setActive</span><span class="brackets">(</span><span class="string">"</span><span class="string">pastetext</span><span class="string">"</span><span class="code">,</span><span class="keyword">false</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">else</span><span class="brackets">{</span><span class="default">f</span><span class="code">.</span><span class="default">_insert</span><span class="brackets">(</span><span class="default">m</span><span class="code">.</span><span class="default">content</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">}</span><span class="default">d</span><span class="code">.</span><span class="default">addCommand</span><span class="brackets">(</span><span class="string">"</span><span class="string">mceInsertClipboardContent</span><span class="string">"</span><span class="code">,</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">i</span><span class="code">,</span><span class="default">j</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">h</span><span class="brackets">(</span><span class="default">j</span><span class="code">,</span><span class="keyword">true</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="default">b</span><span class="brackets">(</span><span class="default">d</span><span class="code">,</span><span class="string">"</span><span class="string">paste_text_use_dialog</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">d</span><span class="code">.</span><span class="default">addCommand</span><span class="brackets">(</span><span class="string">"</span><span class="string">mcePasteText</span><span class="string">"</span><span class="code">,</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">j</span><span class="code">,</span><span class="default">i</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">k</span><span class="code">=</span><span class="default">tinymce</span><span class="code">.</span><span class="default">util</span><span class="code">.</span><span class="default">Cookie</span><span class="code">;</span><span class="default">d</span><span class="code">.</span><span class="default">pasteAsPlainText</span><span class="code">=!</span><span class="default">d</span><span class="code">.</span><span class="default">pasteAsPlainText</span><span class="code">;</span><span class="default">d</span><span class="code">.</span><span class="default">controlManager</span><span class="code">.</span><span class="default">setActive</span><span class="brackets">(</span><span class="string">"</span><span class="string">pastetext</span><span class="string">"</span><span class="code">,</span><span class="default">d</span><span class="code">.</span><span class="default">pasteAsPlainText</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="brackets">(</span><span class="default">d</span><span class="code">.</span><span class="default">pasteAsPlainText</span><span class="brackets">)</span><span class="code">&amp;&amp;</span><span class="brackets">(</span><span class="code">!</span><span class="default">k</span><span class="code">.</span><span class="default">get</span><span class="brackets">(</span><span class="string">"</span><span class="string">tinymcePasteText</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">b</span><span class="brackets">(</span><span class="default">d</span><span class="code">,</span><span class="string">"</span><span class="string">paste_text_sticky</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">d</span><span class="code">.</span><span class="default">windowManager</span><span class="code">.</span><span class="default">alert</span><span class="brackets">(</span><span class="default">d</span><span class="code">.</span><span class="default">translate</span><span class="brackets">(</span><span class="string">"</span><span class="string">paste.plaintext_mode_sticky</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">}</span><span class="keyword">else</span><span class="brackets">{</span><span class="default">d</span><span class="code">.</span><span class="default">windowManager</span><span class="code">.</span><span class="default">alert</span><span class="brackets">(</span><span class="default">d</span><span class="code">.</span><span class="default">translate</span><span class="brackets">(</span><span class="string">"</span><span class="string">paste.plaintext_mode_sticky</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="default">b</span><span class="brackets">(</span><span class="default">d</span><span class="code">,</span><span class="string">"</span><span class="string">paste_text_notifyalways</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">k</span><span class="code">.</span><span class="default">set</span><span class="brackets">(</span><span class="string">"</span><span class="string">tinymcePasteText</span><span class="string">"</span><span class="code">,</span><span class="string">"</span><span class="string">1</span><span class="string">"</span><span class="code">,</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">Date</span><span class="brackets">(</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">Date</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">.</span><span class="default">getFullYear</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">+</span><span class="number">1</span><span class="code">,</span><span class="number">12</span><span class="code">,</span><span class="number">31</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">}</span><span class="brackets">}</span><span class="brackets">)</span><span class="brackets">}</span><span class="default">d</span><span class="code">.</span><span class="default">addButton</span><span class="brackets">(</span><span class="string">"</span><span class="string">pastetext</span><span class="string">"</span><span class="code">,</span><span class="brackets">{</span><span class="default">title</span><span class="code">:</span><span class="string">"</span><span class="string">paste.paste_text_desc</span><span class="string">"</span><span class="code">,</span><span class="default">cmd</span><span class="code">:</span><span class="string">"</span><span class="string">mcePasteText</span><span class="string">"</span><span class="brackets">}</span><span class="brackets">)</span><span class="code">;</span><span class="default">d</span><span class="code">.</span><span class="default">addButton</span><span class="brackets">(</span><span class="string">"</span><span class="string">selectall</span><span class="string">"</span><span class="code">,</span><span class="brackets">{</span><span class="default">title</span><span class="code">:</span><span class="string">"</span><span class="string">paste.selectall_desc</span><span class="string">"</span><span class="code">,</span><span class="default">cmd</span><span class="code">:</span><span class="string">"</span><span class="string">selectall</span><span class="string">"</span><span class="brackets">}</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">g</span><span class="brackets">(</span><span class="default">s</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">l</span><span class="code">,</span><span class="default">p</span><span class="code">,</span><span class="default">j</span><span class="code">,</span><span class="default">t</span><span class="code">,</span><span class="default">k</span><span class="code">=</span><span class="default">d</span><span class="code">.</span><span class="default">selection</span><span class="code">,</span><span class="default">o</span><span class="code">=</span><span class="default">d</span><span class="code">.</span><span class="default">dom</span><span class="code">,</span><span class="default">q</span><span class="code">=</span><span class="default">d</span><span class="code">.</span><span class="default">getBody</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">,</span><span class="default">i</span><span class="code">,</span><span class="default">r</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">s</span><span class="code">.</span><span class="default">clipboardData</span><span class="code">||</span><span class="default">o</span><span class="code">.</span><span class="default">doc</span><span class="code">.</span><span class="default">dataTransfer</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">r</span><span class="code">=</span><span class="brackets">(</span><span class="default">s</span><span class="code">.</span><span class="default">clipboardData</span><span class="code">||</span><span class="default">o</span><span class="code">.</span><span class="default">doc</span><span class="code">.</span><span class="default">dataTransfer</span><span class="brackets">)</span><span class="code">.</span><span class="default">getData</span><span class="brackets">(</span><span class="string">"</span><span class="string">Text</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">d</span><span class="code">.</span><span class="default">pasteAsPlainText</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">s</span><span class="code">.</span><span class="default">preventDefault</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="default">h</span><span class="brackets">(</span><span class="brackets">{</span><span class="default">content</span><span class="code">:</span><span class="default">r</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/\</span><span class="default">r</span><span class="code">?\</span><span class="default">n</span><span class="code">/</span><span class="default">g</span><span class="code">,</span><span class="string">"</span><span class="string">&lt;br /&gt;</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">return</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">o</span><span class="code">.</span><span class="default">get</span><span class="brackets">(</span><span class="string">"</span><span class="string">_mcePaste</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="brackets">}</span><span class="default">l</span><span class="code">=</span><span class="default">o</span><span class="code">.</span><span class="default">add</span><span class="brackets">(</span><span class="default">q</span><span class="code">,</span><span class="string">"</span><span class="string">div</span><span class="string">"</span><span class="code">,</span><span class="brackets">{</span><span class="default">id</span><span class="code">:</span><span class="string">"</span><span class="string">_mcePaste</span><span class="string">"</span><span class="code">,</span><span class="string">"</span><span class="string">class</span><span class="string">"</span><span class="code">:</span><span class="string">"</span><span class="string">mcePaste</span><span class="string">"</span><span class="code">,</span><span class="string">"</span><span class="string">data-mce-bogus</span><span class="string">"</span><span class="code">:</span><span class="string">"</span><span class="string">1</span><span class="string">"</span><span class="brackets">}</span><span class="code">,</span><span class="string">'</span><span class="string">\uFEFF\uFEFF&lt;br data-mce-bogus="1"&gt;</span><span class="string">'</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">q</span><span class="code">!=</span><span class="default">d</span><span class="code">.</span><span class="default">getDoc</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">.</span><span class="default">body</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">i</span><span class="code">=</span><span class="default">o</span><span class="code">.</span><span class="default">getPos</span><span class="brackets">(</span><span class="default">d</span><span class="code">.</span><span class="default">selection</span><span class="code">.</span><span class="default">getStart</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">,</span><span class="default">q</span><span class="brackets">)</span><span class="code">.</span><span class="default">y</span><span class="brackets">}</span><span class="keyword">else</span><span class="brackets">{</span><span class="default">i</span><span class="code">=</span><span class="default">q</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">+</span><span class="default">o</span><span class="code">.</span><span class="default">getViewPort</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">.</span><span class="default">y</span><span class="brackets">}</span><span class="default">o</span><span class="code">.</span><span class="default">setStyles</span><span class="brackets">(</span><span class="default">l</span><span class="code">,</span><span class="brackets">{</span><span class="default">position</span><span class="code">:</span><span class="string">"</span><span class="string">absolute</span><span class="string">"</span><span class="code">,</span><span class="default">left</span><span class="code">:-</span><span class="number">10000</span><span class="code">,</span><span class="default">top</span><span class="code">:</span><span class="default">i</span><span class="code">,</span><span class="default">width</span><span class="code">:</span><span class="number">1</span><span class="code">,</span><span class="default">height</span><span class="code">:</span><span class="number">1</span><span class="code">,</span><span class="default">overflow</span><span class="code">:</span><span class="string">"</span><span class="string">hidden</span><span class="string">"</span><span class="brackets">}</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">tinymce</span><span class="code">.</span><span class="default">isIE</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">t</span><span class="code">=</span><span class="default">k</span><span class="code">.</span><span class="default">getRng</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="default">j</span><span class="code">=</span><span class="default">o</span><span class="code">.</span><span class="default">doc</span><span class="code">.</span><span class="default">body</span><span class="code">.</span><span class="default">createTextRange</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="default">j</span><span class="code">.</span><span class="default">moveToElementText</span><span class="brackets">(</span><span class="default">l</span><span class="brackets">)</span><span class="code">;</span><span class="default">j</span><span class="code">.</span><span class="default">execCommand</span><span class="brackets">(</span><span class="string">"</span><span class="string">Paste</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">o</span><span class="code">.</span><span class="default">remove</span><span class="brackets">(</span><span class="default">l</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">l</span><span class="code">.</span><span class="default">innerHTML</span><span class="code">===</span><span class="string">"</span><span class="string">\uFEFF</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">d</span><span class="code">.</span><span class="default">execCommand</span><span class="brackets">(</span><span class="string">"</span><span class="string">mcePasteWord</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">s</span><span class="code">.</span><span class="default">preventDefault</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">return</span><span class="brackets">}</span><span class="default">k</span><span class="code">.</span><span class="default">setRng</span><span class="brackets">(</span><span class="default">t</span><span class="brackets">)</span><span class="code">;</span><span class="default">k</span><span class="code">.</span><span class="default">setContent</span><span class="brackets">(</span><span class="string">"</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">setTimeout</span><span class="brackets">(</span><span class="keyword">function</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">h</span><span class="brackets">(</span><span class="brackets">{</span><span class="default">content</span><span class="code">:</span><span class="default">l</span><span class="code">.</span><span class="default">innerHTML</span><span class="brackets">}</span><span class="brackets">)</span><span class="brackets">}</span><span class="code">,</span><span class="number">0</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">return</span><span class="code"> </span><span class="default">tinymce</span><span class="code">.</span><span class="default">dom</span><span class="code">.</span><span class="default">Event</span><span class="code">.</span><span class="default">cancel</span><span class="brackets">(</span><span class="default">s</span><span class="brackets">)</span><span class="brackets">}</span><span class="keyword">else</span><span class="brackets">{</span><span class="keyword">function</span><span class="code"> </span><span class="default">m</span><span class="brackets">(</span><span class="default">n</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">n</span><span class="code">.</span><span class="default">preventDefault</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">}</span><span class="default">o</span><span class="code">.</span><span class="default">bind</span><span class="brackets">(</span><span class="default">d</span><span class="code">.</span><span class="default">getDoc</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">,</span><span class="string">"</span><span class="string">mousedown</span><span class="string">"</span><span class="code">,</span><span class="default">m</span><span class="brackets">)</span><span class="code">;</span><span class="default">o</span><span class="code">.</span><span class="default">bind</span><span class="brackets">(</span><span class="default">d</span><span class="code">.</span><span class="default">getDoc</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">,</span><span class="string">"</span><span class="string">keydown</span><span class="string">"</span><span class="code">,</span><span class="default">m</span><span class="brackets">)</span><span class="code">;</span><span class="default">p</span><span class="code">=</span><span class="default">d</span><span class="code">.</span><span class="default">selection</span><span class="code">.</span><span class="default">getRng</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="default">l</span><span class="code">=</span><span class="default">l</span><span class="code">.</span><span class="default">firstChild</span><span class="code">;</span><span class="default">j</span><span class="code">=</span><span class="default">d</span><span class="code">.</span><span class="default">getDoc</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">.</span><span class="default">createRange</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="default">j</span><span class="code">.</span><span class="default">setStart</span><span class="brackets">(</span><span class="default">l</span><span class="code">,</span><span class="number">0</span><span class="brackets">)</span><span class="code">;</span><span class="default">j</span><span class="code">.</span><span class="default">setEnd</span><span class="brackets">(</span><span class="default">l</span><span class="code">,</span><span class="number">1</span><span class="brackets">)</span><span class="code">;</span><span class="default">k</span><span class="code">.</span><span class="default">setRng</span><span class="brackets">(</span><span class="default">j</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">window</span><span class="code">.</span><span class="default">setTimeout</span><span class="brackets">(</span><span class="keyword">function</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">u</span><span class="code">=</span><span class="string">"</span><span class="string">"</span><span class="code">,</span><span class="default">n</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="default">o</span><span class="code">.</span><span class="default">select</span><span class="brackets">(</span><span class="string">"</span><span class="string">div.mcePaste &gt; div.mcePaste</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">length</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">n</span><span class="code">=</span><span class="default">o</span><span class="code">.</span><span class="default">select</span><span class="brackets">(</span><span class="string">"</span><span class="string">div.mcePaste</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">c</span><span class="brackets">(</span><span class="default">n</span><span class="code">,</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">w</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">v</span><span class="code">=</span><span class="default">w</span><span class="code">.</span><span class="default">firstChild</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">v</span><span class="code">&amp;&amp;</span><span class="default">v</span><span class="code">.</span><span class="default">nodeName</span><span class="code">==</span><span class="string">"</span><span class="string">DIV</span><span class="string">"</span><span class="code">&amp;&amp;</span><span class="default">v</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">marginTop</span><span class="code">&amp;&amp;</span><span class="default">v</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">backgroundColor</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">o</span><span class="code">.</span><span class="default">remove</span><span class="brackets">(</span><span class="default">v</span><span class="code">,</span><span class="number">1</span><span class="brackets">)</span><span class="brackets">}</span><span class="default">c</span><span class="brackets">(</span><span class="default">o</span><span class="code">.</span><span class="default">select</span><span class="brackets">(</span><span class="string">"</span><span class="string">span.Apple-style-span</span><span class="string">"</span><span class="code">,</span><span class="default">w</span><span class="brackets">)</span><span class="code">,</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">x</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">o</span><span class="code">.</span><span class="default">remove</span><span class="brackets">(</span><span class="default">x</span><span class="code">,</span><span class="number">1</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">)</span><span class="code">;</span><span class="default">c</span><span class="brackets">(</span><span class="default">o</span><span class="code">.</span><span class="default">select</span><span class="brackets">(</span><span class="string">"</span><span class="string">br[data-mce-bogus]</span><span class="string">"</span><span class="code">,</span><span class="default">w</span><span class="brackets">)</span><span class="code">,</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">x</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">o</span><span class="code">.</span><span class="default">remove</span><span class="brackets">(</span><span class="default">x</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">w</span><span class="code">.</span><span class="default">parentNode</span><span class="code">.</span><span class="default">className</span><span class="code">!=</span><span class="string">"</span><span class="string">mcePaste</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">u</span><span class="code">+=</span><span class="default">w</span><span class="code">.</span><span class="default">innerHTML</span><span class="brackets">}</span><span class="brackets">}</span><span class="brackets">)</span><span class="brackets">}</span><span class="keyword">else</span><span class="brackets">{</span><span class="default">u</span><span class="code">=</span><span class="string">"</span><span class="string">&lt;pre&gt;</span><span class="string">"</span><span class="code">+</span><span class="default">o</span><span class="code">.</span><span class="default">encode</span><span class="brackets">(</span><span class="default">r</span><span class="brackets">)</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/\</span><span class="default">r</span><span class="code">?\</span><span class="default">n</span><span class="code">/</span><span class="default">g</span><span class="code">,</span><span class="string">"</span><span class="string">&lt;br /&gt;</span><span class="string">"</span><span class="brackets">)</span><span class="code">+</span><span class="string">"</span><span class="string">&lt;/pre&gt;</span><span class="string">"</span><span class="brackets">}</span><span class="default">c</span><span class="brackets">(</span><span class="default">o</span><span class="code">.</span><span class="default">select</span><span class="brackets">(</span><span class="string">"</span><span class="string">div.mcePaste</span><span class="string">"</span><span class="brackets">)</span><span class="code">,</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">v</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">o</span><span class="code">.</span><span class="default">remove</span><span class="brackets">(</span><span class="default">v</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">p</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">k</span><span class="code">.</span><span class="default">setRng</span><span class="brackets">(</span><span class="default">p</span><span class="brackets">)</span><span class="brackets">}</span><span class="default">h</span><span class="brackets">(</span><span class="brackets">{</span><span class="default">content</span><span class="code">:</span><span class="default">u</span><span class="brackets">}</span><span class="brackets">)</span><span class="code">;</span><span class="default">o</span><span class="code">.</span><span class="default">unbind</span><span class="brackets">(</span><span class="default">d</span><span class="code">.</span><span class="default">getDoc</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">,</span><span class="string">"</span><span class="string">mousedown</span><span class="string">"</span><span class="code">,</span><span class="default">m</span><span class="brackets">)</span><span class="code">;</span><span class="default">o</span><span class="code">.</span><span class="default">unbind</span><span class="brackets">(</span><span class="default">d</span><span class="code">.</span><span class="default">getDoc</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">,</span><span class="string">"</span><span class="string">keydown</span><span class="string">"</span><span class="code">,</span><span class="default">m</span><span class="brackets">)</span><span class="brackets">}</span><span class="code">,</span><span class="number">0</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">b</span><span class="brackets">(</span><span class="default">d</span><span class="code">,</span><span class="string">"</span><span class="string">paste_auto_cleanup_on_paste</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">tinymce</span><span class="code">.</span><span class="default">isOpera</span><span class="code">||/</span><span class="default">Firefox</span><span class="code">\/</span><span class="number">2</span><span class="code">/.</span><span class="default">test</span><span class="brackets">(</span><span class="keyword">navigator</span><span class="code">.</span><span class="default">userAgent</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">d</span><span class="code">.</span><span class="keyword">onKeyDown</span><span class="code">.</span><span class="default">addToTop</span><span class="brackets">(</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">i</span><span class="code">,</span><span class="default">j</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="brackets">(</span><span class="brackets">(</span><span class="default">tinymce</span><span class="code">.</span><span class="default">isMac</span><span class="code">?</span><span class="default">j</span><span class="code">.</span><span class="default">metaKey</span><span class="code">:</span><span class="default">j</span><span class="code">.</span><span class="default">ctrlKey</span><span class="brackets">)</span><span class="code">&amp;&amp;</span><span class="default">j</span><span class="code">.</span><span class="default">keyCode</span><span class="code">==</span><span class="number">86</span><span class="brackets">)</span><span class="code">||</span><span class="brackets">(</span><span class="default">j</span><span class="code">.</span><span class="default">shiftKey</span><span class="code">&amp;&amp;</span><span class="default">j</span><span class="code">.</span><span class="default">keyCode</span><span class="code">==</span><span class="number">45</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">g</span><span class="brackets">(</span><span class="default">j</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">}</span><span class="brackets">)</span><span class="brackets">}</span><span class="keyword">else</span><span class="brackets">{</span><span class="default">d</span><span class="code">.</span><span class="default">onPaste</span><span class="code">.</span><span class="default">addToTop</span><span class="brackets">(</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">i</span><span class="code">,</span><span class="default">j</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="default">g</span><span class="brackets">(</span><span class="default">j</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">b</span><span class="brackets">(</span><span class="default">d</span><span class="code">,</span><span class="string">"</span><span class="string">paste_block_drop</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">d</span><span class="code">.</span><span class="default">onInit</span><span class="code">.</span><span class="default">add</span><span class="brackets">(</span><span class="keyword">function</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">d</span><span class="code">.</span><span class="default">dom</span><span class="code">.</span><span class="default">bind</span><span class="brackets">(</span><span class="default">d</span><span class="code">.</span><span class="default">getBody</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">,</span><span class="brackets">[</span><span class="string">"</span><span class="string">dragend</span><span class="string">"</span><span class="code">,</span><span class="string">"</span><span class="string">dragover</span><span class="string">"</span><span class="code">,</span><span class="string">"</span><span class="string">draggesture</span><span class="string">"</span><span class="code">,</span><span class="string">"</span><span class="string">dragdrop</span><span class="string">"</span><span class="code">,</span><span class="string">"</span><span class="string">drop</span><span class="string">"</span><span class="code">,</span><span class="string">"</span><span class="string">drag</span><span class="string">"</span><span class="brackets">]</span><span class="code">,</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">i</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">i</span><span class="code">.</span><span class="default">preventDefault</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="default">i</span><span class="code">.</span><span class="default">stopPropagation</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">return</span><span class="code"> </span><span class="keyword">false</span><span class="brackets">}</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">)</span><span class="brackets">}</span><span class="default">f</span><span class="code">.</span><span class="default">_legacySupport</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">}</span><span class="code">,</span><span class="default">getInfo</span><span class="code">:</span><span class="keyword">function</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="brackets">{</span><span class="default">longname</span><span class="code">:</span><span class="string">"</span><span class="string">Paste text/word</span><span class="string">"</span><span class="code">,</span><span class="default">author</span><span class="code">:</span><span class="string">"</span><span class="string">Moxiecode Systems AB</span><span class="string">"</span><span class="code">,</span><span class="default">authorurl</span><span class="code">:</span><span class="string">"</span><span class="string">http://tinymce.moxiecode.com</span><span class="string">"</span><span class="code">,</span><span class="default">infourl</span><span class="code">:</span><span class="string">"</span><span class="string">http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/paste</span><span class="string">"</span><span class="code">,</span><span class="default">version</span><span class="code">:</span><span class="default">tinymce</span><span class="code">.</span><span class="default">majorVersion</span><span class="code">+</span><span class="string">"</span><span class="string">.</span><span class="string">"</span><span class="code">+</span><span class="default">tinymce</span><span class="code">.</span><span class="default">minorVersion</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">,</span><span class="default">_preProcess</span><span class="code">:</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">g</span><span class="code">,</span><span class="default">e</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">k</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">editor</span><span class="code">,</span><span class="default">j</span><span class="code">=</span><span class="default">e</span><span class="code">.</span><span class="default">content</span><span class="code">,</span><span class="default">p</span><span class="code">=</span><span class="default">tinymce</span><span class="code">.</span><span class="default">grep</span><span class="code">,</span><span class="default">n</span><span class="code">=</span><span class="default">tinymce</span><span class="code">.</span><span class="default">explode</span><span class="code">,</span><span class="default">f</span><span class="code">=</span><span class="default">tinymce</span><span class="code">.</span><span class="default">trim</span><span class="code">,</span><span class="default">l</span><span class="code">,</span><span class="default">i</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">d</span><span class="brackets">(</span><span class="default">h</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">c</span><span class="brackets">(</span><span class="default">h</span><span class="code">,</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">o</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">o</span><span class="code">.</span><span class="default">constructor</span><span class="code">==</span><span class="keyword">RegExp</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">j</span><span class="code">=</span><span class="default">j</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="default">o</span><span class="code">,</span><span class="string">"</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">}</span><span class="keyword">else</span><span class="brackets">{</span><span class="default">j</span><span class="code">=</span><span class="default">j</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="default">o</span><span class="brackets">[</span><span class="number">0</span><span class="brackets">]</span><span class="code">,</span><span class="default">o</span><span class="brackets">[</span><span class="number">1</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">}</span><span class="brackets">}</span><span class="brackets">)</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">k</span><span class="code">.</span><span class="default">settings</span><span class="code">.</span><span class="default">paste_enable_default_filters</span><span class="code">==</span><span class="keyword">false</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">tinymce</span><span class="code">.</span><span class="default">isIE</span><span class="code">&amp;&amp;</span><span class="keyword">document</span><span class="code">.</span><span class="default">documentMode</span><span class="code">&gt;=</span><span class="number">9</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">d</span><span class="brackets">(</span><span class="brackets">[</span><span class="brackets">[</span><span class="code">/</span><span class="brackets">(</span><span class="code">?:&lt;</span><span class="default">br</span><span class="code">&gt;&amp;</span><span class="default">nbsp</span><span class="code">;</span><span class="brackets">[</span><span class="code">\</span><span class="default">s</span><span class="code">\</span><span class="default">r</span><span class="code">\</span><span class="default">n</span><span class="brackets">]</span><span class="code">+|&lt;</span><span class="default">br</span><span class="code">&gt;</span><span class="brackets">)</span><span class="code">*</span><span class="brackets">(</span><span class="code">&lt;\/?</span><span class="brackets">(</span><span class="default">h</span><span class="brackets">[</span><span class="number">1</span><span class="code">-</span><span class="number">6</span><span class="default">r</span><span class="brackets">]</span><span class="code">|</span><span class="default">p</span><span class="code">|</span><span class="default">div</span><span class="code">|</span><span class="default">address</span><span class="code">|</span><span class="default">pre</span><span class="code">|</span><span class="default">form</span><span class="code">|</span><span class="default">table</span><span class="code">|</span><span class="default">tbody</span><span class="code">|</span><span class="default">thead</span><span class="code">|</span><span class="default">tfoot</span><span class="code">|</span><span class="default">th</span><span class="code">|</span><span class="default">tr</span><span class="code">|</span><span class="default">td</span><span class="code">|</span><span class="default">li</span><span class="code">|</span><span class="default">ol</span><span class="code">|</span><span class="default">ul</span><span class="code">|</span><span class="default">caption</span><span class="code">|</span><span class="default">blockquote</span><span class="code">|</span><span class="default">center</span><span class="code">|</span><span class="default">dl</span><span class="code">|</span><span class="default">dt</span><span class="code">|</span><span class="default">dd</span><span class="code">|</span><span class="default">dir</span><span class="code">|</span><span class="default">fieldset</span><span class="brackets">)</span><span class="brackets">[</span><span class="code">^&gt;</span><span class="brackets">]</span><span class="code">*&gt;</span><span class="brackets">)</span><span class="brackets">(</span><span class="code">?:&lt;</span><span class="default">br</span><span class="code">&gt;&amp;</span><span class="default">nbsp</span><span class="code">;</span><span class="brackets">[</span><span class="code">\</span><span class="default">s</span><span class="code">\</span><span class="default">r</span><span class="code">\</span><span class="default">n</span><span class="brackets">]</span><span class="code">+|&lt;</span><span class="default">br</span><span class="code">&gt;</span><span class="brackets">)</span><span class="code">*/</span><span class="default">g</span><span class="code">,</span><span class="string">"</span><span class="string">$1</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">/</span><span class="keyword">class</span><span class="code">=</span><span class="string">"</span><span class="string">?Mso|style=</span><span class="string">"</span><span class="brackets">[</span><span class="code">^</span><span class="string">"</span><span class="string">]*\bmso-|w:WordDocument/i.test(j)||e.wordContent){e.wordContent=true;d([/^\s*(&amp;nbsp;)+/gi,/(&amp;nbsp;|&lt;br[^&gt;]*&gt;)+\s*$/gi]);if(b(k,</span><span class="string">"</span><span class="default">paste_convert_headers_to_strong</span><span class="string">"</span><span class="string">)){j=j.replace(/&lt;p [^&gt;]*class=</span><span class="string">"</span><span class="code">?</span><span class="default">MsoHeading</span><span class="string">"</span><span class="string">?[^&gt;]*&gt;(.*?)&lt;\/p&gt;/gi,</span><span class="string">"</span><span class="code">&lt;</span><span class="default">p</span><span class="code">&gt;&lt;</span><span class="default">strong</span><span class="code">&gt;$</span><span class="number">1</span><span class="code">&lt;/</span><span class="default">strong</span><span class="code">&gt;&lt;/</span><span class="default">p</span><span class="code">&gt;</span><span class="string">"</span><span class="string">)}if(b(k,</span><span class="string">"</span><span class="default">paste_convert_middot_lists</span><span class="string">"</span><span class="string">)){d([[/&lt;!--\[if !supportLists\]--&gt;/gi,</span><span class="string">"</span><span class="code">$&amp;</span><span class="default">__MCE_ITEM__</span><span class="string">"</span><span class="string">],[/(&lt;span[^&gt;]+(?:mso-list:|:\s*symbol)[^&gt;]+&gt;)/gi,</span><span class="string">"</span><span class="code">$</span><span class="number">1</span><span class="default">__MCE_ITEM__</span><span class="string">"</span><span class="string">],[/(&lt;p[^&gt;]+(?:MsoListParagraph)[^&gt;]+&gt;)/gi,</span><span class="string">"</span><span class="code">$</span><span class="number">1</span><span class="default">__MCE_ITEM__</span><span class="string">"</span><span class="string">]])}d([/&lt;!--[\s\S]+?--&gt;/gi,/&lt;(!|script[^&gt;]*&gt;.*?&lt;\/script(?=[&gt;\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/&gt;]))[^&gt;]*&gt;/gi,[/&lt;(\/?)s&gt;/gi,</span><span class="string">"</span><span class="code">&lt;$</span><span class="number">1</span><span class="default">strike</span><span class="code">&gt;</span><span class="string">"</span><span class="string">],[/&amp;nbsp;/gi,</span><span class="string">"</span><span class="code">\</span><span class="default">u00a0</span><span class="string">"</span><span class="string">]]);do{l=j.length;j=j.replace(/(&lt;[a-z][^&gt;]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:</span><span class="string">"</span><span class="brackets">[</span><span class="code">^</span><span class="string">"</span><span class="string">]*</span><span class="string">"</span><span class="code">|\</span><span class="default">w</span><span class="code">+)\</span><span class="default">s</span><span class="code">?/</span><span class="default">gi</span><span class="code">,</span><span class="string">"</span><span class="string">$1</span><span class="string">"</span><span class="code">)}</span><span class="keyword">while</span><span class="brackets">(</span><span class="default">l</span><span class="code">!=</span><span class="default">j</span><span class="code">.</span><span class="default">length</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">b</span><span class="brackets">(</span><span class="default">k</span><span class="code">,</span><span class="string">"</span><span class="string">paste_retain_style_properties</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/^</span><span class="default">none</span><span class="code">$/</span><span class="default">i</span><span class="code">,</span><span class="string">"</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">length</span><span class="code">==</span><span class="number">0</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">j</span><span class="code">=</span><span class="default">j</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/&lt;\/?</span><span class="default">span</span><span class="brackets">[</span><span class="code">^&gt;</span><span class="brackets">]</span><span class="code">*&gt;/</span><span class="default">gi</span><span class="code">,</span><span class="string">"</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">}</span><span class="keyword">else</span><span class="brackets">{</span><span class="default">d</span><span class="brackets">(</span><span class="brackets">[</span><span class="brackets">[</span><span class="code">/&lt;</span><span class="default">span</span><span class="code">\</span><span class="default">s</span><span class="code">+</span><span class="default">style</span><span class="code">\</span><span class="default">s</span><span class="code">*=\</span><span class="default">s</span><span class="code">*</span><span class="string">"</span><span class="string">\s*mso-spacerun\s*:\s*yes\s*;?\s*</span><span class="string">"</span><span class="code">\</span><span class="default">s</span><span class="code">*&gt;</span><span class="brackets">(</span><span class="brackets">[</span><span class="code">\</span><span class="default">s</span><span class="code">\</span><span class="default">u00a0</span><span class="brackets">]</span><span class="code">*</span><span class="brackets">)</span><span class="code">&lt;\/</span><span class="default">span</span><span class="code">&gt;/</span><span class="default">gi</span><span class="code">,</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">o</span><span class="code">,</span><span class="default">h</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="brackets">(</span><span class="default">h</span><span class="code">.</span><span class="default">length</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="code">?</span><span class="default">h</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/./,</span><span class="string">"</span><span class="string"> </span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">slice</span><span class="brackets">(</span><span class="keyword">Math</span><span class="code">.</span><span class="default">floor</span><span class="brackets">(</span><span class="default">h</span><span class="code">.</span><span class="default">length</span><span class="code">/</span><span class="number">2</span><span class="brackets">)</span><span class="brackets">)</span><span class="code">.</span><span class="default">split</span><span class="brackets">(</span><span class="string">"</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">join</span><span class="brackets">(</span><span class="string">"</span><span class="string">\u00a0</span><span class="string">"</span><span class="brackets">)</span><span class="code">:</span><span class="string">"</span><span class="string">"</span><span class="brackets">}</span><span class="brackets">]</span><span class="code">,</span><span class="brackets">[</span><span class="code">/</span><span class="brackets">(</span><span class="code">&lt;</span><span class="brackets">[</span><span class="default">a</span><span class="code">-</span><span class="default">z</span><span class="brackets">]</span><span class="brackets">[</span><span class="code">^&gt;</span><span class="brackets">]</span><span class="code">*</span><span class="brackets">)</span><span class="code">\</span><span class="default">sstyle</span><span class="code">=</span><span class="string">"</span><span class="string">([^</span><span class="string">"</span><span class="brackets">]</span><span class="code">*)</span><span class="string">"</span><span class="string">/gi,function(t,h,r){var u=[],o=0,q=n(f(r).replace(/&amp;quot;/gi,</span><span class="string">"</span><span class="string">'</span><span class="string">"),";");c(q,function(s){var w,y,z=n(s,":");function x(A){return A+((A!=="0")&amp;&amp;(/\d$/.test(A)))?"px":""}if(z.length==2){w=z[0].toLowerCase();y=z[1].toLowerCase();switch(w){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-table-layout-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":u[o++]=w.replace(/^mso-|-alt$/g,"")+":"+x(y);return;case"horiz-align":u[o++]="text-align:"+y;return;case"vert-align":u[o++]="vertical-align:"+y;return;case"font-color":case"mso-foreground":u[o++]="color:"+y;return;case"mso-background":case"mso-highlight":u[o++]="background:"+y;return;case"mso-default-height":u[o++]="min-height:"+x(y);return;case"mso-default-width":u[o++]="min-width:"+x(y);return;case"mso-padding-between-alt":u[o++]="border-collapse:separate;border-spacing:"+x(y);return;case"text-line-through":if((y=="single")||(y=="double")){u[o++]="text-decoration:line-through"}return;case"mso-zero-height":if(y=="yes"){u[o++]="display:none"}return}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(w)){return}u[o++]=w+":"+z[1]}});if(o&gt;0){return h+</span><span class="string">'</span><span class="code"> </span><span class="default">style</span><span class="code">=</span><span class="string">"</span><span class="string">'+u.join(</span><span class="string">"</span><span class="code">;</span><span class="string">"</span><span class="string">)+'</span><span class="string">"</span><span class="string">'</span><span class="string">}else{return h}}]])}}if(b(k,"paste_convert_headers_to_strong")){d([[/&lt;h[1-6][^&gt;]*&gt;/gi,"&lt;p&gt;&lt;strong&gt;"],[/&lt;\/h[1-6][^&gt;]*&gt;/gi,"&lt;/strong&gt;&lt;/p&gt;"]])}d([[/Version:[\d.]+\nStartHTML:\d+\nEndHTML:\d+\nStartFragment:\d+\nEndFragment:\d+/gi,""]]);i=b(k,"paste_strip_class_attributes");if(i!=="none"){function m(q,o){if(i==="all"){return""}var h=p(n(o.replace(/^(["</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">(</span><span class="code">.*</span><span class="brackets">)</span><span class="code">\</span><span class="number">1</span><span class="code">$/,</span><span class="string">"</span><span class="string">$2</span><span class="string">"</span><span class="code">),</span><span class="string">"</span><span class="string"> </span><span class="string">"</span><span class="code">),</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">r</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="brackets">(</span><span class="code">/^</span><span class="brackets">(</span><span class="code">?!</span><span class="default">mso</span><span class="brackets">)</span><span class="code">/</span><span class="default">i</span><span class="code">.</span><span class="default">test</span><span class="brackets">(</span><span class="default">r</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">}</span><span class="code">);</span><span class="keyword">return</span><span class="code"> </span><span class="default">h</span><span class="code">.</span><span class="default">length</span><span class="code">?</span><span class="string">'</span><span class="string"> class="</span><span class="string">'</span><span class="code">+</span><span class="default">h</span><span class="code">.</span><span class="default">join</span><span class="brackets">(</span><span class="string">"</span><span class="string"> </span><span class="string">"</span><span class="brackets">)</span><span class="code">+</span><span class="string">'</span><span class="string">"</span><span class="string">'</span><span class="code">:</span><span class="string">"</span><span class="string">"</span><span class="brackets">}</span><span class="default">j</span><span class="code">=</span><span class="default">j</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/ </span><span class="keyword">class</span><span class="code">=</span><span class="string">"</span><span class="string">([^</span><span class="string">"</span><span class="code">]+</span><span class="brackets">)</span><span class="string">"</span><span class="string">/gi,m);j=j.replace(/ class=([\-\w]+)/gi,m)}if(b(k,</span><span class="string">"</span><span class="default">paste_remove_spans</span><span class="string">"</span><span class="string">)){j=j.replace(/&lt;\/?span[^&gt;]*&gt;/gi,</span><span class="string">"</span><span class="string">"</span><span class="string">)}e.content=j},_postProcess:function(g,i){var f=this,e=f.editor,h=e.dom,d;if(e.settings.paste_enable_default_filters==false){return}if(i.wordContent){c(h.select(</span><span class="string">"</span><span class="default">a</span><span class="string">"</span><span class="string">,i.node),function(j){if(!j.href||j.href.indexOf(</span><span class="string">"</span><span class="code">#</span><span class="default">_Toc</span><span class="string">"</span><span class="string">)!=-1){h.remove(j,1)}});if(b(e,</span><span class="string">"</span><span class="default">paste_convert_middot_lists</span><span class="string">"</span><span class="string">)){f._convertLists(g,i)}d=b(e,</span><span class="string">"</span><span class="default">paste_retain_style_properties</span><span class="string">"</span><span class="string">);if((tinymce.is(d,</span><span class="string">"</span><span class="default">string</span><span class="string">"</span><span class="string">))&amp;&amp;(d!==</span><span class="string">"</span><span class="default">all</span><span class="string">"</span><span class="string">)&amp;&amp;(d!==</span><span class="string">"</span><span class="code">*</span><span class="string">"</span><span class="string">)){d=tinymce.explode(d.replace(/^none$/i,</span><span class="string">"</span><span class="string">"</span><span class="string">));c(h.select(</span><span class="string">"</span><span class="code">*</span><span class="string">"</span><span class="string">,i.node),function(m){var n={},k=0,l,o,j;if(d){for(l=0;l&lt;d.length;l++){o=d[l];j=h.getStyle(m,o);if(j){n[o]=j;k++}}}h.setAttrib(m,</span><span class="string">"</span><span class="default">style</span><span class="string">"</span><span class="string">,</span><span class="string">"</span><span class="string">"</span><span class="string">);if(d&amp;&amp;k&gt;0){h.setStyles(m,n)}else{if(m.nodeName==</span><span class="string">"</span><span class="default">SPAN</span><span class="string">"</span><span class="string">&amp;&amp;!m.className){h.remove(m,true)}}})}}if(b(e,</span><span class="string">"</span><span class="default">paste_remove_styles</span><span class="string">"</span><span class="string">)||(b(e,</span><span class="string">"</span><span class="default">paste_remove_styles_if_webkit</span><span class="string">"</span><span class="string">)&amp;&amp;tinymce.isWebKit)){c(h.select(</span><span class="string">"</span><span class="code">*</span><span class="brackets">[</span><span class="default">style</span><span class="brackets">]</span><span class="string">"</span><span class="string">,i.node),function(j){j.removeAttribute(</span><span class="string">"</span><span class="default">style</span><span class="string">"</span><span class="string">);j.removeAttribute(</span><span class="string">"</span><span class="default">data</span><span class="code">-</span><span class="default">mce</span><span class="code">-</span><span class="default">style</span><span class="string">"</span><span class="string">)})}else{if(tinymce.isWebKit){c(h.select(</span><span class="string">"</span><span class="code">*</span><span class="string">"</span><span class="string">,i.node),function(j){j.removeAttribute(</span><span class="string">"</span><span class="default">data</span><span class="code">-</span><span class="default">mce</span><span class="code">-</span><span class="default">style</span><span class="string">"</span><span class="string">)})}}},_convertLists:function(g,e){var i=g.editor.dom,h,l,d=-1,f,m=[],k,j;c(i.select(</span><span class="string">"</span><span class="default">p</span><span class="string">"</span><span class="string">,e.node),function(t){var q,u=</span><span class="string">"</span><span class="string">"</span><span class="string">,s,r,n,o;for(q=t.firstChild;q&amp;&amp;q.nodeType==3;q=q.nextSibling){u+=q.nodeValue}u=t.innerHTML.replace(/&lt;\/?\w+[^&gt;]*&gt;/gi,</span><span class="string">"</span><span class="string">"</span><span class="string">).replace(/&amp;nbsp;/g,</span><span class="string">"</span><span class="code">\</span><span class="default">u00a0</span><span class="string">"</span><span class="string">);if(/^(__MCE_ITEM__)+[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*\u00a0*/.test(u)){s=</span><span class="string">"</span><span class="default">ul</span><span class="string">"</span><span class="string">}if(/^__MCE_ITEM__\s*\w+\.\s*\u00a0+/.test(u)){s=</span><span class="string">"</span><span class="default">ol</span><span class="string">"</span><span class="string">}if(s){f=parseFloat(t.style.marginLeft||0);if(f&gt;d){m.push(f)}if(!h||s!=k){h=i.create(s);i.insertAfter(h,t)}else{if(f&gt;d){h=l.appendChild(i.create(s))}else{if(f&lt;d){n=tinymce.inArray(m,f);o=i.getParents(h.parentNode,s);h=o[o.length-1-n]||h}}}c(i.select(</span><span class="string">"</span><span class="default">span</span><span class="string">"</span><span class="string">,t),function(v){var p=v.innerHTML.replace(/&lt;\/?\w+[^&gt;]*&gt;/gi,</span><span class="string">"</span><span class="string">"</span><span class="string">);if(s==</span><span class="string">"</span><span class="default">ul</span><span class="string">"</span><span class="string">&amp;&amp;/^__MCE_ITEM__[\u2022\u00b7\u00a7\u00d8o\u25CF]/.test(p)){i.remove(v)}else{if(/^__MCE_ITEM__[\s\S]*\w+\.(&amp;nbsp;|\u00a0)*\s*/.test(p)){i.remove(v)}}});r=t.innerHTML;if(s==</span><span class="string">"</span><span class="default">ul</span><span class="string">"</span><span class="string">){r=t.innerHTML.replace(/__MCE_ITEM__/g,</span><span class="string">"</span><span class="string">"</span><span class="string">).replace(/^[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*(&amp;nbsp;|\u00a0)+\s*/,</span><span class="string">"</span><span class="string">"</span><span class="string">)}else{r=t.innerHTML.replace(/__MCE_ITEM__/g,</span><span class="string">"</span><span class="string">"</span><span class="string">).replace(/^\s*\w+\.(&amp;nbsp;|\u00a0)+\s*/,</span><span class="string">"</span><span class="string">"</span><span class="string">)}l=h.appendChild(i.create(</span><span class="string">"</span><span class="default">li</span><span class="string">"</span><span class="string">,0,r));i.remove(t);d=f;k=s}else{h=d=0}});j=e.node.innerHTML;if(j.indexOf(</span><span class="string">"</span><span class="default">__MCE_ITEM__</span><span class="string">"</span><span class="string">)!=-1){e.node.innerHTML=j.replace(/__MCE_ITEM__/g,</span><span class="string">"</span><span class="string">"</span><span class="string">)}},_insert:function(f,d){var e=this.editor,g=e.selection.getRng();if(!e.selection.isCollapsed()&amp;&amp;g.startContainer!=g.endContainer){e.getDoc().execCommand(</span><span class="string">"</span><span class="default">Delete</span><span class="string">"</span><span class="string">,false,null)}e.execCommand(</span><span class="string">"</span><span class="default">mceInsertContent</span><span class="string">"</span><span class="string">,false,f,{skip_undo:d})},_insertPlainText:function(j,x,v){var t,u,l,k,r,e,p,f,n=j.getWin(),z=j.getDoc(),s=j.selection,m=tinymce.is,y=tinymce.inArray,g=b(j,</span><span class="string">"</span><span class="default">paste_text_linebreaktype</span><span class="string">"</span><span class="string">),o=b(j,</span><span class="string">"</span><span class="default">paste_text_replacements</span><span class="string">"</span><span class="string">);function q(d){c(d,function(h){if(h.constructor==RegExp){v=v.replace(h,</span><span class="string">"</span><span class="string">"</span><span class="string">)}else{v=v.replace(h[0],h[1])}})}if((typeof(v)===</span><span class="string">"</span><span class="default">string</span><span class="string">"</span><span class="string">)&amp;&amp;(v.length&gt;0)){if(/&lt;(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^&gt;]*&gt;/i.test(v)){q([/[</span><span class="special">\n</span><span class="special">\r</span><span class="string">]+/g])}else{q([/</span><span class="special">\r</span><span class="string">+/g])}q([[/&lt;\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)&gt;/gi,</span><span class="string">"</span><span class="code">\</span><span class="default">n</span><span class="code">\</span><span class="default">n</span><span class="string">"</span><span class="string">],[/&lt;br[^&gt;]*&gt;|&lt;\/tr&gt;/gi,</span><span class="string">"</span><span class="code">\</span><span class="default">n</span><span class="string">"</span><span class="string">],[/&lt;\/t[dh]&gt;\s*&lt;t[dh][^&gt;]*&gt;/gi,</span><span class="string">"</span><span class="code">\</span><span class="default">t</span><span class="string">"</span><span class="string">],/&lt;[a-z!\/?][^&gt;]*&gt;/gi,[/&amp;nbsp;/gi,</span><span class="string">"</span><span class="code"> </span><span class="string">"</span><span class="string">],[/(?:(?!</span><span class="special">\n</span><span class="string">)\s)*(</span><span class="special">\n</span><span class="string">+)(?:(?!</span><span class="special">\n</span><span class="string">)\s)*/gi,</span><span class="string">"</span><span class="code">$</span><span class="number">1</span><span class="string">"</span><span class="string">],[/</span><span class="special">\n</span><span class="string">{3,}/g,</span><span class="string">"</span><span class="code">\</span><span class="default">n</span><span class="code">\</span><span class="default">n</span><span class="string">"</span><span class="string">],/^\s+|\s+$/g]);v=x.decode(tinymce.html.Entities.encodeRaw(v));if(!s.isCollapsed()){z.execCommand(</span><span class="string">"</span><span class="default">Delete</span><span class="string">"</span><span class="string">,false,null)}if(m(o,</span><span class="string">"</span><span class="default">array</span><span class="string">"</span><span class="string">)||(m(o,</span><span class="string">"</span><span class="default">array</span><span class="string">"</span><span class="string">))){q(o)}else{if(m(o,</span><span class="string">"</span><span class="default">string</span><span class="string">"</span><span class="string">)){q(new RegExp(o,</span><span class="string">"</span><span class="default">gi</span><span class="string">"</span><span class="string">))}}if(g==</span><span class="string">"</span><span class="default">none</span><span class="string">"</span><span class="string">){q([[/</span><span class="special">\n</span><span class="string">+/g,</span><span class="string">"</span><span class="code"> </span><span class="string">"</span><span class="string">]])}else{if(g==</span><span class="string">"</span><span class="default">br</span><span class="string">"</span><span class="string">){q([[/</span><span class="special">\n</span><span class="string">/g,</span><span class="string">"</span><span class="code">&lt;</span><span class="default">br</span><span class="code"> /&gt;</span><span class="string">"</span><span class="string">]])}else{q([/^\s+|\s+$/g,[/</span><span class="special">\n</span><span class="special">\n</span><span class="string">/g,</span><span class="string">"</span><span class="code">&lt;/</span><span class="default">p</span><span class="code">&gt;&lt;</span><span class="default">p</span><span class="code">&gt;</span><span class="string">"</span><span class="string">],[/</span><span class="special">\n</span><span class="string">/g,</span><span class="string">"</span><span class="code">&lt;</span><span class="default">br</span><span class="code"> /&gt;</span><span class="string">"</span><span class="string">]])}}if((l=v.indexOf(</span><span class="string">"</span><span class="code">&lt;/</span><span class="default">p</span><span class="code">&gt;&lt;</span><span class="default">p</span><span class="code">&gt;</span><span class="string">"</span><span class="string">))!=-1){k=v.lastIndexOf(</span><span class="string">"</span><span class="code">&lt;/</span><span class="default">p</span><span class="code">&gt;&lt;</span><span class="default">p</span><span class="code">&gt;</span><span class="string">"</span><span class="string">);r=s.getNode();e=[];do{if(r.nodeType==1){if(r.nodeName==</span><span class="string">"</span><span class="default">TD</span><span class="string">"</span><span class="string">||r.nodeName==</span><span class="string">"</span><span class="default">BODY</span><span class="string">"</span><span class="string">){break}e[e.length]=r}}while(r=r.parentNode);if(e.length&gt;0){p=v.substring(0,l);f=</span><span class="string">"</span><span class="string">"</span><span class="string">;for(t=0,u=e.length;t&lt;u;t++){p+=</span><span class="string">"</span><span class="code">&lt;/</span><span class="string">"</span><span class="string">+e[t].nodeName.toLowerCase()+</span><span class="string">"</span><span class="code">&gt;</span><span class="string">"</span><span class="string">;f+=</span><span class="string">"</span><span class="code">&lt;</span><span class="string">"</span><span class="string">+e[e.length-t-1].nodeName.toLowerCase()+</span><span class="string">"</span><span class="code">&gt;</span><span class="string">"</span><span class="string">}if(l==k){v=p+f+v.substring(l+7)}else{v=p+v.substring(l+4,k+4)+f+v.substring(k+7)}}}j.execCommand(</span><span class="string">"</span><span class="default">mceInsertRawHTML</span><span class="string">"</span><span class="string">,false,v+'&lt;span id=</span><span class="string">"</span><span class="default">_plain_text_marker</span><span class="string">"</span><span class="string">&gt;&amp;nbsp;&lt;/span&gt;');window.setTimeout(function(){var d=x.get(</span><span class="string">"</span><span class="default">_plain_text_marker</span><span class="string">"</span><span class="string">),A,h,w,i;s.select(d,false);z.execCommand(</span><span class="string">"</span><span class="default">Delete</span><span class="string">"</span><span class="string">,false,null);d=null;A=s.getStart();h=x.getViewPort(n);w=x.getPos(A).y;i=A.clientHeight;if((w&lt;h.y)||(w+i&gt;h.y+h.h)){z.body.scrollTop=w&lt;h.y?w:w-h.h+25}},0)}},_legacySupport:function(){var e=this,d=e.editor;d.addCommand(</span><span class="string">"</span><span class="default">mcePasteWord</span><span class="string">"</span><span class="string">,function(){d.windowManager.open({file:e.url+</span><span class="string">"</span><span class="code">/</span><span class="default">pasteword</span><span class="code">.</span><span class="default">htm</span><span class="string">"</span><span class="string">,width:parseInt(b(d,</span><span class="string">"</span><span class="default">paste_dialog_width</span><span class="string">"</span><span class="string">)),height:parseInt(b(d,</span><span class="string">"</span><span class="default">paste_dialog_height</span><span class="string">"</span><span class="string">)),inline:1})});if(b(d,</span><span class="string">"</span><span class="default">paste_text_use_dialog</span><span class="string">"</span><span class="string">)){d.addCommand(</span><span class="string">"</span><span class="default">mcePasteText</span><span class="string">"</span><span class="string">,function(){d.windowManager.open({file:e.url+</span><span class="string">"</span><span class="code">/</span><span class="default">pastetext</span><span class="code">.</span><span class="default">htm</span><span class="string">"</span><span class="string">,width:parseInt(b(d,</span><span class="string">"</span><span class="default">paste_dialog_width</span><span class="string">"</span><span class="string">)),height:parseInt(b(d,</span><span class="string">"</span><span class="default">paste_dialog_height</span><span class="string">"</span><span class="string">)),inline:1})})}d.addButton(</span><span class="string">"</span><span class="default">pasteword</span><span class="string">"</span><span class="string">,{title:</span><span class="string">"</span><span class="default">paste</span><span class="code">.</span><span class="default">paste_word_desc</span><span class="string">"</span><span class="string">,cmd:</span><span class="string">"</span><span class="default">mcePasteWord</span><span class="string">"</span><span class="string">})}});tinymce.PluginManager.add(</span><span class="string">"</span><span class="default">paste</span><span class="string">"</span><span class="string">,tinymce.plugins.PastePlugin)})();</span><a name="line_1"></a></li></ol></div></body></html>
                    </div>
    </body>
</html>
