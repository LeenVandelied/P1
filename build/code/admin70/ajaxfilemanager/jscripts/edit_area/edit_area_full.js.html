<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>
            Mayflower Code Browser - Source Code
        </title>
        <link rel="stylesheet" type="text/css" href="../../../js/jquery.sidebar/css/codebrowser/sidebar.css" />
        <link rel="stylesheet" type="text/css" href="../../../css/global.css" />
        <link rel="stylesheet" type="text/css" href="../../../css/cruisecontrol.css" />
        <link rel="stylesheet" type="text/css" href="../../../css/review.css" />

        <script type="text/javascript" src="../../../js/jquery-1.4.2.min.js"></script>
        <script type="text/javascript" src="../../../js/jquery.sidebar/jquery-ui-1.7.2.custom.min.js"></script>
        <script type="text/javascript" src="../../../js/jquery.sidebar/jquery.sidebar.js"></script>
        <script type="text/javascript" src="../../../js/jquery.cluetip/lib/jquery.hoverIntent.js"></script>
        <script type="text/javascript" src="../../../js/jquery.cluetip/lib/jquery.bgiframe.min.js"></script>
        <script type="text/javascript" src="../../../js/jquery.cluetip/jquery.cluetip.min.js"></script>

        <script type="text/javascript" src="../../../js/review.js"></script>
    </head>
    <body class="codebrowser">
        <div class="header">
            <a href="./../../../index.html">Go back to index</a> |
            <a href="http://github.com/mayflowergmbh/PHP_CodeBrowser">PHP CodeBrowser</a>
        </div>
        <hr/>
        <div id="review">
            <div class="filepath">
                admin70/ajaxfilemanager/jscripts/edit_area/edit_area_full.js            </div>

            <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body><div class="code"><ol class="code"><li id="line_1" class="odd"><span class="lineNumber">&nbsp;1&nbsp;</span>&nbsp;<span class="keyword">function</span><span class="code"> </span><span class="default">EAL</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">version</span><span class="code">=</span><span class="string">"</span><span class="string">0.6.7</span><span class="string">"</span><span class="code">;</span><span class="default">date</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">Date</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">start_time</span><span class="code">=</span><span class="default">date</span><span class="code">.</span><span class="default">getTime</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">win</span><span class="code">=</span><span class="string">"</span><span class="string">loading</span><span class="string">"</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">error</span><span class="code">=</span><span class="keyword">false</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code">=</span><span class="string">"</span><span class="string">"</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">template</span><span class="code">=</span><span class="string">"</span><span class="string">"</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">lang</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">loadedFiles</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">Array</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">waiting_loading</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">scripts_to_load</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">Array</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">sub_scripts_to_load</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">Array</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">resize</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">Array</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">default_settings</span><span class="code">=</span><span class="brackets">{</span><span class="default">debug</span><span class="code">: </span><span class="keyword">false</span><span class="code"> ,</span><span class="default">smooth_selection</span><span class="code">: </span><span class="keyword">true</span><span class="code"> ,</span><span class="default">font_size</span><span class="code">: </span><span class="string">"</span><span class="string">10</span><span class="string">"</span><span class="code"> ,</span><span class="default">font_family</span><span class="code">: </span><span class="string">"</span><span class="string">monospace</span><span class="string">"</span><span class="code"> ,</span><span class="default">start_highlight</span><span class="code">: </span><span class="keyword">false</span><span class="code"> ,</span><span class="default">toolbar</span><span class="code">: </span><span class="string">"</span><span class="string">search, go_to_line, fullscreen, |, undo, redo, |, select_font,|, change_smooth_selection, highlight, reset_highlight, |, help</span><span class="string">"</span><span class="code"> ,</span><span class="default">begin_toolbar</span><span class="code">: </span><span class="string">"</span><span class="string">"</span><span class="code"> ,</span><span class="default">end_toolbar</span><span class="code">: </span><span class="string">"</span><span class="string">"</span><span class="code"> ,</span><span class="default">allow_resize</span><span class="code">: </span><span class="string">"</span><span class="string">both</span><span class="string">"</span><span class="code"> ,</span><span class="default">min_width</span><span class="code">: </span><span class="number">400</span><span class="code"> ,</span><span class="default">min_height</span><span class="code">: </span><span class="number">100</span><span class="code"> ,</span><span class="default">replace_tab_by_spaces</span><span class="code">: </span><span class="keyword">false</span><span class="code"> ,</span><span class="default">allow_toggle</span><span class="code">: </span><span class="keyword">true</span><span class="code"> ,</span><span class="default">language</span><span class="code">: </span><span class="string">"</span><span class="string">en</span><span class="string">"</span><span class="code"> ,</span><span class="default">syntax</span><span class="code">: </span><span class="string">"</span><span class="string">"</span><span class="code"> ,</span><span class="default">display</span><span class="code">: </span><span class="string">"</span><span class="string">onload</span><span class="string">"</span><span class="code"> ,</span><span class="default">max_undo</span><span class="code">: </span><span class="number">20</span><span class="code"> ,</span><span class="default">browsers</span><span class="code">: </span><span class="string">"</span><span class="string">known</span><span class="string">"</span><span class="code"> ,</span><span class="default">plugins</span><span class="code">: </span><span class="string">"</span><span class="string">"</span><span class="code"> ,</span><span class="default">gecko_spellcheck</span><span class="code">: </span><span class="keyword">false</span><span class="code"> ,</span><span class="default">fullscreen</span><span class="code">: </span><span class="keyword">false</span><span class="code"> ,</span><span class="default">load_callback</span><span class="code">: </span><span class="string">"</span><span class="string">"</span><span class="code"> ,</span><span class="default">save_callback</span><span class="code">: </span><span class="string">"</span><span class="string">"</span><span class="code"> , </span><span class="default">save_as_callback</span><span class="code">: </span><span class="string">"</span><span class="string">"</span><span class="code">, </span><span class="default">change_callback</span><span class="code">: </span><span class="string">"</span><span class="string">"</span><span class="code"> ,</span><span class="default">submit_callback</span><span class="code">: </span><span class="string">"</span><span class="string">"</span><span class="code"> ,</span><span class="default">EA_init_callback</span><span class="code">: </span><span class="string">"</span><span class="string">"</span><span class="code"> ,</span><span class="default">EA_delete_callback</span><span class="code">: </span><span class="string">"</span><span class="string">"</span><span class="code"> ,</span><span class="default">EA_load_callback</span><span class="code">: </span><span class="string">"</span><span class="string">"</span><span class="code"> ,</span><span class="default">EA_unload_callback</span><span class="code">: </span><span class="string">"</span><span class="string">"</span><span class="code"> ,</span><span class="default">EA_toggle_on_callback</span><span class="code">: </span><span class="string">"</span><span class="string">"</span><span class="code"> ,</span><span class="default">EA_toggle_off_callback</span><span class="code">: </span><span class="string">"</span><span class="string">"</span><span class="code"> </span><span class="brackets">}</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">advanced_buttons</span><span class="code">=</span><span class="brackets">[</span><span class="code"> </span><span class="brackets">[</span><span class="string">'</span><span class="string">new_document</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">newdocument.gif</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">new_document</span><span class="string">'</span><span class="brackets">]</span><span class="code">, </span><span class="brackets">[</span><span class="string">'</span><span class="string">search</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">search.gif</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">show_search</span><span class="string">'</span><span class="brackets">]</span><span class="code">, </span><span class="brackets">[</span><span class="string">'</span><span class="string">go_to_line</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">go_to_line.gif</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">go_to_line</span><span class="string">'</span><span class="brackets">]</span><span class="code">, </span><span class="brackets">[</span><span class="string">'</span><span class="string">undo</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">undo.gif</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">undo</span><span class="string">'</span><span class="brackets">]</span><span class="code">, </span><span class="brackets">[</span><span class="string">'</span><span class="string">redo</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">redo.gif</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">redo</span><span class="string">'</span><span class="brackets">]</span><span class="code">, </span><span class="brackets">[</span><span class="string">'</span><span class="string">change_smooth_selection</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">smooth_selection.gif</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">change_smooth_selection_mode</span><span class="string">'</span><span class="brackets">]</span><span class="code">, </span><span class="brackets">[</span><span class="string">'</span><span class="string">reset_highlight</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">reset_highlight.gif</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">resync_highlight</span><span class="string">'</span><span class="brackets">]</span><span class="code">, </span><span class="brackets">[</span><span class="string">'</span><span class="string">highlight</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">highlight.gif</span><span class="string">'</span><span class="code">,</span><span class="string">'</span><span class="string">change_highlight</span><span class="string">'</span><span class="brackets">]</span><span class="code">, </span><span class="brackets">[</span><span class="string">'</span><span class="string">help</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">help.gif</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">show_help</span><span class="string">'</span><span class="brackets">]</span><span class="code">, </span><span class="brackets">[</span><span class="string">'</span><span class="string">save</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">save.gif</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">save</span><span class="string">'</span><span class="brackets">]</span><span class="code">, </span><span class="brackets">[</span><span class="string">'</span><span class="string">save_as</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">save_as.gif</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">save_as</span><span class="string">'</span><span class="brackets">]</span><span class="code">, </span><span class="brackets">[</span><span class="string">'</span><span class="string">load</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">load.gif</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">load</span><span class="string">'</span><span class="brackets">]</span><span class="code">, </span><span class="brackets">[</span><span class="string">'</span><span class="string">fullscreen</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">fullscreen.gif</span><span class="string">'</span><span class="code">, </span><span class="string">'</span><span class="string">toggle_full_screen</span><span class="string">'</span><span class="brackets">]</span><span class="code"> </span><span class="brackets">]</span><span class="code">;</span><span class="default">ua</span><span class="code">=</span><span class="keyword">navigator</span><span class="code">.</span><span class="default">userAgent</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIE</span><span class="string">'</span><span class="brackets">]</span><span class="code">=</span><span class="brackets">(</span><span class="keyword">navigator</span><span class="code">.</span><span class="default">appName</span><span class="code">==</span><span class="string">"</span><span class="string">Microsoft Internet Explorer</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIE</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIE</span><span class="string">'</span><span class="brackets">]</span><span class="code">=</span><span class="default">ua</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/^.*?</span><span class="default">MSIE</span><span class="code"> </span><span class="brackets">(</span><span class="brackets">[</span><span class="number">0</span><span class="code">-</span><span class="number">9</span><span class="code">\.</span><span class="brackets">]</span><span class="code">*</span><span class="brackets">)</span><span class="code">.*$/, </span><span class="string">"</span><span class="string">$1</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIE</span><span class="string">'</span><span class="brackets">]</span><span class="code">&lt;</span><span class="number">6</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">has_error</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isNS</span><span class="string">'</span><span class="brackets">]</span><span class="code">=</span><span class="default">ua</span><span class="code">.</span><span class="default">indexOf</span><span class="brackets">(</span><span class="string">'</span><span class="string">Netscape/</span><span class="string">'</span><span class="brackets">)</span><span class="code"> !=-</span><span class="number">1</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isNS</span><span class="string">'</span><span class="brackets">]</span><span class="code">=</span><span class="default">ua</span><span class="code">.</span><span class="default">substr</span><span class="brackets">(</span><span class="default">ua</span><span class="code">.</span><span class="default">indexOf</span><span class="brackets">(</span><span class="string">'</span><span class="string">Netscape/</span><span class="string">'</span><span class="brackets">)</span><span class="code">+</span><span class="number">9</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isNS</span><span class="string">'</span><span class="brackets">]</span><span class="code">&lt;</span><span class="number">8</span><span class="code"> || !</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIE</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">has_error</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isOpera</span><span class="string">'</span><span class="brackets">]</span><span class="code">=</span><span class="brackets">(</span><span class="default">ua</span><span class="code">.</span><span class="default">indexOf</span><span class="brackets">(</span><span class="string">'</span><span class="string">Opera</span><span class="string">'</span><span class="brackets">)</span><span class="code"> !=-</span><span class="number">1</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isOpera</span><span class="string">'</span><span class="brackets">]</span><span class="code">=</span><span class="default">ua</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/^.*?</span><span class="default">Opera</span><span class="code">.*?</span><span class="brackets">(</span><span class="brackets">[</span><span class="number">0</span><span class="code">-</span><span class="number">9</span><span class="code">\.</span><span class="brackets">]</span><span class="code">+</span><span class="brackets">)</span><span class="code">.*$/</span><span class="default">i</span><span class="code">, </span><span class="string">"</span><span class="string">$1</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isOpera</span><span class="string">'</span><span class="brackets">]</span><span class="code">&lt;</span><span class="number">9</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">has_error</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIE</span><span class="string">'</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">false</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isGecko</span><span class="string">'</span><span class="brackets">]</span><span class="code">=</span><span class="brackets">(</span><span class="default">ua</span><span class="code">.</span><span class="default">indexOf</span><span class="brackets">(</span><span class="string">'</span><span class="string">Gecko</span><span class="string">'</span><span class="brackets">)</span><span class="code"> !=-</span><span class="number">1</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isFirefox</span><span class="string">'</span><span class="brackets">]</span><span class="code"> =</span><span class="brackets">(</span><span class="default">ua</span><span class="code">.</span><span class="default">indexOf</span><span class="brackets">(</span><span class="string">'</span><span class="string">Firefox</span><span class="string">'</span><span class="brackets">)</span><span class="code"> !=-</span><span class="number">1</span><span class="brackets">)</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isFirefox</span><span class="string">'</span><span class="brackets">]</span><span class="code">=</span><span class="default">ua</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/^.*?</span><span class="default">Firefox</span><span class="code">.*?</span><span class="brackets">(</span><span class="brackets">[</span><span class="number">0</span><span class="code">-</span><span class="number">9</span><span class="code">\.</span><span class="brackets">]</span><span class="code">+</span><span class="brackets">)</span><span class="code">.*$/</span><span class="default">i</span><span class="code">, </span><span class="string">"</span><span class="string">$1</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIceweasel</span><span class="string">'</span><span class="brackets">]</span><span class="code"> =</span><span class="brackets">(</span><span class="default">ua</span><span class="code">.</span><span class="default">indexOf</span><span class="brackets">(</span><span class="string">'</span><span class="string">Iceweasel</span><span class="string">'</span><span class="brackets">)</span><span class="code"> !=-</span><span class="number">1</span><span class="brackets">)</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isFirefox</span><span class="string">'</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIceweasel</span><span class="string">'</span><span class="brackets">]</span><span class="code">=</span><span class="default">ua</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/^.*?</span><span class="default">Iceweasel</span><span class="code">.*?</span><span class="brackets">(</span><span class="brackets">[</span><span class="number">0</span><span class="code">-</span><span class="number">9</span><span class="code">\.</span><span class="brackets">]</span><span class="code">+</span><span class="brackets">)</span><span class="code">.*$/</span><span class="default">i</span><span class="code">, </span><span class="string">"</span><span class="string">$1</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isCamino</span><span class="string">'</span><span class="brackets">]</span><span class="code"> =</span><span class="brackets">(</span><span class="default">ua</span><span class="code">.</span><span class="default">indexOf</span><span class="brackets">(</span><span class="string">'</span><span class="string">Camino</span><span class="string">'</span><span class="brackets">)</span><span class="code"> !=-</span><span class="number">1</span><span class="brackets">)</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isCamino</span><span class="string">'</span><span class="brackets">]</span><span class="code">=</span><span class="default">ua</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/^.*?</span><span class="default">Camino</span><span class="code">.*?</span><span class="brackets">(</span><span class="brackets">[</span><span class="number">0</span><span class="code">-</span><span class="number">9</span><span class="code">\.</span><span class="brackets">]</span><span class="code">+</span><span class="brackets">)</span><span class="code">.*$/</span><span class="default">i</span><span class="code">, </span><span class="string">"</span><span class="string">$1</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isSafari</span><span class="string">'</span><span class="brackets">]</span><span class="code">=</span><span class="brackets">(</span><span class="default">ua</span><span class="code">.</span><span class="default">indexOf</span><span class="brackets">(</span><span class="string">'</span><span class="string">Safari</span><span class="string">'</span><span class="brackets">)</span><span class="code"> !=-</span><span class="number">1</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIE</span><span class="string">'</span><span class="brackets">]</span><span class="code">&gt;=</span><span class="number">6</span><span class="code"> || </span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isOpera</span><span class="string">'</span><span class="brackets">]</span><span class="code">&gt;=</span><span class="number">9</span><span class="code"> || </span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isFirefox</span><span class="string">'</span><span class="brackets">]</span><span class="code"> || </span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isCamino</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isValidBrowser</span><span class="string">'</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">true</span><span class="code">;</span><a name="line_1"></a></li>
<li id="line_2" class="even"><span class="lineNumber">&nbsp;2&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isValidBrowser</span><span class="string">'</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">false</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">set_base_url</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="default">i</span><span class="code">&lt;</span><span class="keyword">this</span><span class="code">.</span><span class="default">scripts_to_load</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="default">i</span><span class="code">++</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">setTimeout</span><span class="brackets">(</span><span class="string">"</span><span class="string">eAL.load_script('</span><span class="string">"</span><span class="code">+</span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code"> + </span><span class="keyword">this</span><span class="code">.</span><span class="default">scripts_to_load</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">+ </span><span class="string">"</span><span class="string">.js');</span><span class="string">"</span><span class="code">, </span><span class="number">1</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">waiting_loading</span><span class="brackets">[</span><span class="keyword">this</span><span class="code">.</span><span class="default">scripts_to_load</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">+ </span><span class="string">"</span><span class="string">.js</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">false</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">this</span><span class="code">.</span><span class="default">add_event</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">, </span><span class="string">"</span><span class="string">load</span><span class="string">"</span><span class="code">, </span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">window_loaded</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">has_error</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">error</span><span class="code">=</span><span class="keyword">true</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="brackets">}</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">window_loaded</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">eAL</span><span class="code">.</span><span class="default">win</span><span class="code">=</span><span class="string">"</span><span class="string">loaded</span><span class="string">"</span><span class="code">;</span><span class="keyword">if</span><span class="code"> </span><span class="brackets">(</span><span class="keyword">document</span><span class="code">.</span><span class="default">forms</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">for</span><span class="code"> </span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="default">i</span><span class="code">&lt;</span><span class="keyword">document</span><span class="code">.</span><span class="default">forms</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="default">i</span><span class="code">++</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">form</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">forms</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">;</span><span class="default">form</span><span class="code">.</span><span class="default">edit_area_replaced_submit</span><span class="code">=</span><span class="keyword">null</span><span class="code">;</span><span class="keyword">try</span><span class="brackets">{</span><span class="default">form</span><span class="code">.</span><span class="default">edit_area_replaced_submit</span><span class="code">=</span><span class="default">form</span><span class="code">.</span><span class="default">onsubmit</span><span class="code">;</span><span class="default">form</span><span class="code">.</span><span class="default">onsubmit</span><span class="code">=</span><span class="string">"</span><span class="string">"</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">catch</span><span class="code"> </span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="brackets">{</span><span class="brackets">}</span><span class="default">eAL</span><span class="code">.</span><span class="default">add_event</span><span class="brackets">(</span><span class="default">form</span><span class="code">, </span><span class="string">"</span><span class="string">submit</span><span class="string">"</span><span class="code">, </span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">submit</span><span class="brackets">)</span><span class="code">;</span><span class="default">eAL</span><span class="code">.</span><span class="default">add_event</span><span class="brackets">(</span><span class="default">form</span><span class="code">, </span><span class="string">"</span><span class="string">reset</span><span class="string">"</span><span class="code">, </span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">reset</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="default">eAL</span><span class="code">.</span><span class="default">add_event</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">, </span><span class="string">"</span><span class="string">unload</span><span class="string">"</span><span class="code">, </span><span class="keyword">function</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="default">eAs</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">eAL</span><span class="code">.</span><span class="default">delete_instance</span><span class="brackets">(</span><span class="default">i</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">init_ie_textarea</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">textarea</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">textarea</span><span class="code"> &amp;&amp; </span><span class="keyword">typeof</span><span class="brackets">(</span><span class="default">textarea</span><span class="code">.</span><span class="default">focused</span><span class="brackets">)</span><span class="code">==</span><span class="string">"</span><span class="string">undefined</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">textarea</span><span class="code">.</span><span class="default">focus</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="default">textarea</span><span class="code">.</span><span class="default">focused</span><span class="code">=</span><span class="keyword">true</span><span class="code">;</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionStart</span><span class="code">=</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionEnd</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="default">get_IE_selection</span><span class="brackets">(</span><span class="default">textarea</span><span class="brackets">)</span><span class="code">;</span><span class="default">eAL</span><span class="code">.</span><span class="default">add_event</span><span class="brackets">(</span><span class="default">textarea</span><span class="code">, </span><span class="string">"</span><span class="string">focus</span><span class="string">"</span><span class="code">, </span><span class="default">IE_textarea_focus</span><span class="brackets">)</span><span class="code">;</span><span class="default">eAL</span><span class="code">.</span><span class="default">add_event</span><span class="brackets">(</span><span class="default">textarea</span><span class="code">, </span><span class="string">"</span><span class="string">blur</span><span class="string">"</span><span class="code">, </span><span class="default">IE_textarea_blur</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">init</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">settings</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">has_error</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">error</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">return</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">]</span><span class="brackets">)</span><span class="code"> </span><span class="default">eAL</span><span class="code">.</span><span class="default">delete_instance</span><span class="brackets">(</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">default_settings</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">typeof</span><span class="brackets">(</span><span class="default">settings</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">==</span><span class="string">"</span><span class="string">undefined</span><span class="string">"</span><span class="brackets">)</span><span class="code"> </span><span class="default">settings</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">default_settings</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">browsers</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="string">"</span><span class="string">known</span><span class="string">"</span><span class="code"> &amp;&amp; </span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isValidBrowser</span><span class="string">'</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">false</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">begin_toolbar</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">length</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="code"> </span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">toolbar</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">begin_toolbar</span><span class="string">"</span><span class="brackets">]</span><span class="code"> +</span><span class="string">"</span><span class="string">,</span><span class="string">"</span><span class="code">+ </span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">toolbar</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">end_toolbar</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">length</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="code"> </span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">toolbar</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">toolbar</span><span class="string">"</span><span class="brackets">]</span><span class="code"> +</span><span class="string">"</span><span class="string">,</span><span class="string">"</span><span class="code">+ </span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">end_toolbar</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">tab_toolbar</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">toolbar</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/ /</span><span class="default">g</span><span class="code">,</span><span class="string">"</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">split</span><span class="brackets">(</span><span class="string">"</span><span class="string">,</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">plugins</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">plugins</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/ /</span><span class="default">g</span><span class="code">,</span><span class="string">"</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">split</span><span class="brackets">(</span><span class="string">"</span><span class="string">,</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="default">i</span><span class="code">&lt;</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">plugins</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="default">i</span><span class="code">++</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">plugins</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">.</span><span class="default">length</span><span class="code">==</span><span class="number">0</span><span class="brackets">)</span><span class="code"> </span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">plugins</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">splice</span><span class="brackets">(</span><span class="default">i</span><span class="code">,</span><span class="number">1</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">this</span><span class="code">.</span><span class="default">get_template</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_script</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code"> + </span><span class="string">"</span><span class="string">langs/</span><span class="string">"</span><span class="code">+ </span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">language</span><span class="string">"</span><span class="brackets">]</span><span class="code"> + </span><span class="string">"</span><span class="string">.js</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">syntax</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">length</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">syntax</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">syntax</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">toLowerCase</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_script</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code"> + </span><span class="string">"</span><span class="string">reg_syntax/</span><span class="string">"</span><span class="code">+ </span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">syntax</span><span class="string">"</span><span class="brackets">]</span><span class="code"> + </span><span class="string">"</span><span class="string">.js</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">]</span><span class="code">=</span><span class="brackets">{</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="code">: </span><span class="default">settings</span><span class="brackets">}</span><span class="code">;</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">false</span><span class="code">;</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">hidden</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">false</span><span class="code">;</span><span class="default">eAL</span><span class="code">.</span><span class="default">start</span><span class="brackets">(</span><span class="default">settings</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">delete_instance</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">eAL</span><span class="code">.</span><span class="default">execCommand</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="string">"</span><span class="string">EA_delete</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code"> &amp;&amp; </span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">execCommand</span><span class="brackets">(</span><span class="string">"</span><span class="string">EA_unload</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">eAL</span><span class="code">.</span><span class="default">toggle</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="string">"</span><span class="string">off</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">span</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">EditAreaArroundInfos_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">span</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">span</span><span class="code">.</span><span class="default">parentNode</span><span class="code">.</span><span class="default">removeChild</span><span class="brackets">(</span><span class="default">span</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">var</span><span class="code"> </span><span class="default">iframe</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">iframe</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">iframe</span><span class="code">.</span><span class="default">parentNode</span><span class="code">.</span><span class="default">removeChild</span><span class="brackets">(</span><span class="default">iframe</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">try</span><span class="brackets">{</span><span class="keyword">delete</span><span class="code"> </span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">catch</span><span class="code"> </span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="brackets">{</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">delete</span><span class="code"> </span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">start</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">win</span><span class="code">!=</span><span class="string">"</span><span class="string">loaded</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">setTimeout</span><span class="brackets">(</span><span class="string">"</span><span class="string">eAL.start('</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="code">+</span><span class="string">"</span><span class="string">');</span><span class="string">"</span><span class="code">, </span><span class="number">50</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">return</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="default">eAL</span><span class="code">.</span><span class="default">waiting_loading</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">eAL</span><span class="code">.</span><span class="default">waiting_loading</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">!=</span><span class="string">"</span><span class="string">loaded</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">setTimeout</span><span class="brackets">(</span><span class="string">"</span><span class="string">eAL.start('</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="code">+</span><span class="string">"</span><span class="string">');</span><span class="string">"</span><span class="code">, </span><span class="number">50</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">return</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="default">eAL</span><span class="code">.</span><span class="default">lang</span><span class="brackets">[</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">language</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">]</span><span class="code"> || </span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">syntax</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">length</span><span class="code">&gt;</span><span class="number">0</span><span class="code"> &amp;&amp; !</span><span class="default">eAL</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">syntax</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">]</span><span class="brackets">)</span><span class="code"> </span><span class="brackets">)</span><span class="brackets">{</span><span class="default">setTimeout</span><span class="brackets">(</span><span class="string">"</span><span class="string">eAL.start('</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="code">+</span><span class="string">"</span><span class="string">');</span><span class="string">"</span><span class="code">, </span><span class="number">50</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">return</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">syntax</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">length</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="code"> </span><span class="default">eAL</span><span class="code">.</span><span class="default">init_syntax_regexp</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">EditAreaArroundInfos_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">)</span><span class="code"> &amp;&amp; </span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">debug</span><span class="string">"</span><span class="brackets">]</span><span class="code"> || </span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">allow_toggle</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">span</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">createElement</span><span class="brackets">(</span><span class="string">"</span><span class="string">span</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">span</span><span class="code">.</span><span class="default">id</span><span class="code">=</span><span class="string">"</span><span class="string">EditAreaArroundInfos_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">html</span><span class="code">=</span><span class="string">"</span><span class="string">"</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">allow_toggle</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">checked</span><span class="code">=</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">display</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="string">"</span><span class="string">onload</span><span class="string">"</span><span class="brackets">)</span><span class="code">?</span><span class="string">"</span><span class="string">checked</span><span class="string">"</span><span class="code">:</span><span class="string">"</span><span class="string">"</span><span class="code">;</span><span class="default">html</span><span class="code">+=</span><span class="string">"</span><span class="string">&lt;div id='edit_area_toggle_</span><span class="string">"</span><span class="code">+</span><span class="default">i</span><span class="code">+</span><span class="string">"</span><span class="string">'&gt;</span><span class="string">"</span><span class="code">;</span><span class="default">html</span><span class="code">+=</span><span class="string">"</span><span class="string">&lt;input id='edit_area_toggle_checkbox_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="code"> +</span><span class="string">"</span><span class="string">' class='toggle_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="code"> +</span><span class="string">"</span><span class="string">' type='checkbox' onclick='eAL.toggle(</span><span class="special">\"</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="code"> +</span><span class="string">"</span><span class="special">\"</span><span class="string">);' accesskey='e' </span><span class="string">"</span><span class="code">+</span><span class="default">checked</span><span class="code">+</span><span class="string">"</span><span class="string"> /&gt;</span><span class="string">"</span><span class="code">;</span><span class="default">html</span><span class="code">+=</span><span class="string">"</span><span class="string">&lt;label for='edit_area_toggle_checkbox_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="code"> +</span><span class="string">"</span><span class="string">'&gt;{$toggle}&lt;/label&gt;&lt;/div&gt;</span><span class="string">"</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">debug</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code"> </span><span class="default">html</span><span class="code">+=</span><span class="string">"</span><span class="string">&lt;textarea id='edit_area_debug_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="code"> +</span><span class="string">"</span><span class="string">' style='z-index: 20;width: 100%;height: 120px;overflow: auto;border: solid black 1px;'&gt;&lt;/textarea&gt;&lt;br /&gt;</span><span class="string">"</span><span class="code">;</span><span class="default">html</span><span class="code">=</span><span class="default">eAL</span><span class="code">.</span><span class="default">translate</span><span class="brackets">(</span><span class="default">html</span><span class="code">, </span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">language</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="default">span</span><span class="code">.</span><span class="default">innerHTML</span><span class="code">=</span><span class="default">html</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">father</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">parentNode</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">next</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">nextSibling</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">next</span><span class="code">==</span><span class="keyword">null</span><span class="brackets">)</span><span class="code"> </span><span class="default">father</span><span class="code">.</span><span class="default">appendChild</span><span class="brackets">(</span><span class="default">span</span><span class="brackets">)</span><span class="code">;</span><a name="line_2"></a></li>
<li id="line_3" class="odd"><span class="lineNumber">&nbsp;3&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="default">father</span><span class="code">.</span><span class="default">insertBefore</span><span class="brackets">(</span><span class="default">span</span><span class="code">, </span><span class="default">next</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">initialized</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">execCommand</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="string">"</span><span class="string">EA_init</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">display</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="string">"</span><span class="string">later</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">initialized</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">true</span><span class="code">;</span><span class="keyword">return</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIE</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">eAL</span><span class="code">.</span><span class="default">init_ie_textarea</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">var</span><span class="code"> </span><span class="default">html_toolbar_content</span><span class="code">=</span><span class="string">"</span><span class="string">"</span><span class="code">;</span><span class="default">area</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="default">i</span><span class="code">&lt;</span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">tab_toolbar</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="default">i</span><span class="code">++</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">html_toolbar_content</span><span class="code">+=</span><span class="keyword">this</span><span class="code">.</span><span class="default">get_control_html</span><span class="brackets">(</span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">tab_toolbar</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">, </span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">language</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="keyword">this</span><span class="code">.</span><span class="default">iframe_script</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">iframe_script</span><span class="code">=</span><span class="string">"</span><span class="string">"</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="default">i</span><span class="code">&lt;</span><span class="keyword">this</span><span class="code">.</span><span class="default">sub_scripts_to_load</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="default">i</span><span class="code">++</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">iframe_script</span><span class="code">+=</span><span class="string">'</span><span class="string">&lt;script language="javascript" type="text/javascript" src="</span><span class="string">'</span><span class="code">+ </span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code"> + </span><span class="keyword">this</span><span class="code">.</span><span class="default">sub_scripts_to_load</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code"> +</span><span class="string">'</span><span class="string">.js"&gt;&lt;/script&gt;</span><span class="string">'</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="default">i</span><span class="code">&lt;</span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">plugins</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="default">i</span><span class="code">++</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="default">eAL</span><span class="code">.</span><span class="default">all_plugins_loaded</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">iframe_script</span><span class="code">+=</span><span class="string">'</span><span class="string">&lt;script language="javascript" type="text/javascript" src="</span><span class="string">'</span><span class="code">+ </span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code"> + </span><span class="string">'</span><span class="string">plugins/</span><span class="string">'</span><span class="code"> + </span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">plugins</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code"> + </span><span class="string">'</span><span class="string">/</span><span class="string">'</span><span class="code"> + </span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">plugins</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code"> +</span><span class="string">'</span><span class="string">.js"&gt;&lt;/script&gt;</span><span class="string">'</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">iframe_script</span><span class="code">+=</span><span class="string">'</span><span class="string">&lt;script language="javascript" type="text/javascript" src="</span><span class="string">'</span><span class="code">+ </span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code"> + </span><span class="string">'</span><span class="string">plugins/</span><span class="string">'</span><span class="code"> + </span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">plugins</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code"> + </span><span class="string">'</span><span class="string">/langs/</span><span class="string">'</span><span class="code"> + </span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">language</span><span class="string">"</span><span class="brackets">]</span><span class="code"> +</span><span class="string">'</span><span class="string">.js"&gt;&lt;/script&gt;</span><span class="string">'</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="keyword">this</span><span class="code">.</span><span class="default">iframe_css</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">iframe_css</span><span class="code">=</span><span class="string">"</span><span class="string">&lt;link href='</span><span class="string">"</span><span class="code">+ </span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code"> +</span><span class="string">"</span><span class="string">edit_area.css' rel='stylesheet' type='text/css' /&gt;</span><span class="string">"</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">var</span><span class="code"> </span><span class="default">template</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">template</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/\</span><span class="brackets">[</span><span class="default">__BASEURL__</span><span class="code">\</span><span class="brackets">]</span><span class="code">/</span><span class="default">g</span><span class="code">, </span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="brackets">)</span><span class="code">;</span><span class="default">template</span><span class="code">=</span><span class="default">template</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="string">"</span><span class="string">[__TOOLBAR__]</span><span class="string">"</span><span class="code">,</span><span class="default">html_toolbar_content</span><span class="brackets">)</span><span class="code">;</span><span class="default">template</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">translate</span><span class="brackets">(</span><span class="default">template</span><span class="code">, </span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">language</span><span class="string">"</span><span class="brackets">]</span><span class="code">, </span><span class="string">"</span><span class="string">template</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">template</span><span class="code">=</span><span class="default">template</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="string">"</span><span class="string">[__CSSRULES__]</span><span class="string">"</span><span class="code">, </span><span class="keyword">this</span><span class="code">.</span><span class="default">iframe_css</span><span class="brackets">)</span><span class="code">;</span><span class="default">template</span><span class="code">=</span><span class="default">template</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="string">"</span><span class="string">[__JSCODE__]</span><span class="string">"</span><span class="code">, </span><span class="keyword">this</span><span class="code">.</span><span class="default">iframe_script</span><span class="brackets">)</span><span class="code">;</span><span class="default">template</span><span class="code">=</span><span class="default">template</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="string">"</span><span class="string">[__EA_VERSION__]</span><span class="string">"</span><span class="code">, </span><span class="keyword">this</span><span class="code">.</span><span class="default">version</span><span class="brackets">)</span><span class="code">;</span><span class="default">area</span><span class="code">.</span><span class="default">textarea</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="default">area</span><span class="code">.</span><span class="default">textarea</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">father</span><span class="code">=</span><span class="default">area</span><span class="code">.</span><span class="default">textarea</span><span class="code">.</span><span class="default">parentNode</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">content</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">createElement</span><span class="brackets">(</span><span class="string">"</span><span class="string">iframe</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">content</span><span class="code">.</span><span class="default">name</span><span class="code">=</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="default">content</span><span class="code">.</span><span class="default">id</span><span class="code">=</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="default">content</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">borderWidth</span><span class="code">=</span><span class="string">"</span><span class="string">0px</span><span class="string">"</span><span class="code">;</span><span class="default">setAttribute</span><span class="brackets">(</span><span class="default">content</span><span class="code">, </span><span class="string">"</span><span class="string">frameBorder</span><span class="string">"</span><span class="code">, </span><span class="string">"</span><span class="string">0</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">content</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">overflow</span><span class="code">=</span><span class="string">"</span><span class="string">hidden</span><span class="string">"</span><span class="code">;</span><span class="default">content</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">display</span><span class="code">=</span><span class="string">"</span><span class="string">none</span><span class="string">"</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">next</span><span class="code">=</span><span class="default">area</span><span class="code">.</span><span class="default">textarea</span><span class="code">.</span><span class="default">nextSibling</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">next</span><span class="code">==</span><span class="keyword">null</span><span class="brackets">)</span><span class="code"> </span><span class="default">father</span><span class="code">.</span><span class="default">appendChild</span><span class="brackets">(</span><span class="default">content</span><span class="brackets">)</span><span class="code">;</span><a name="line_3"></a></li>
<li id="line_4" class="even"><span class="lineNumber">&nbsp;4&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="default">father</span><span class="code">.</span><span class="default">insertBefore</span><span class="brackets">(</span><span class="default">content</span><span class="code">, </span><span class="default">next</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">frame</span><span class="code">=</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">]</span><span class="code">;</span><span class="default">frame</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">open</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="default">frame</span><span class="code">.</span><span class="default">eAs</span><span class="code">=</span><span class="default">eAs</span><span class="code">;</span><span class="default">frame</span><span class="code">.</span><span class="default">area_id</span><span class="code">=</span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="default">frame</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">area_id</span><span class="code">=</span><span class="default">area</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="default">frame</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">write</span><span class="brackets">(</span><span class="default">template</span><span class="brackets">)</span><span class="code">;</span><span class="default">frame</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">close</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">toggle</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="default">toggle_to</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="default">toggle_to</span><span class="brackets">)</span><span class="code"> </span><span class="default">toggle_to</span><span class="code">=</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">true</span><span class="brackets">)</span><span class="code">?</span><span class="string">"</span><span class="string">off</span><span class="string">"</span><span class="code">:</span><span class="string">"</span><span class="string">on</span><span class="string">"</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">true</span><span class="code">  &amp;&amp; </span><span class="default">toggle_to</span><span class="code">==</span><span class="string">"</span><span class="string">off</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">toggle_off</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_4"></a></li>
<li id="line_5" class="odd"><span class="lineNumber">&nbsp;5&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="keyword">if</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">false</span><span class="code">  &amp;&amp; </span><span class="default">toggle_to</span><span class="code">==</span><span class="string">"</span><span class="string">on</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">toggle_on</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">return</span><span class="code"> </span><span class="keyword">false</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">toggle_off</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">frame</span><span class="code">=</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">frame</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">fullscreen</span><span class="brackets">[</span><span class="string">'</span><span class="string">isFull</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="code"> </span><span class="default">frame</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">toggle_full_screen</span><span class="brackets">(</span><span class="keyword">false</span><span class="brackets">)</span><span class="code">;</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">false</span><span class="code">;</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">wrap</span><span class="code">=</span><span class="string">"</span><span class="string">off</span><span class="string">"</span><span class="code">;</span><span class="default">setAttribute</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">, </span><span class="string">"</span><span class="string">wrap</span><span class="string">"</span><span class="code">, </span><span class="string">"</span><span class="string">off</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">parNod</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">parentNode</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">nxtSib</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">nextSibling</span><span class="code">;</span><span class="default">parNod</span><span class="code">.</span><span class="default">removeChild</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="default">parNod</span><span class="code">.</span><span class="default">insertBefore</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">, </span><span class="default">nxtSib</span><span class="brackets">)</span><span class="code">;</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">value</span><span class="code">=</span><span class="default">frame</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">textarea</span><span class="code">.</span><span class="default">value</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">selStart</span><span class="code">=</span><span class="default">frame</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">last_selection</span><span class="brackets">[</span><span class="string">"</span><span class="string">selectionStart</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">selEnd</span><span class="code">=</span><span class="default">frame</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">last_selection</span><span class="brackets">[</span><span class="string">"</span><span class="string">selectionEnd</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollTop</span><span class="code">=</span><span class="default">frame</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">result</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollLeft</span><span class="code">=</span><span class="default">frame</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">result</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">;</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">display</span><span class="code">=</span><span class="string">'</span><span class="string">none</span><span class="string">'</span><span class="code">;</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">display</span><span class="code">=</span><span class="string">"</span><span class="string">inline</span><span class="string">"</span><span class="code">;</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">focus</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIE</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">selectionStart</span><span class="code">=</span><span class="default">selStart</span><span class="code">;</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">selectionEnd</span><span class="code">=</span><span class="default">selEnd</span><span class="code">;</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">focused</span><span class="code">=</span><span class="keyword">true</span><span class="code">;</span><span class="default">set_IE_selection</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_5"></a></li>
<li id="line_6" class="even"><span class="lineNumber">&nbsp;6&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isOpera</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">setSelectionRange</span><span class="brackets">(</span><span class="number">0</span><span class="code">, </span><span class="number">0</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">try</span><span class="brackets">{</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">setSelectionRange</span><span class="brackets">(</span><span class="default">selStart</span><span class="code">, </span><span class="default">selEnd</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">catch</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="brackets">{</span><span class="brackets">}</span><span class="code">;</span><span class="brackets">}</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">=</span><span class="default">scrollTop</span><span class="code">;</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">=</span><span class="default">scrollLeft</span><span class="code">;</span><span class="default">frame</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">execCommand</span><span class="brackets">(</span><span class="string">"</span><span class="string">toggle_off</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">toggle_on</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">frame</span><span class="code">=</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code">;</span><span class="default">area</span><span class="code">=</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="default">editArea</span><span class="code">;</span><span class="default">area</span><span class="code">.</span><span class="default">textarea</span><span class="code">.</span><span class="default">value</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">value</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">selStart</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">selEnd</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollTop</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollLeft</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">use_last</span><span class="code">==</span><span class="keyword">true</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">selStart</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">last_selectionStart</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">selEnd</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">last_selectionEnd</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollTop</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">last_scrollTop</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollLeft</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">last_scrollLeft</span><span class="code">;</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">use_last</span><span class="code">=</span><span class="keyword">false</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_6"></a></li>
<li id="line_7" class="odd"><span class="lineNumber">&nbsp;7&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="brackets">{</span><span class="keyword">try</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">selStart</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">selectionStart</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">selEnd</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">selectionEnd</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollTop</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollLeft</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">catch</span><span class="brackets">(</span><span class="default">ex</span><span class="brackets">)</span><span class="brackets">{</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">this</span><span class="code">.</span><span class="default">set_editarea_size_from_textarea</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">)</span><span class="code">;</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">display</span><span class="code">=</span><span class="string">"</span><span class="string">none</span><span class="string">"</span><span class="code">;</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">display</span><span class="code">=</span><span class="string">"</span><span class="string">inline</span><span class="string">"</span><span class="code">;</span><span class="default">area</span><span class="code">.</span><span class="default">execCommand</span><span class="brackets">(</span><span class="string">"</span><span class="string">focus</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">true</span><span class="code">;</span><span class="default">area</span><span class="code">.</span><span class="default">execCommand</span><span class="brackets">(</span><span class="string">"</span><span class="string">update_size</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">result</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">=</span><span class="default">scrollTop</span><span class="code">;</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">result</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">=</span><span class="default">scrollLeft</span><span class="code">;</span><span class="default">area</span><span class="code">.</span><span class="default">area_select</span><span class="brackets">(</span><span class="default">selStart</span><span class="code">, </span><span class="default">selEnd</span><span class="code">-</span><span class="default">selStart</span><span class="brackets">)</span><span class="code">;</span><span class="default">area</span><span class="code">.</span><span class="default">execCommand</span><span class="brackets">(</span><span class="string">"</span><span class="string">toggle_on</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_7"></a></li>
<li id="line_8" class="even"><span class="lineNumber">&nbsp;8&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">elem</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="default">elem</span><span class="code">.</span><span class="default">last_selectionStart</span><span class="code">=</span><span class="default">elem</span><span class="code">.</span><span class="default">selectionStart</span><span class="code">;</span><span class="default">elem</span><span class="code">.</span><span class="default">last_selectionEnd</span><span class="code">=</span><span class="default">elem</span><span class="code">.</span><span class="default">selectionEnd</span><span class="code">;</span><span class="default">elem</span><span class="code">.</span><span class="default">last_scrollTop</span><span class="code">=</span><span class="default">elem</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">;</span><span class="default">elem</span><span class="code">.</span><span class="default">last_scrollLeft</span><span class="code">=</span><span class="default">elem</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">;</span><span class="default">elem</span><span class="code">.</span><span class="default">use_last</span><span class="code">=</span><span class="keyword">true</span><span class="code">;</span><span class="default">eAL</span><span class="code">.</span><span class="default">start</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">set_editarea_size_from_textarea</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="default">frame</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">elem</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">width</span><span class="code">=</span><span class="keyword">Math</span><span class="code">.</span><span class="default">max</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">min_width</span><span class="string">"</span><span class="brackets">]</span><span class="code">, </span><span class="default">elem</span><span class="code">.</span><span class="default">offsetWidth</span><span class="brackets">)</span><span class="code">+</span><span class="string">"</span><span class="string">px</span><span class="string">"</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">height</span><span class="code">=</span><span class="keyword">Math</span><span class="code">.</span><span class="default">max</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">min_height</span><span class="string">"</span><span class="brackets">]</span><span class="code">, </span><span class="default">elem</span><span class="code">.</span><span class="default">offsetHeight</span><span class="brackets">)</span><span class="code">+</span><span class="string">"</span><span class="string">px</span><span class="string">"</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">elem</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">width</span><span class="code">.</span><span class="default">indexOf</span><span class="brackets">(</span><span class="string">"</span><span class="string">%</span><span class="string">"</span><span class="brackets">)</span><span class="code">!=-</span><span class="number">1</span><span class="brackets">)</span><span class="code"> </span><span class="default">width</span><span class="code">=</span><span class="default">elem</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">width</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">elem</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">height</span><span class="code">.</span><span class="default">indexOf</span><span class="brackets">(</span><span class="string">"</span><span class="string">%</span><span class="string">"</span><span class="brackets">)</span><span class="code">!=-</span><span class="number">1</span><span class="brackets">)</span><span class="code"> </span><span class="default">height</span><span class="code">=</span><span class="default">elem</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">height</span><span class="code">;</span><span class="default">frame</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">width</span><span class="code">=</span><span class="default">width</span><span class="code">;</span><span class="default">frame</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">height</span><span class="code">=</span><span class="default">height</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">set_base_url</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="code"> </span><span class="brackets">(</span><span class="code">!</span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">elements</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementsByTagName</span><span class="brackets">(</span><span class="string">'</span><span class="string">script</span><span class="string">'</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">for</span><span class="code"> </span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="default">i</span><span class="code">&lt;</span><span class="default">elements</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="default">i</span><span class="code">++</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="code"> </span><span class="brackets">(</span><span class="default">elements</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">.</span><span class="default">src</span><span class="code"> &amp;&amp; </span><span class="default">elements</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">.</span><span class="default">src</span><span class="code">.</span><span class="default">match</span><span class="brackets">(</span><span class="code">/</span><span class="default">edit_area_</span><span class="brackets">[</span><span class="code">^\\\/</span><span class="brackets">]</span><span class="code">*$/</span><span class="default">i</span><span class="brackets">)</span><span class="code"> </span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">src</span><span class="code">=</span><span class="default">elements</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">.</span><span class="default">src</span><span class="code">;</span><span class="default">src</span><span class="code">=</span><span class="default">src</span><span class="code">.</span><span class="default">substring</span><span class="brackets">(</span><span class="number">0</span><span class="code">, </span><span class="default">src</span><span class="code">.</span><span class="default">lastIndexOf</span><span class="brackets">(</span><span class="string">'</span><span class="string">/</span><span class="string">'</span><span class="brackets">)</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code">=</span><span class="default">src</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">file_name</span><span class="code">=</span><span class="default">elements</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">.</span><span class="default">src</span><span class="code">.</span><span class="default">substr</span><span class="brackets">(</span><span class="default">elements</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">.</span><span class="default">src</span><span class="code">.</span><span class="default">lastIndexOf</span><span class="brackets">(</span><span class="string">"</span><span class="string">/</span><span class="string">"</span><span class="brackets">)</span><span class="code">+</span><span class="number">1</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">break</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">var</span><span class="code"> </span><span class="default">documentBasePath</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">location</span><span class="code">.</span><span class="default">href</span><span class="code">;</span><span class="keyword">if</span><span class="code"> </span><span class="brackets">(</span><span class="default">documentBasePath</span><span class="code">.</span><span class="default">indexOf</span><span class="brackets">(</span><span class="string">'</span><span class="string">?</span><span class="string">'</span><span class="brackets">)</span><span class="code"> !=-</span><span class="number">1</span><span class="brackets">)</span><span class="code"> </span><span class="default">documentBasePath</span><span class="code">=</span><span class="default">documentBasePath</span><span class="code">.</span><span class="default">substring</span><span class="brackets">(</span><span class="number">0</span><span class="code">, </span><span class="default">documentBasePath</span><span class="code">.</span><span class="default">indexOf</span><span class="brackets">(</span><span class="string">'</span><span class="string">?</span><span class="string">'</span><span class="brackets">)</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">documentURL</span><span class="code">=</span><span class="default">documentBasePath</span><span class="code">;</span><span class="default">documentBasePath</span><span class="code">=</span><span class="default">documentBasePath</span><span class="code">.</span><span class="default">substring</span><span class="brackets">(</span><span class="number">0</span><span class="code">, </span><span class="default">documentBasePath</span><span class="code">.</span><span class="default">lastIndexOf</span><span class="brackets">(</span><span class="string">'</span><span class="string">/</span><span class="string">'</span><span class="brackets">)</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="code"> </span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code">.</span><span class="default">indexOf</span><span class="brackets">(</span><span class="string">'</span><span class="string">://</span><span class="string">'</span><span class="brackets">)</span><span class="code">==-</span><span class="number">1</span><span class="code"> &amp;&amp; </span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code">.</span><span class="default">charAt</span><span class="brackets">(</span><span class="number">0</span><span class="brackets">)</span><span class="code"> !=</span><span class="string">'</span><span class="string">/</span><span class="string">'</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code">=</span><span class="default">documentBasePath</span><span class="code"> + </span><span class="string">"</span><span class="string">/</span><span class="string">"</span><span class="code"> + </span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code">+=</span><span class="string">"</span><span class="string">/</span><span class="string">"</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">get_button_html</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="default">img</span><span class="code">, </span><span class="default">exec</span><span class="code">, </span><span class="default">baseURL</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="default">baseURL</span><span class="brackets">)</span><span class="code"> </span><span class="default">baseURL</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">cmd</span><span class="code">=</span><span class="string">'</span><span class="string">editArea.execCommand(</span><span class="special">\'</span><span class="string">'</span><span class="code"> + </span><span class="default">exec</span><span class="code"> + </span><span class="string">'</span><span class="special">\'</span><span class="string">)</span><span class="string">'</span><span class="code">;</span><span class="default">html</span><span class="code">=</span><span class="string">'</span><span class="string">&lt;a href="javascript:</span><span class="string">'</span><span class="code"> + </span><span class="default">cmd</span><span class="code"> + </span><span class="string">'</span><span class="string">" onclick="</span><span class="string">'</span><span class="code"> + </span><span class="default">cmd</span><span class="code"> + </span><span class="string">'</span><span class="string">;return false;" onmousedown="return false;" target="_self"&gt;</span><span class="string">'</span><span class="code">;</span><span class="default">html</span><span class="code">+=</span><span class="string">'</span><span class="string">&lt;img id="</span><span class="string">'</span><span class="code"> + </span><span class="default">id</span><span class="code"> + </span><span class="string">'</span><span class="string">" src="</span><span class="string">'</span><span class="code">+ </span><span class="default">baseURL</span><span class="code"> +</span><span class="string">'</span><span class="string">images/</span><span class="string">'</span><span class="code"> + </span><span class="default">img</span><span class="code"> + </span><span class="string">'</span><span class="string">" title="{$</span><span class="string">'</span><span class="code"> + </span><span class="default">id</span><span class="code"> + </span><span class="string">'</span><span class="string">}" width="20" height="20" class="editAreaButtonNormal" onmouseover="editArea.switchClass(this,</span><span class="special">\'</span><span class="string">editAreaButtonOver</span><span class="special">\'</span><span class="string">);" onmouseout="editArea.restoreClass(this);" onmousedown="editArea.restoreAndSwitchClass(this,</span><span class="special">\'</span><span class="string">editAreaButtonDown</span><span class="special">\'</span><span class="string">);" /&gt;&lt;/a&gt;</span><span class="string">'</span><span class="code">;</span><span class="keyword">return</span><span class="code"> </span><span class="default">html</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">get_control_html</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">button_name</span><span class="code">, </span><span class="default">lang</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">for</span><span class="code"> </span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="default">i</span><span class="code">&lt;</span><span class="keyword">this</span><span class="code">.</span><span class="default">advanced_buttons</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="default">i</span><span class="code">++</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">but</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">advanced_buttons</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">;</span><span class="keyword">if</span><span class="code"> </span><span class="brackets">(</span><span class="default">but</span><span class="brackets">[</span><span class="number">0</span><span class="brackets">]</span><span class="code">==</span><span class="default">button_name</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">get_button_html</span><span class="brackets">(</span><span class="default">but</span><span class="brackets">[</span><span class="number">0</span><span class="brackets">]</span><span class="code">, </span><span class="default">but</span><span class="brackets">[</span><span class="number">1</span><span class="brackets">]</span><span class="code">, </span><span class="default">but</span><span class="brackets">[</span><span class="number">2</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">switch</span><span class="code"> </span><span class="brackets">(</span><span class="default">button_name</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">case</span><span class="code"> </span><span class="string">"</span><span class="string">*</span><span class="string">"</span><span class="code">: </span><span class="keyword">case</span><span class="code"> </span><span class="string">"</span><span class="string">return</span><span class="string">"</span><span class="code">: </span><span class="keyword">return</span><span class="code"> </span><span class="string">"</span><span class="string">&lt;br /&gt;</span><span class="string">"</span><span class="code">;</span><span class="keyword">case</span><span class="code"> </span><span class="string">"</span><span class="string">|</span><span class="string">"</span><span class="code">: </span><span class="keyword">case</span><span class="code"> </span><span class="string">"</span><span class="string">separator</span><span class="string">"</span><span class="code">: </span><span class="keyword">return</span><span class="code"> </span><span class="string">'</span><span class="string">&lt;img src="</span><span class="string">'</span><span class="code">+ </span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code"> +</span><span class="string">'</span><span class="string">images/spacer.gif" width="1" height="15" class="editAreaSeparatorLine"&gt;</span><span class="string">'</span><span class="code">;</span><span class="keyword">case</span><span class="code"> </span><span class="string">"</span><span class="string">select_font</span><span class="string">"</span><span class="code">: </span><span class="default">html</span><span class="code">=</span><span class="string">"</span><span class="string">&lt;select id='area_font_size' onchange='javascript:editArea.execCommand(</span><span class="special">\"</span><span class="string">change_font_size</span><span class="special">\"</span><span class="string">)'&gt;</span><span class="string">"</span><span class="code"> +</span><span class="string">"</span><span class="string">            &lt;option value='-1'&gt;{$font_size}&lt;/option&gt;</span><span class="string">"</span><span class="code"> +</span><span class="string">"</span><span class="string">            &lt;option value='8'&gt;8 pt&lt;/option&gt;</span><span class="string">"</span><span class="code"> +</span><span class="string">"</span><span class="string">            &lt;option value='9'&gt;9 pt&lt;/option&gt;</span><span class="string">"</span><span class="code"> +</span><span class="string">"</span><span class="string">            &lt;option value='10'&gt;10 pt&lt;/option&gt;</span><span class="string">"</span><span class="code"> +</span><span class="string">"</span><span class="string">            &lt;option value='11'&gt;11 pt&lt;/option&gt;</span><span class="string">"</span><span class="code"> +</span><span class="string">"</span><span class="string">            &lt;option value='12'&gt;12 pt&lt;/option&gt;</span><span class="string">"</span><span class="code"> +</span><span class="string">"</span><span class="string">            &lt;option value='14'&gt;14 pt&lt;/option&gt;</span><span class="string">"</span><span class="code"> +</span><span class="string">"</span><span class="string">        &lt;/select&gt;</span><span class="string">"</span><span class="code">;</span><span class="keyword">return</span><span class="code"> </span><span class="default">html</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">return</span><span class="code"> </span><span class="string">"</span><span class="string">&lt;span id='tmp_tool_</span><span class="string">"</span><span class="code">+</span><span class="default">button_name</span><span class="code">+</span><span class="string">"</span><span class="string">'&gt;[</span><span class="string">"</span><span class="code">+</span><span class="default">button_name</span><span class="code">+</span><span class="string">"</span><span class="string">]&lt;/span&gt;</span><span class="string">"</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">get_template</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">template</span><span class="code">==</span><span class="string">"</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">xhr_object</span><span class="code">=</span><span class="keyword">null</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">XMLHttpRequest</span><span class="brackets">)</span><span class="code"> </span><span class="default">xhr_object</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">XMLHttpRequest</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><a name="line_8"></a></li>
<li id="line_9" class="odd"><span class="lineNumber">&nbsp;9&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">ActiveXObject</span><span class="brackets">)</span><span class="code"> </span><span class="default">xhr_object</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">ActiveXObject</span><span class="brackets">(</span><span class="string">"</span><span class="string">Microsoft.XMLHTTP</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><a name="line_9"></a></li>
<li id="line_10" class="even"><span class="lineNumber">10&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="brackets">{</span><span class="default">alert</span><span class="brackets">(</span><span class="string">"</span><span class="string">XMLHTTPRequest not supported. EditArea not loaded</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">return</span><span class="code">;</span><span class="brackets">}</span><span class="default">xhr_object</span><span class="code">.</span><span class="default">open</span><span class="brackets">(</span><span class="string">"</span><span class="string">GET</span><span class="string">"</span><span class="code">, </span><span class="keyword">this</span><span class="code">.</span><span class="default">baseURL</span><span class="code">+</span><span class="string">"</span><span class="string">template.html</span><span class="string">"</span><span class="code">, </span><span class="keyword">false</span><span class="brackets">)</span><span class="code">;</span><span class="default">xhr_object</span><span class="code">.</span><span class="default">send</span><span class="brackets">(</span><span class="keyword">null</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">xhr_object</span><span class="code">.</span><span class="default">readyState</span><span class="code">==</span><span class="number">4</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">template</span><span class="code">=</span><span class="default">xhr_object</span><span class="code">.</span><span class="default">responseText</span><span class="code">;</span><a name="line_10"></a></li>
<li id="line_11" class="odd"><span class="lineNumber">11&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">has_error</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">translate</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">text</span><span class="code">, </span><span class="default">lang</span><span class="code">, </span><span class="default">mode</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">mode</span><span class="code">==</span><span class="string">"</span><span class="string">word</span><span class="string">"</span><span class="brackets">)</span><span class="code"> </span><span class="default">text</span><span class="code">=</span><span class="default">eAL</span><span class="code">.</span><span class="default">get_word_translation</span><span class="brackets">(</span><span class="default">text</span><span class="code">, </span><span class="default">lang</span><span class="brackets">)</span><span class="code">;</span><a name="line_11"></a></li>
<li id="line_12" class="even"><span class="lineNumber">12&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="keyword">if</span><span class="brackets">(</span><span class="default">mode</span><span class="code">=</span><span class="string">"</span><span class="string">template</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">eAL</span><span class="code">.</span><span class="default">current_language</span><span class="code">=</span><span class="default">lang</span><span class="code">;</span><span class="default">text</span><span class="code">=</span><span class="default">text</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/\</span><span class="brackets">{</span><span class="code">\$</span><span class="brackets">(</span><span class="brackets">[</span><span class="code">^\}</span><span class="brackets">]</span><span class="code">+</span><span class="brackets">)</span><span class="code">\</span><span class="brackets">}</span><span class="code">/</span><span class="default">gm</span><span class="code">, </span><span class="default">eAL</span><span class="code">.</span><span class="default">translate_template</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">return</span><span class="code"> </span><span class="default">text</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">translate_template</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="default">eAL</span><span class="code">.</span><span class="default">get_word_translation</span><span class="brackets">(</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">translate_template</span><span class="code">.</span><span class="default">arguments</span><span class="brackets">[</span><span class="number">1</span><span class="brackets">]</span><span class="code">, </span><span class="default">eAL</span><span class="code">.</span><span class="default">current_language</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">get_word_translation</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">val</span><span class="code">, </span><span class="default">lang</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="default">eAL</span><span class="code">.</span><span class="default">lang</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">i</span><span class="code">==</span><span class="default">val</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">return</span><span class="code"> </span><span class="default">eAL</span><span class="code">.</span><span class="default">lang</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">return</span><span class="code"> </span><span class="string">"</span><span class="string">_</span><span class="string">"</span><span class="code">+</span><span class="default">val</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">load_script</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">url</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="code"> </span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">loadedFiles</span><span class="brackets">[</span><span class="default">url</span><span class="brackets">]</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">return</span><span class="code">;</span><span class="keyword">try</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">script</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">createElement</span><span class="brackets">(</span><span class="string">"</span><span class="string">script</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">script</span><span class="code">.</span><span class="default">type</span><span class="code">=</span><span class="string">"</span><span class="string">text/javascript</span><span class="string">"</span><span class="code">;</span><span class="default">script</span><span class="code">.</span><span class="default">src</span><span class="code">=</span><span class="default">url</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">head</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementsByTagName</span><span class="brackets">(</span><span class="string">"</span><span class="string">head</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">head</span><span class="brackets">[</span><span class="number">0</span><span class="brackets">]</span><span class="code">.</span><span class="default">appendChild</span><span class="brackets">(</span><span class="default">script</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">catch</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">document</span><span class="code">.</span><span class="default">write</span><span class="brackets">(</span><span class="string">'</span><span class="string">&lt;sc</span><span class="string">'</span><span class="code">+</span><span class="string">'</span><span class="string">ript language="javascript" type="text/javascript" src="</span><span class="string">'</span><span class="code"> + </span><span class="default">url</span><span class="code"> + </span><span class="string">'</span><span class="string">"&gt;&lt;/sc</span><span class="string">'</span><span class="code">+</span><span class="string">'</span><span class="string">ript&gt;</span><span class="string">'</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">this</span><span class="code">.</span><span class="default">loadedFiles</span><span class="brackets">[</span><span class="default">url</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">true</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">add_event</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">obj</span><span class="code">, </span><span class="default">name</span><span class="code">, </span><span class="default">handler</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="code"> </span><span class="brackets">(</span><span class="default">obj</span><span class="code">.</span><span class="default">attachEvent</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">obj</span><span class="code">.</span><span class="default">attachEvent</span><span class="brackets">(</span><span class="string">"</span><span class="string">on</span><span class="string">"</span><span class="code"> + </span><span class="default">name</span><span class="code">, </span><span class="default">handler</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_12"></a></li>
<li id="line_13" class="odd"><span class="lineNumber">13&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="brackets">{</span><span class="default">obj</span><span class="code">.</span><span class="default">addEventListener</span><span class="brackets">(</span><span class="default">name</span><span class="code">, </span><span class="default">handler</span><span class="code">, </span><span class="keyword">false</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">remove_event</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">obj</span><span class="code">, </span><span class="default">name</span><span class="code">, </span><span class="default">handler</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="code"> </span><span class="brackets">(</span><span class="default">obj</span><span class="code">.</span><span class="default">detachEvent</span><span class="brackets">)</span><span class="code"> </span><span class="default">obj</span><span class="code">.</span><span class="default">detachEvent</span><span class="brackets">(</span><span class="string">"</span><span class="string">on</span><span class="string">"</span><span class="code"> + </span><span class="default">name</span><span class="code">, </span><span class="default">handler</span><span class="brackets">)</span><span class="code">;</span><a name="line_13"></a></li>
<li id="line_14" class="even"><span class="lineNumber">14&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="default">obj</span><span class="code">.</span><span class="default">removeEventListener</span><span class="brackets">(</span><span class="default">name</span><span class="code">, </span><span class="default">handler</span><span class="code">, </span><span class="keyword">false</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">reset</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">formObj</span><span class="code">=</span><span class="default">eAL</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIE</span><span class="string">'</span><span class="brackets">]</span><span class="code"> ? </span><span class="keyword">window</span><span class="code">.</span><span class="default">event</span><span class="code">.</span><span class="default">srcElement</span><span class="code"> : </span><span class="default">e</span><span class="code">.</span><span class="default">target</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="default">eAs</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">is_child</span><span class="code">=</span><span class="keyword">false</span><span class="code">;</span><span class="keyword">for</span><span class="code"> </span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">x</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="default">x</span><span class="code">&lt;</span><span class="default">formObj</span><span class="code">.</span><span class="default">elements</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="default">x</span><span class="code">++</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">formObj</span><span class="code">.</span><span class="default">elements</span><span class="brackets">[</span><span class="default">x</span><span class="brackets">]</span><span class="code">.</span><span class="default">id</span><span class="code">==</span><span class="default">i</span><span class="brackets">)</span><span class="code"> </span><span class="default">is_child</span><span class="code">=</span><span class="keyword">true</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">i</span><span class="brackets">]</span><span class="code"> &amp;&amp; </span><span class="default">is_child</span><span class="code"> &amp;&amp; </span><span class="default">eAs</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">true</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">exec</span><span class="code">=</span><span class="string">'</span><span class="string">window.frames["frame_</span><span class="string">'</span><span class="code">+ </span><span class="default">i</span><span class="code"> +</span><span class="string">'</span><span class="string">"].editArea.textarea.value=document.getElementById("</span><span class="string">'</span><span class="code">+ </span><span class="default">i</span><span class="code"> +</span><span class="string">'</span><span class="string">").value;</span><span class="string">'</span><span class="code">;</span><span class="default">exec</span><span class="code">+=</span><span class="string">'</span><span class="string">window.frames["frame_</span><span class="string">'</span><span class="code">+ </span><span class="default">i</span><span class="code"> +</span><span class="string">'</span><span class="string">"].editArea.execCommand("focus");</span><span class="string">'</span><span class="code">;</span><span class="default">exec</span><span class="code">+=</span><span class="string">'</span><span class="string">window.frames["frame_</span><span class="string">'</span><span class="code">+ </span><span class="default">i</span><span class="code"> +</span><span class="string">'</span><span class="string">"].editArea.check_line_selection();</span><span class="string">'</span><span class="code">;</span><span class="default">exec</span><span class="code">+=</span><span class="string">'</span><span class="string">window.frames["frame_</span><span class="string">'</span><span class="code">+ </span><span class="default">i</span><span class="code"> +</span><span class="string">'</span><span class="string">"].editArea.execCommand("reset");</span><span class="string">'</span><span class="code">;</span><span class="keyword">window</span><span class="code">.</span><span class="default">setTimeout</span><span class="brackets">(</span><span class="default">exec</span><span class="code">, </span><span class="number">10</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">return</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">submit</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">formObj</span><span class="code">=</span><span class="default">eAL</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIE</span><span class="string">'</span><span class="brackets">]</span><span class="code"> ? </span><span class="keyword">window</span><span class="code">.</span><span class="default">event</span><span class="code">.</span><span class="default">srcElement</span><span class="code"> : </span><span class="default">e</span><span class="code">.</span><span class="default">target</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="default">eAs</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">is_child</span><span class="code">=</span><span class="keyword">false</span><span class="code">;</span><span class="keyword">for</span><span class="code"> </span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">x</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="default">x</span><span class="code">&lt;</span><span class="default">formObj</span><span class="code">.</span><span class="default">elements</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="default">x</span><span class="code">++</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">formObj</span><span class="code">.</span><span class="default">elements</span><span class="brackets">[</span><span class="default">x</span><span class="brackets">]</span><span class="code">.</span><span class="default">id</span><span class="code">==</span><span class="default">i</span><span class="brackets">)</span><span class="code"> </span><span class="default">is_child</span><span class="code">=</span><span class="keyword">true</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">is_child</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">i</span><span class="brackets">]</span><span class="code"> &amp;&amp; </span><span class="default">eAs</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">true</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">i</span><span class="brackets">)</span><span class="code">.</span><span class="default">value</span><span class="code">=</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">i</span><span class="brackets">]</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">textarea</span><span class="code">.</span><span class="default">value</span><span class="code">;</span><span class="default">eAL</span><span class="code">.</span><span class="default">execCommand</span><span class="brackets">(</span><span class="default">i</span><span class="code">,</span><span class="string">"</span><span class="string">EA_submit</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">typeof</span><span class="brackets">(</span><span class="default">formObj</span><span class="code">.</span><span class="default">edit_area_replaced_submit</span><span class="brackets">)</span><span class="code">==</span><span class="string">"</span><span class="string">function</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">res</span><span class="code">=</span><span class="default">formObj</span><span class="code">.</span><span class="default">edit_area_replaced_submit</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">res</span><span class="code">==</span><span class="keyword">false</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">eAL</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIE</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">return</span><span class="code"> </span><span class="keyword">false</span><span class="code">;</span><a name="line_14"></a></li>
<li id="line_15" class="odd"><span class="lineNumber">15&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="default">e</span><span class="code">.</span><span class="default">preventDefault</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">return</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">getValue</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code"> &amp;&amp; </span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">true</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">textarea</span><span class="code">.</span><span class="default">value</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_15"></a></li>
<li id="line_16" class="even"><span class="lineNumber">16&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="keyword">if</span><span class="brackets">(</span><span class="default">elem</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="default">elem</span><span class="code">.</span><span class="default">value</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">return</span><span class="code"> </span><span class="keyword">false</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">setValue</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="default">new_val</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code"> &amp;&amp; </span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">true</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">textarea</span><span class="code">.</span><span class="default">value</span><span class="code">=</span><span class="default">new_val</span><span class="code">;</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">execCommand</span><span class="brackets">(</span><span class="string">"</span><span class="string">focus</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">check_line_selection</span><span class="brackets">(</span><span class="keyword">false</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">execCommand</span><span class="brackets">(</span><span class="string">"</span><span class="string">onchange</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_16"></a></li>
<li id="line_17" class="odd"><span class="lineNumber">17&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="keyword">if</span><span class="brackets">(</span><span class="default">elem</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">elem</span><span class="code">.</span><span class="default">value</span><span class="code">=</span><span class="default">new_val</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">getSelectionRange</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">sel</span><span class="code">=</span><span class="brackets">{</span><span class="string">"</span><span class="string">start</span><span class="string">"</span><span class="code">: </span><span class="number">0</span><span class="code">, </span><span class="string">"</span><span class="string">end</span><span class="string">"</span><span class="code">: </span><span class="number">0</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code"> &amp;&amp; </span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">true</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">editArea</span><span class="code">=</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="default">editArea</span><span class="code">;</span><span class="default">sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">start</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="default">editArea</span><span class="code">.</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionStart</span><span class="code">;</span><span class="default">sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">end</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="default">editArea</span><span class="code">.</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionEnd</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_17"></a></li>
<li id="line_18" class="even"><span class="lineNumber">18&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="keyword">if</span><span class="brackets">(</span><span class="default">elem</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">sel</span><span class="code">=</span><span class="default">getSelectionRange</span><span class="brackets">(</span><span class="default">elem</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">return</span><span class="code"> </span><span class="default">sel</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">setSelectionRange</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="default">new_start</span><span class="code">, </span><span class="default">new_end</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code"> &amp;&amp; </span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">true</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">area_select</span><span class="brackets">(</span><span class="default">new_start</span><span class="code">, </span><span class="default">new_end</span><span class="code">-</span><span class="default">new_start</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="keyword">this</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIE</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">check_line_selection</span><span class="brackets">(</span><span class="keyword">false</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">scroll_to_view</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code"></span><a name="line_18"></a></li>
<li id="line_19" class="odd"><span class="lineNumber">19&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="keyword">if</span><span class="brackets">(</span><span class="default">elem</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">setSelectionRange</span><span class="brackets">(</span><span class="default">elem</span><span class="code">, </span><span class="default">new_start</span><span class="code">, </span><span class="default">new_end</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">getSelectedText</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">sel</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">getSelectionRange</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">return</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">getValue</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">substring</span><span class="brackets">(</span><span class="default">sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">start</span><span class="string">"</span><span class="brackets">]</span><span class="code">, </span><span class="default">sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">end</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">setSelectedText</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="default">new_val</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">new_val</span><span class="code">=</span><span class="default">new_val</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/\</span><span class="default">r</span><span class="code">/</span><span class="default">g</span><span class="code">, </span><span class="string">"</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">sel</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">getSelectionRange</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">text</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">getValue</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code"> &amp;&amp; </span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">true</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollTop</span><span class="code">=</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">result</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollLeft</span><span class="code">=</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">result</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_19"></a></li>
<li id="line_20" class="even"><span class="lineNumber">20&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollTop</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollLeft</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">;</span><span class="brackets">}</span><span class="default">text</span><span class="code">=</span><span class="default">text</span><span class="code">.</span><span class="default">substring</span><span class="brackets">(</span><span class="number">0</span><span class="code">, </span><span class="default">sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">start</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">+ </span><span class="default">new_val</span><span class="code"> +</span><span class="default">text</span><span class="code">.</span><span class="default">substring</span><span class="brackets">(</span><span class="default">sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">end</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">setValue</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="default">text</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">new_sel_end</span><span class="code">=</span><span class="default">sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">start</span><span class="string">"</span><span class="brackets">]</span><span class="code">+ </span><span class="default">new_val</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">setSelectionRange</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="default">sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">start</span><span class="string">"</span><span class="brackets">]</span><span class="code">, </span><span class="default">new_sel_end</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">new_val</span><span class="code"> !=</span><span class="keyword">this</span><span class="code">.</span><span class="default">getSelectedText</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/\</span><span class="default">r</span><span class="code">/</span><span class="default">g</span><span class="code">, </span><span class="string">"</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">setSelectionRange</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="default">sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">start</span><span class="string">"</span><span class="brackets">]</span><span class="code">, </span><span class="default">new_sel_end</span><span class="code">+ </span><span class="default">new_val</span><span class="code">.</span><span class="default">split</span><span class="brackets">(</span><span class="string">"</span><span class="special">\n</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">length</span><span class="code"> -</span><span class="number">1</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code"> &amp;&amp; </span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">true</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">result</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">=</span><span class="default">scrollTop</span><span class="code">;</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">result</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">=</span><span class="default">scrollLeft</span><span class="code">;</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="default">editArea</span><span class="code">.</span><span class="default">execCommand</span><span class="brackets">(</span><span class="string">"</span><span class="string">onchange</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_20"></a></li>
<li id="line_21" class="odd"><span class="lineNumber">21&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="brackets">{</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">=</span><span class="default">scrollTop</span><span class="code">;</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">=</span><span class="default">scrollLeft</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">insertTags</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="default">open_tag</span><span class="code">, </span><span class="default">close_tag</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">old_sel</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">getSelectionRange</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="default">text</span><span class="code">=</span><span class="default">open_tag</span><span class="code"> + </span><span class="keyword">this</span><span class="code">.</span><span class="default">getSelectedText</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code"> + </span><span class="default">close_tag</span><span class="code">;</span><span class="default">eAL</span><span class="code">.</span><span class="default">setSelectedText</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="default">text</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">new_sel</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">getSelectionRange</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">old_sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">end</span><span class="string">"</span><span class="brackets">]</span><span class="code"> &gt; </span><span class="default">old_sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">start</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">setSelectionRange</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="default">new_sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">end</span><span class="string">"</span><span class="brackets">]</span><span class="code">, </span><span class="default">new_sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">end</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><a name="line_21"></a></li>
<li id="line_22" class="even"><span class="lineNumber">22&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">setSelectionRange</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="default">old_sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">start</span><span class="string">"</span><span class="brackets">]</span><span class="code">+</span><span class="default">open_tag</span><span class="code">.</span><span class="default">length</span><span class="code">, </span><span class="default">old_sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">start</span><span class="string">"</span><span class="brackets">]</span><span class="code">+</span><span class="default">open_tag</span><span class="code">.</span><span class="default">length</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">hide</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code"> &amp;&amp; !</span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">selectionRange</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">getSelectionRange</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">display</span><span class="code">!=</span><span class="string">"</span><span class="string">none</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">scrollTop</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">scrollLeft</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">toggle</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code"> &amp;&amp; </span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">true</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollTop</span><span class="code">=</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">result</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollLeft</span><span class="code">=</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">result</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_22"></a></li>
<li id="line_23" class="odd"><span class="lineNumber">23&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollTop</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollLeft</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">scrollTop</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="default">scrollTop</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">scrollLeft</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="default">scrollLeft</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">true</span><span class="brackets">)</span><span class="code"> </span><span class="default">eAL</span><span class="code">.</span><span class="default">toggle_off</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">var</span><span class="code"> </span><span class="default">span</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">EditAreaArroundInfos_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">span</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">span</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">display</span><span class="code">=</span><span class="string">'</span><span class="string">none</span><span class="string">'</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">display</span><span class="code">=</span><span class="string">"</span><span class="string">none</span><span class="string">"</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">show</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="brackets">(</span><span class="default">elem</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="brackets">)</span><span class="code"> &amp;&amp; </span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">elem</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">display</span><span class="code">=</span><span class="string">"</span><span class="string">inline</span><span class="string">"</span><span class="code">;</span><span class="default">elem</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">scrollTop</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="default">elem</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">scrollLeft</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">span</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">EditAreaArroundInfos_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">span</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">span</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">display</span><span class="code">=</span><span class="string">'</span><span class="string">inline</span><span class="string">'</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">elem</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">display</span><span class="code">=</span><span class="string">"</span><span class="string">inline</span><span class="string">"</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">toggle</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">true</span><span class="brackets">)</span><span class="code"> </span><span class="default">eAL</span><span class="code">.</span><span class="default">toggle_on</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code">;</span><span class="default">scrollTop</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">scrollTop</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="default">scrollLeft</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">scrollLeft</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="code"> &amp;&amp; </span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">displayed</span><span class="string">"</span><span class="brackets">]</span><span class="code">==</span><span class="keyword">true</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">result</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">=</span><span class="default">scrollTop</span><span class="code">;</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="brackets">]</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">result</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">=</span><span class="default">scrollLeft</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_23"></a></li>
<li id="line_24" class="even"><span class="lineNumber">24&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="brackets">{</span><span class="default">elem</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">=</span><span class="default">scrollTop</span><span class="code">;</span><span class="default">elem</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">=</span><span class="default">scrollLeft</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="default">sel</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">selectionRange</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">setSelectionRange</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="default">sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">start</span><span class="string">"</span><span class="brackets">]</span><span class="code">, </span><span class="default">sel</span><span class="brackets">[</span><span class="string">"</span><span class="string">end</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">delete</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">hidden</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">execCommand</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">id</span><span class="code">, </span><span class="default">cmd</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">switch</span><span class="brackets">(</span><span class="default">cmd</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">case</span><span class="code"> </span><span class="string">"</span><span class="string">EA_init</span><span class="string">"</span><span class="code">: </span><span class="keyword">if</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">settings</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">EA_init_callback</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">length</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="code"> </span><span class="default">eval</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">settings</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">EA_init_callback</span><span class="string">"</span><span class="brackets">]</span><span class="code">+</span><span class="string">"</span><span class="string">('</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="code"> +</span><span class="string">"</span><span class="string">');</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">break</span><span class="code">;</span><span class="keyword">case</span><span class="code"> </span><span class="string">"</span><span class="string">EA_delete</span><span class="string">"</span><span class="code">: </span><span class="keyword">if</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">settings</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">EA_delete_callback</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">length</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="code"> </span><span class="default">eval</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">settings</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">EA_delete_callback</span><span class="string">"</span><span class="brackets">]</span><span class="code">+</span><span class="string">"</span><span class="string">('</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="code"> +</span><span class="string">"</span><span class="string">');</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">break</span><span class="code">;</span><span class="keyword">case</span><span class="code"> </span><span class="string">"</span><span class="string">EA_submit</span><span class="string">"</span><span class="code">: </span><span class="keyword">if</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">settings</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">submit_callback</span><span class="string">"</span><span class="brackets">]</span><span class="code">.</span><span class="default">length</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="code"> </span><span class="default">eval</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">settings</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">submit_callback</span><span class="string">"</span><span class="brackets">]</span><span class="code">+</span><span class="string">"</span><span class="string">('</span><span class="string">"</span><span class="code">+ </span><span class="default">id</span><span class="code"> +</span><span class="string">"</span><span class="string">');</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">break</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">window</span><span class="code">.</span><span class="default">frames</span><span class="brackets">[</span><span class="string">"</span><span class="string">frame_</span><span class="string">"</span><span class="code">+</span><span class="default">id</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="default">eval</span><span class="brackets">(</span><span class="string">'</span><span class="string">window.frames["frame_</span><span class="string">'</span><span class="code">+ </span><span class="default">id</span><span class="code"> +</span><span class="string">'</span><span class="string">"].editArea.</span><span class="string">'</span><span class="code">+ </span><span class="default">cmd</span><span class="code"> +</span><span class="string">'</span><span class="string">;</span><span class="string">'</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">return</span><span class="code"> </span><span class="keyword">false</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">eAL</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">EAL</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">eAs</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">getAttribute</span><span class="brackets">(</span><span class="code"> </span><span class="default">elm</span><span class="code">, </span><span class="default">aname</span><span class="code"> </span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">try</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">avalue</span><span class="code">=</span><span class="default">elm</span><span class="code">.</span><span class="default">getAttribute</span><span class="brackets">(</span><span class="code"> </span><span class="default">aname</span><span class="code"> </span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">catch</span><span class="brackets">(</span><span class="default">exept</span><span class="brackets">)</span><span class="brackets">{</span><span class="brackets">}</span><span class="keyword">if</span><span class="code"> </span><span class="brackets">(</span><span class="code"> ! </span><span class="default">avalue</span><span class="code"> </span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">for</span><span class="code"> </span><span class="brackets">(</span><span class="code"> </span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="default">i</span><span class="code"> &lt; </span><span class="default">elm</span><span class="code">.</span><span class="default">attributes</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="default">i</span><span class="code"> ++ </span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">taName</span><span class="code">=</span><span class="default">elm</span><span class="code">.</span><span class="default">attributes</span><span class="code"> </span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code"> .</span><span class="default">name</span><span class="code">.</span><span class="default">toLowerCase</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="code"> </span><span class="brackets">(</span><span class="code"> </span><span class="default">taName</span><span class="code">==</span><span class="default">aname</span><span class="code"> </span><span class="brackets">)</span><span class="brackets">{</span><span class="default">avalue</span><span class="code">=</span><span class="default">elm</span><span class="code">.</span><span class="default">attributes</span><span class="code"> </span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code"> .</span><span class="default">value</span><span class="code">;</span><span class="keyword">return</span><span class="code"> </span><span class="default">avalue</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">return</span><span class="code"> </span><span class="default">avalue</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">setAttribute</span><span class="brackets">(</span><span class="code"> </span><span class="default">elm</span><span class="code">, </span><span class="default">attr</span><span class="code">, </span><span class="default">val</span><span class="code"> </span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">attr</span><span class="code">==</span><span class="string">"</span><span class="string">class</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">elm</span><span class="code">.</span><span class="default">setAttribute</span><span class="brackets">(</span><span class="string">"</span><span class="string">className</span><span class="string">"</span><span class="code">, </span><span class="default">val</span><span class="brackets">)</span><span class="code">;</span><span class="default">elm</span><span class="code">.</span><span class="default">setAttribute</span><span class="brackets">(</span><span class="string">"</span><span class="string">class</span><span class="string">"</span><span class="code">, </span><span class="default">val</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_24"></a></li>
<li id="line_25" class="odd"><span class="lineNumber">25&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="brackets">{</span><span class="default">elm</span><span class="code">.</span><span class="default">setAttribute</span><span class="brackets">(</span><span class="default">attr</span><span class="code">, </span><span class="default">val</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">getChildren</span><span class="brackets">(</span><span class="default">elem</span><span class="code">, </span><span class="default">elem_type</span><span class="code">, </span><span class="default">elem_attribute</span><span class="code">, </span><span class="default">elem_attribute_match</span><span class="code">, </span><span class="default">option</span><span class="code">, </span><span class="default">depth</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="default">option</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">var</span><span class="code"> </span><span class="default">option</span><span class="code">=</span><span class="string">"</span><span class="string">single</span><span class="string">"</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="default">depth</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">var</span><span class="code"> </span><span class="default">depth</span><span class="code">=-</span><span class="number">1</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">elem</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">children</span><span class="code">=</span><span class="default">elem</span><span class="code">.</span><span class="default">childNodes</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">result</span><span class="code">=</span><span class="keyword">null</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">results</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">Array</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">for</span><span class="code"> </span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">x</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="default">x</span><span class="code">&lt;</span><span class="default">children</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="default">x</span><span class="code">++</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">strTagName</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">String</span><span class="brackets">(</span><span class="default">children</span><span class="brackets">[</span><span class="default">x</span><span class="brackets">]</span><span class="code">.</span><span class="default">tagName</span><span class="brackets">)</span><span class="code">;</span><span class="default">children_class</span><span class="code">=</span><span class="string">"</span><span class="string">?</span><span class="string">"</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">strTagName</span><span class="code">!=</span><span class="string">"</span><span class="string">undefined</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">child_attribute</span><span class="code">=</span><span class="default">getAttribute</span><span class="brackets">(</span><span class="default">children</span><span class="brackets">[</span><span class="default">x</span><span class="brackets">]</span><span class="code">,</span><span class="default">elem_attribute</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="brackets">(</span><span class="default">strTagName</span><span class="code">.</span><span class="default">toLowerCase</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">==</span><span class="default">elem_type</span><span class="code">.</span><span class="default">toLowerCase</span><span class="brackets">(</span><span class="brackets">)</span><span class="code"> || </span><span class="default">elem_type</span><span class="code">==</span><span class="string">"</span><span class="string">"</span><span class="brackets">)</span><span class="code"> &amp;&amp; </span><span class="brackets">(</span><span class="default">elem_attribute</span><span class="code">==</span><span class="string">"</span><span class="string">"</span><span class="code"> || </span><span class="default">child_attribute</span><span class="code">==</span><span class="default">elem_attribute_match</span><span class="brackets">)</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">option</span><span class="code">==</span><span class="string">"</span><span class="string">all</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">results</span><span class="code">.</span><span class="default">push</span><span class="brackets">(</span><span class="default">children</span><span class="brackets">[</span><span class="default">x</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_25"></a></li>
<li id="line_26" class="even"><span class="lineNumber">26&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="default">children</span><span class="brackets">[</span><span class="default">x</span><span class="brackets">]</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">depth</span><span class="code">!=</span><span class="number">0</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">result</span><span class="code">=</span><span class="default">getChildren</span><span class="brackets">(</span><span class="default">children</span><span class="brackets">[</span><span class="default">x</span><span class="brackets">]</span><span class="code">, </span><span class="default">elem_type</span><span class="code">, </span><span class="default">elem_attribute</span><span class="code">, </span><span class="default">elem_attribute_match</span><span class="code">, </span><span class="default">option</span><span class="code">, </span><span class="default">depth</span><span class="code">-</span><span class="number">1</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">option</span><span class="code">==</span><span class="string">"</span><span class="string">all</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">result</span><span class="code">.</span><span class="default">length</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">results</span><span class="code">=</span><span class="default">results</span><span class="code">.</span><span class="default">concat</span><span class="brackets">(</span><span class="default">result</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code"></span><a name="line_26"></a></li>
<li id="line_27" class="odd"><span class="lineNumber">27&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="keyword">if</span><span class="brackets">(</span><span class="default">result</span><span class="code">!=</span><span class="keyword">null</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="default">result</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">option</span><span class="code">==</span><span class="string">"</span><span class="string">all</span><span class="string">"</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">return</span><span class="code"> </span><span class="default">results</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">return</span><span class="code"> </span><span class="keyword">null</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">isChildOf</span><span class="brackets">(</span><span class="default">elem</span><span class="code">, </span><span class="default">parent</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">elem</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">elem</span><span class="code">==</span><span class="default">parent</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">return</span><span class="code"> </span><span class="keyword">true</span><span class="code">;</span><span class="keyword">while</span><span class="brackets">(</span><span class="default">elem</span><span class="code">.</span><span class="default">parentNode</span><span class="code"> !=</span><span class="string">'</span><span class="string">undefined</span><span class="string">'</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="default">isChildOf</span><span class="brackets">(</span><span class="default">elem</span><span class="code">.</span><span class="default">parentNode</span><span class="code">, </span><span class="default">parent</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">return</span><span class="code"> </span><span class="keyword">false</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">getMouseX</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">e</span><span class="code">!=</span><span class="keyword">null</span><span class="code"> &amp;&amp; </span><span class="keyword">typeof</span><span class="brackets">(</span><span class="default">e</span><span class="code">.</span><span class="default">pageX</span><span class="brackets">)</span><span class="code">!=</span><span class="string">"</span><span class="string">undefined</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="default">e</span><span class="code">.</span><span class="default">pageX</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_27"></a></li>
<li id="line_28" class="even"><span class="lineNumber">28&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="brackets">(</span><span class="default">e</span><span class="code">!=</span><span class="keyword">null</span><span class="code">?</span><span class="default">e</span><span class="code">.</span><span class="default">x</span><span class="code">:</span><span class="default">event</span><span class="code">.</span><span class="default">x</span><span class="brackets">)</span><span class="code">+ </span><span class="keyword">document</span><span class="code">.</span><span class="default">documentElement</span><span class="code">.</span><span class="default">scrollLeft</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">getMouseY</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">e</span><span class="code">!=</span><span class="keyword">null</span><span class="code"> &amp;&amp; </span><span class="keyword">typeof</span><span class="brackets">(</span><span class="default">e</span><span class="code">.</span><span class="default">pageY</span><span class="brackets">)</span><span class="code">!=</span><span class="string">"</span><span class="string">undefined</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="default">e</span><span class="code">.</span><span class="default">pageY</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_28"></a></li>
<li id="line_29" class="odd"><span class="lineNumber">29&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="brackets">(</span><span class="default">e</span><span class="code">!=</span><span class="keyword">null</span><span class="code">?</span><span class="default">e</span><span class="code">.</span><span class="default">y</span><span class="code">:</span><span class="default">event</span><span class="code">.</span><span class="default">y</span><span class="brackets">)</span><span class="code">+ </span><span class="keyword">document</span><span class="code">.</span><span class="default">documentElement</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">calculeOffsetLeft</span><span class="brackets">(</span><span class="default">r</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="default">calculeOffset</span><span class="brackets">(</span><span class="default">r</span><span class="code">,</span><span class="string">"</span><span class="string">offsetLeft</span><span class="string">"</span><span class="brackets">)</span><span class="code"> </span><span class="brackets">}</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">calculeOffsetTop</span><span class="brackets">(</span><span class="default">r</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="default">calculeOffset</span><span class="brackets">(</span><span class="default">r</span><span class="code">,</span><span class="string">"</span><span class="string">offsetTop</span><span class="string">"</span><span class="brackets">)</span><span class="code"> </span><span class="brackets">}</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">calculeOffset</span><span class="brackets">(</span><span class="default">element</span><span class="code">,</span><span class="default">attr</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">offset</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="keyword">while</span><span class="brackets">(</span><span class="default">element</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">offset</span><span class="code">+=</span><span class="default">element</span><span class="brackets">[</span><span class="default">attr</span><span class="brackets">]</span><span class="code">;</span><span class="default">element</span><span class="code">=</span><span class="default">element</span><span class="code">.</span><span class="default">offsetParent</span><span class="brackets">}</span><span class="keyword">return</span><span class="code"> </span><span class="default">offset</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">get_css_property</span><span class="brackets">(</span><span class="default">elem</span><span class="code">, </span><span class="default">prop</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">document</span><span class="code">.</span><span class="default">defaultView</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="keyword">document</span><span class="code">.</span><span class="default">defaultView</span><span class="code">.</span><span class="default">getComputedStyle</span><span class="brackets">(</span><span class="default">elem</span><span class="code">, </span><span class="keyword">null</span><span class="brackets">)</span><span class="code">.</span><span class="default">getPropertyValue</span><span class="brackets">(</span><span class="default">prop</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_29"></a></li>
<li id="line_30" class="even"><span class="lineNumber">30&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="keyword">if</span><span class="brackets">(</span><span class="default">elem</span><span class="code">.</span><span class="default">currentStyle</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">prop</span><span class="code">=</span><span class="default">prop</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/-\</span><span class="default">D</span><span class="code">/</span><span class="default">gi</span><span class="code">, </span><span class="keyword">function</span><span class="brackets">(</span><span class="default">sMatch</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="default">sMatch</span><span class="code">.</span><span class="default">charAt</span><span class="brackets">(</span><span class="default">sMatch</span><span class="code">.</span><span class="default">length</span><span class="code"> - </span><span class="number">1</span><span class="brackets">)</span><span class="code">.</span><span class="default">toUpperCase</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">return</span><span class="code"> </span><span class="default">elem</span><span class="code">.</span><span class="default">currentStyle</span><span class="brackets">[</span><span class="default">prop</span><span class="brackets">]</span><span class="code">;</span><span class="brackets">}</span><span class="code"></span><a name="line_30"></a></li>
<li id="line_31" class="odd"><span class="lineNumber">31&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="code"> </span><span class="keyword">return</span><span class="code"> </span><span class="keyword">null</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">var</span><span class="code"> </span><span class="default">move_current_element</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">start_move_element</span><span class="brackets">(</span><span class="default">e</span><span class="code">, </span><span class="default">id</span><span class="code">, </span><span class="default">frame</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">elem_id</span><span class="code">=</span><span class="brackets">(</span><span class="default">e</span><span class="code">.</span><span class="default">target</span><span class="code"> || </span><span class="default">e</span><span class="code">.</span><span class="default">srcElement</span><span class="brackets">)</span><span class="code">.</span><span class="default">id</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">id</span><span class="brackets">)</span><span class="code"> </span><span class="default">elem_id</span><span class="code">=</span><span class="default">id</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="default">frame</span><span class="brackets">)</span><span class="code"> </span><span class="default">frame</span><span class="code">=</span><span class="keyword">window</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">frame</span><span class="code">.</span><span class="default">event</span><span class="brackets">)</span><span class="code"> </span><span class="default">e</span><span class="code">=</span><span class="default">frame</span><span class="code">.</span><span class="default">event</span><span class="code">;</span><span class="default">move_current_element</span><span class="code">=</span><span class="default">frame</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="default">elem_id</span><span class="brackets">)</span><span class="code">;</span><span class="default">move_current_element</span><span class="code">.</span><span class="default">frame</span><span class="code">=</span><span class="default">frame</span><span class="code">;</span><span class="default">frame</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">onmousemove</span><span class="code">=</span><span class="default">move_element</span><span class="code">;</span><span class="default">frame</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">onmouseup</span><span class="code">=</span><span class="default">end_move_element</span><span class="code">;</span><span class="default">mouse_x</span><span class="code">=</span><span class="default">getMouseX</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="code">;</span><span class="default">mouse_y</span><span class="code">=</span><span class="default">getMouseY</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="code">;</span><span class="default">move_current_element</span><span class="code">.</span><span class="default">start_pos_x</span><span class="code">=</span><span class="default">mouse_x</span><span class="code"> - </span><span class="brackets">(</span><span class="default">move_current_element</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">left</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="string">"</span><span class="string">px</span><span class="string">"</span><span class="code">,</span><span class="string">"</span><span class="string">"</span><span class="brackets">)</span><span class="code"> || </span><span class="default">calculeOffsetLeft</span><span class="brackets">(</span><span class="default">move_current_element</span><span class="brackets">)</span><span class="brackets">)</span><span class="code">;</span><span class="default">move_current_element</span><span class="code">.</span><span class="default">start_pos_y</span><span class="code">=</span><span class="default">mouse_y</span><span class="code"> - </span><span class="brackets">(</span><span class="default">move_current_element</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">top</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="string">"</span><span class="string">px</span><span class="string">"</span><span class="code">,</span><span class="string">"</span><span class="string">"</span><span class="brackets">)</span><span class="code"> || </span><span class="default">calculeOffsetTop</span><span class="brackets">(</span><span class="default">move_current_element</span><span class="brackets">)</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">return</span><span class="code"> </span><span class="keyword">false</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">end_move_element</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">move_current_element</span><span class="code">.</span><span class="default">frame</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">onmousemove</span><span class="code">=</span><span class="string">"</span><span class="string">"</span><span class="code">;</span><span class="default">move_current_element</span><span class="code">.</span><span class="default">frame</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">onmouseup</span><span class="code">=</span><span class="string">"</span><span class="string">"</span><span class="code">;</span><span class="default">move_current_element</span><span class="code">=</span><span class="keyword">null</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">move_element</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">move_current_element</span><span class="code">.</span><span class="default">frame</span><span class="code"> &amp;&amp; </span><span class="default">move_current_element</span><span class="code">.</span><span class="default">frame</span><span class="code">.</span><span class="default">event</span><span class="brackets">)</span><span class="code"> </span><span class="default">e</span><span class="code">=</span><span class="default">move_current_element</span><span class="code">.</span><span class="default">frame</span><span class="code">.</span><span class="default">event</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">mouse_x</span><span class="code">=</span><span class="default">getMouseX</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">mouse_y</span><span class="code">=</span><span class="default">getMouseY</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">new_top</span><span class="code">=</span><span class="default">mouse_y</span><span class="code"> - </span><span class="default">move_current_element</span><span class="code">.</span><span class="default">start_pos_y</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">new_left</span><span class="code">=</span><span class="default">mouse_x</span><span class="code"> - </span><span class="default">move_current_element</span><span class="code">.</span><span class="default">start_pos_x</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">max_left</span><span class="code">=</span><span class="default">move_current_element</span><span class="code">.</span><span class="default">frame</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">body</span><span class="code">.</span><span class="default">offsetWidth</span><span class="code">- </span><span class="default">move_current_element</span><span class="code">.</span><span class="default">offsetWidth</span><span class="code">;</span><span class="default">max_top</span><span class="code">=</span><span class="default">move_current_element</span><span class="code">.</span><span class="default">frame</span><span class="code">.</span><span class="keyword">document</span><span class="code">.</span><span class="default">body</span><span class="code">.</span><span class="default">offsetHeight</span><span class="code">- </span><span class="default">move_current_element</span><span class="code">.</span><span class="default">offsetHeight</span><span class="code">;</span><span class="default">new_top</span><span class="code">=</span><span class="keyword">Math</span><span class="code">.</span><span class="default">min</span><span class="brackets">(</span><span class="keyword">Math</span><span class="code">.</span><span class="default">max</span><span class="brackets">(</span><span class="number">0</span><span class="code">, </span><span class="default">new_top</span><span class="brackets">)</span><span class="code">, </span><span class="default">max_top</span><span class="brackets">)</span><span class="code">;</span><span class="default">new_left</span><span class="code">=</span><span class="keyword">Math</span><span class="code">.</span><span class="default">min</span><span class="brackets">(</span><span class="keyword">Math</span><span class="code">.</span><span class="default">max</span><span class="brackets">(</span><span class="number">0</span><span class="code">, </span><span class="default">new_left</span><span class="brackets">)</span><span class="code">, </span><span class="default">max_left</span><span class="brackets">)</span><span class="code">;</span><span class="default">move_current_element</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">top</span><span class="code">=</span><span class="default">new_top</span><span class="code">+</span><span class="string">"</span><span class="string">px</span><span class="string">"</span><span class="code">;</span><span class="default">move_current_element</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">left</span><span class="code">=</span><span class="default">new_left</span><span class="code">+</span><span class="string">"</span><span class="string">px</span><span class="string">"</span><span class="code">;</span><span class="keyword">return</span><span class="code"> </span><span class="keyword">false</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">nav</span><span class="code">=</span><span class="default">eAL</span><span class="code">.</span><span class="default">nav</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">getSelectionRange</span><span class="brackets">(</span><span class="default">textarea</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="brackets">{</span><span class="string">"</span><span class="string">start</span><span class="string">"</span><span class="code">: </span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionStart</span><span class="code">, </span><span class="string">"</span><span class="string">end</span><span class="string">"</span><span class="code">: </span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionEnd</span><span class="brackets">}</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">setSelectionRange</span><span class="brackets">(</span><span class="default">textarea</span><span class="code">, </span><span class="default">start</span><span class="code">, </span><span class="default">end</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">textarea</span><span class="code">.</span><span class="default">focus</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="default">start</span><span class="code">=</span><span class="keyword">Math</span><span class="code">.</span><span class="default">max</span><span class="brackets">(</span><span class="number">0</span><span class="code">, </span><span class="keyword">Math</span><span class="code">.</span><span class="default">min</span><span class="brackets">(</span><span class="default">textarea</span><span class="code">.</span><span class="default">value</span><span class="code">.</span><span class="default">length</span><span class="code">, </span><span class="default">start</span><span class="brackets">)</span><span class="brackets">)</span><span class="code">;</span><span class="default">end</span><span class="code">=</span><span class="keyword">Math</span><span class="code">.</span><span class="default">max</span><span class="brackets">(</span><span class="default">start</span><span class="code">, </span><span class="keyword">Math</span><span class="code">.</span><span class="default">min</span><span class="brackets">(</span><span class="default">textarea</span><span class="code">.</span><span class="default">value</span><span class="code">.</span><span class="default">length</span><span class="code">, </span><span class="default">end</span><span class="brackets">)</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isOpera</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionEnd</span><span class="code">=</span><span class="number">1</span><span class="code">;</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionStart</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionEnd</span><span class="code">=</span><span class="number">1</span><span class="code">;</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionStart</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="brackets">}</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionStart</span><span class="code">=</span><span class="default">start</span><span class="code">;</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionEnd</span><span class="code">=</span><span class="default">end</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIE</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="code"> </span><span class="default">set_IE_selection</span><span class="brackets">(</span><span class="default">textarea</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">get_IE_selection</span><span class="brackets">(</span><span class="default">textarea</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">textarea</span><span class="code"> &amp;&amp; </span><span class="default">textarea</span><span class="code">.</span><span class="default">focused</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="default">textarea</span><span class="code">.</span><span class="default">ea_line_height</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">div</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">createElement</span><span class="brackets">(</span><span class="string">"</span><span class="string">div</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">div</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">fontFamily</span><span class="code">=</span><span class="default">get_css_property</span><span class="brackets">(</span><span class="default">textarea</span><span class="code">, </span><span class="string">"</span><span class="string">font-family</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">div</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">fontSize</span><span class="code">=</span><span class="default">get_css_property</span><span class="brackets">(</span><span class="default">textarea</span><span class="code">, </span><span class="string">"</span><span class="string">font-size</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">div</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">visibility</span><span class="code">=</span><span class="string">"</span><span class="string">hidden</span><span class="string">"</span><span class="code">;</span><span class="default">div</span><span class="code">.</span><span class="default">innerHTML</span><span class="code">=</span><span class="string">"</span><span class="string">0</span><span class="string">"</span><span class="code">;</span><span class="keyword">document</span><span class="code">.</span><span class="default">body</span><span class="code">.</span><span class="default">appendChild</span><span class="brackets">(</span><span class="default">div</span><span class="brackets">)</span><span class="code">;</span><span class="default">textarea</span><span class="code">.</span><span class="default">ea_line_height</span><span class="code">=</span><span class="default">div</span><span class="code">.</span><span class="default">offsetHeight</span><span class="code">;</span><span class="keyword">document</span><span class="code">.</span><span class="default">body</span><span class="code">.</span><span class="default">removeChild</span><span class="brackets">(</span><span class="default">div</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">var</span><span class="code"> </span><span class="default">range</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">selection</span><span class="code">.</span><span class="default">createRange</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">stored_range</span><span class="code">=</span><span class="default">range</span><span class="code">.</span><span class="default">duplicate</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="default">stored_range</span><span class="code">.</span><span class="default">moveToElementText</span><span class="brackets">(</span><span class="code"> </span><span class="default">textarea</span><span class="code"> </span><span class="brackets">)</span><span class="code">;</span><span class="default">stored_range</span><span class="code">.</span><span class="default">setEndPoint</span><span class="brackets">(</span><span class="code"> </span><span class="string">'</span><span class="string">EndToEnd</span><span class="string">'</span><span class="code">, </span><span class="default">range</span><span class="code"> </span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">stored_range</span><span class="code">.</span><span class="default">parentElement</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">==</span><span class="default">textarea</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">elem</span><span class="code">=</span><span class="default">textarea</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">scrollTop</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="keyword">while</span><span class="brackets">(</span><span class="default">elem</span><span class="code">.</span><span class="default">parentNode</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">scrollTop</span><span class="code">+=</span><span class="default">elem</span><span class="code">.</span><span class="default">scrollTop</span><span class="code">;</span><span class="default">elem</span><span class="code">=</span><span class="default">elem</span><span class="code">.</span><span class="default">parentNode</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">var</span><span class="code"> </span><span class="default">relative_top</span><span class="code">=</span><span class="default">range</span><span class="code">.</span><span class="default">offsetTop</span><span class="code"> - </span><span class="default">calculeOffsetTop</span><span class="brackets">(</span><span class="default">textarea</span><span class="brackets">)</span><span class="code">+ </span><span class="default">scrollTop</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">line_start</span><span class="code">=</span><span class="keyword">Math</span><span class="code">.</span><span class="default">round</span><span class="brackets">(</span><span class="brackets">(</span><span class="default">relative_top</span><span class="code"> / </span><span class="default">textarea</span><span class="code">.</span><span class="default">ea_line_height</span><span class="brackets">)</span><span class="code"> +</span><span class="number">1</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">line_nb</span><span class="code">=</span><span class="keyword">Math</span><span class="code">.</span><span class="default">round</span><span class="brackets">(</span><span class="default">range</span><span class="code">.</span><span class="default">boundingHeight</span><span class="code"> / </span><span class="default">textarea</span><span class="code">.</span><span class="default">ea_line_height</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">range_start</span><span class="code">=</span><span class="default">stored_range</span><span class="code">.</span><span class="default">text</span><span class="code">.</span><span class="default">length</span><span class="code"> - </span><span class="default">range</span><span class="code">.</span><span class="default">text</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">tab</span><span class="code">=</span><span class="default">textarea</span><span class="code">.</span><span class="default">value</span><span class="code">.</span><span class="default">substr</span><span class="brackets">(</span><span class="number">0</span><span class="code">, </span><span class="default">range_start</span><span class="brackets">)</span><span class="code">.</span><span class="default">split</span><span class="brackets">(</span><span class="string">"</span><span class="special">\n</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">range_start</span><span class="code">+=</span><span class="brackets">(</span><span class="default">line_start</span><span class="code"> - </span><span class="default">tab</span><span class="code">.</span><span class="default">length</span><span class="brackets">)</span><span class="code">*</span><span class="number">2</span><span class="code">;</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionStart</span><span class="code">=</span><span class="default">range_start</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">range_end</span><span class="code">=</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionStart</span><span class="code"> + </span><span class="default">range</span><span class="code">.</span><span class="default">text</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="default">tab</span><span class="code">=</span><span class="default">textarea</span><span class="code">.</span><span class="default">value</span><span class="code">.</span><span class="default">substr</span><span class="brackets">(</span><span class="number">0</span><span class="code">, </span><span class="default">range_start</span><span class="code"> + </span><span class="default">range</span><span class="code">.</span><span class="default">text</span><span class="code">.</span><span class="default">length</span><span class="brackets">)</span><span class="code">.</span><span class="default">split</span><span class="brackets">(</span><span class="string">"</span><span class="special">\n</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">range_end</span><span class="code">+=</span><span class="brackets">(</span><span class="default">line_start</span><span class="code"> + </span><span class="default">line_nb</span><span class="code"> - </span><span class="number">1</span><span class="code"> - </span><span class="default">tab</span><span class="code">.</span><span class="default">length</span><span class="brackets">)</span><span class="code">*</span><span class="number">2</span><span class="code">;</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionEnd</span><span class="code">=</span><span class="default">range_end</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="default">setTimeout</span><span class="brackets">(</span><span class="string">"</span><span class="string">get_IE_selection(document.getElementById('</span><span class="string">"</span><span class="code">+ </span><span class="default">textarea</span><span class="code">.</span><span class="default">id</span><span class="code"> +</span><span class="string">"</span><span class="string">'));</span><span class="string">"</span><span class="code">, </span><span class="number">50</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="keyword">function</span><span class="code"> </span><span class="default">IE_textarea_focus</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">event</span><span class="code">.</span><span class="default">srcElement</span><span class="code">.</span><span class="default">focused</span><span class="code">=</span><span class="keyword">true</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">function</span><span class="code"> </span><span class="default">IE_textarea_blur</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">event</span><span class="code">.</span><span class="default">srcElement</span><span class="code">.</span><span class="default">focused</span><span class="code">=</span><span class="keyword">false</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">function</span><span class="code"> </span><span class="default">set_IE_selection</span><span class="brackets">(</span><span class="default">textarea</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">nbLineStart</span><span class="code">=</span><span class="default">textarea</span><span class="code">.</span><span class="default">value</span><span class="code">.</span><span class="default">substr</span><span class="brackets">(</span><span class="number">0</span><span class="code">, </span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionStart</span><span class="brackets">)</span><span class="code">.</span><span class="default">split</span><span class="brackets">(</span><span class="string">"</span><span class="special">\n</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">length</span><span class="code"> - </span><span class="number">1</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">nbLineEnd</span><span class="code">=</span><span class="default">textarea</span><span class="code">.</span><span class="default">value</span><span class="code">.</span><span class="default">substr</span><span class="brackets">(</span><span class="number">0</span><span class="code">, </span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionEnd</span><span class="brackets">)</span><span class="code">.</span><span class="default">split</span><span class="brackets">(</span><span class="string">"</span><span class="special">\n</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">length</span><span class="code"> - </span><span class="number">1</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">range</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">selection</span><span class="code">.</span><span class="default">createRange</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="default">range</span><span class="code">.</span><span class="default">moveToElementText</span><span class="brackets">(</span><span class="code"> </span><span class="default">textarea</span><span class="code"> </span><span class="brackets">)</span><span class="code">;</span><span class="default">range</span><span class="code">.</span><span class="default">setEndPoint</span><span class="brackets">(</span><span class="code"> </span><span class="string">'</span><span class="string">EndToStart</span><span class="string">'</span><span class="code">, </span><span class="default">range</span><span class="code"> </span><span class="brackets">)</span><span class="code">;</span><span class="default">range</span><span class="code">.</span><span class="default">moveStart</span><span class="brackets">(</span><span class="string">'</span><span class="string">character</span><span class="string">'</span><span class="code">, </span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionStart</span><span class="code"> - </span><span class="default">nbLineStart</span><span class="brackets">)</span><span class="code">;</span><span class="default">range</span><span class="code">.</span><span class="default">moveEnd</span><span class="brackets">(</span><span class="string">'</span><span class="string">character</span><span class="string">'</span><span class="code">, </span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionEnd</span><span class="code"> - </span><span class="default">nbLineEnd</span><span class="code"> - </span><span class="brackets">(</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionStart</span><span class="code"> - </span><span class="default">nbLineStart</span><span class="brackets">)</span><span class="code">  </span><span class="brackets">)</span><span class="code">;</span><span class="default">range</span><span class="code">.</span><span class="default">select</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">eAL</span><span class="code">.</span><span class="default">waiting_loading</span><span class="brackets">[</span><span class="string">"</span><span class="string">elements_functions.js</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="string">"</span><span class="string">loaded</span><span class="string">"</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">start_resize_area</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">document</span><span class="code">.</span><span class="default">onmouseup</span><span class="code">=</span><span class="default">eAL</span><span class="code">.</span><span class="default">end_resize_area</span><span class="code">;</span><span class="keyword">document</span><span class="code">.</span><span class="default">onmousemove</span><span class="code">=</span><span class="default">eAL</span><span class="code">.</span><span class="default">resize_area</span><span class="code">;</span><span class="default">eAL</span><span class="code">.</span><span class="default">toggle</span><span class="brackets">(</span><span class="default">eAL</span><span class="code">.</span><span class="default">resize</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">textarea</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">eAL</span><span class="code">.</span><span class="default">resize</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">div</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">edit_area_resize</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="default">div</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">div</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">createElement</span><span class="brackets">(</span><span class="string">"</span><span class="string">div</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="default">div</span><span class="code">.</span><span class="default">id</span><span class="code">=</span><span class="string">"</span><span class="string">edit_area_resize</span><span class="string">"</span><span class="code">;</span><span class="default">div</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">border</span><span class="code">=</span><span class="string">"</span><span class="string">dashed #888888 1px</span><span class="string">"</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">var</span><span class="code"> </span><span class="default">width</span><span class="code">=</span><span class="default">textarea</span><span class="code">.</span><span class="default">offsetWidth</span><span class="code"> -</span><span class="number">2</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">height</span><span class="code">=</span><span class="default">textarea</span><span class="code">.</span><span class="default">offsetHeight</span><span class="code"> -</span><span class="number">2</span><span class="code">;</span><span class="default">div</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">display</span><span class="code">=</span><span class="string">"</span><span class="string">block</span><span class="string">"</span><span class="code">;</span><span class="default">div</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">width</span><span class="code">=</span><span class="default">width</span><span class="code">+</span><span class="string">"</span><span class="string">px</span><span class="string">"</span><span class="code">;</span><span class="default">div</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">height</span><span class="code">=</span><span class="default">height</span><span class="code">+</span><span class="string">"</span><span class="string">px</span><span class="string">"</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">father</span><span class="code">=</span><span class="default">textarea</span><span class="code">.</span><span class="default">parentNode</span><span class="code">;</span><span class="default">father</span><span class="code">.</span><span class="default">insertBefore</span><span class="brackets">(</span><span class="default">div</span><span class="code">, </span><span class="default">textarea</span><span class="brackets">)</span><span class="code">;</span><span class="default">textarea</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">display</span><span class="code">=</span><span class="string">"</span><span class="string">none</span><span class="string">"</span><span class="code">;</span><span class="default">eAL</span><span class="code">.</span><span class="default">resize</span><span class="brackets">[</span><span class="string">"</span><span class="string">start_top</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="default">calculeOffsetTop</span><span class="brackets">(</span><span class="default">div</span><span class="brackets">)</span><span class="code">;</span><span class="default">eAL</span><span class="code">.</span><span class="default">resize</span><span class="brackets">[</span><span class="string">"</span><span class="string">start_left</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="default">calculeOffsetLeft</span><span class="brackets">(</span><span class="default">div</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">end_resize_area</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">document</span><span class="code">.</span><span class="default">onmouseup</span><span class="code">=</span><span class="string">"</span><span class="string">"</span><span class="code">;</span><span class="keyword">document</span><span class="code">.</span><span class="default">onmousemove</span><span class="code">=</span><span class="string">"</span><span class="string">"</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">div</span><span class="code">=</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">edit_area_resize</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">textarea</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">eAL</span><span class="code">.</span><span class="default">resize</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">textarea</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">width</span><span class="code">=</span><span class="keyword">Math</span><span class="code">.</span><span class="default">max</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">eAL</span><span class="code">.</span><span class="default">resize</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">min_width</span><span class="string">"</span><span class="brackets">]</span><span class="code">, </span><span class="default">div</span><span class="code">.</span><span class="default">offsetWidth</span><span class="code">-</span><span class="number">4</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">height</span><span class="code">=</span><span class="keyword">Math</span><span class="code">.</span><span class="default">max</span><span class="brackets">(</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">eAL</span><span class="code">.</span><span class="default">resize</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">min_height</span><span class="string">"</span><span class="brackets">]</span><span class="code">, </span><span class="default">div</span><span class="code">.</span><span class="default">offsetHeight</span><span class="code">-</span><span class="number">4</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">eAL</span><span class="code">.</span><span class="default">nav</span><span class="brackets">[</span><span class="string">'</span><span class="string">isIE</span><span class="string">'</span><span class="brackets">]</span><span class="code">==</span><span class="number">6</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">width</span><span class="code">-=</span><span class="number">2</span><span class="code">;</span><span class="default">height</span><span class="code">-=</span><span class="number">2</span><span class="code">;</span><span class="brackets">}</span><span class="default">textarea</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">width</span><span class="code">=</span><span class="default">width</span><span class="code">+</span><span class="string">"</span><span class="string">px</span><span class="string">"</span><span class="code">;</span><span class="default">textarea</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">height</span><span class="code">=</span><span class="default">height</span><span class="code">+</span><span class="string">"</span><span class="string">px</span><span class="string">"</span><span class="code">;</span><span class="default">div</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">display</span><span class="code">=</span><span class="string">"</span><span class="string">none</span><span class="string">"</span><span class="code">;</span><span class="default">textarea</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">display</span><span class="code">=</span><span class="string">"</span><span class="string">inline</span><span class="string">"</span><span class="code">;</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionStart</span><span class="code">=</span><span class="default">eAL</span><span class="code">.</span><span class="default">resize</span><span class="brackets">[</span><span class="string">"</span><span class="string">selectionStart</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="default">textarea</span><span class="code">.</span><span class="default">selectionEnd</span><span class="code">=</span><span class="default">eAL</span><span class="code">.</span><span class="default">resize</span><span class="brackets">[</span><span class="string">"</span><span class="string">selectionEnd</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="default">eAL</span><span class="code">.</span><span class="default">toggle</span><span class="brackets">(</span><span class="default">eAL</span><span class="code">.</span><span class="default">resize</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">return</span><span class="code"> </span><span class="keyword">false</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">resize_area</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">allow</span><span class="code">=</span><span class="default">eAs</span><span class="brackets">[</span><span class="default">eAL</span><span class="code">.</span><span class="default">resize</span><span class="brackets">[</span><span class="string">"</span><span class="string">id</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">settings</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">allow_resize</span><span class="string">"</span><span class="brackets">]</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">allow</span><span class="code">==</span><span class="string">"</span><span class="string">both</span><span class="string">"</span><span class="code"> || </span><span class="default">allow</span><span class="code">==</span><span class="string">"</span><span class="string">y</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">new_y</span><span class="code">=</span><span class="default">getMouseY</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">new_height</span><span class="code">=</span><span class="keyword">Math</span><span class="code">.</span><span class="default">max</span><span class="brackets">(</span><span class="number">20</span><span class="code">, </span><span class="default">new_y</span><span class="code">- </span><span class="default">eAL</span><span class="code">.</span><span class="default">resize</span><span class="brackets">[</span><span class="string">"</span><span class="string">start_top</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">edit_area_resize</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">height</span><span class="code">=</span><span class="default">new_height</span><span class="code">+</span><span class="string">"</span><span class="string">px</span><span class="string">"</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">allow</span><span class="code">==</span><span class="string">"</span><span class="string">both</span><span class="string">"</span><span class="code"> || </span><span class="default">allow</span><span class="code">==</span><span class="string">"</span><span class="string">x</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">new_x</span><span class="code">=</span><span class="default">getMouseX</span><span class="brackets">(</span><span class="default">e</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">new_width</span><span class="code">=</span><span class="keyword">Math</span><span class="code">.</span><span class="default">max</span><span class="brackets">(</span><span class="number">20</span><span class="code">, </span><span class="default">new_x</span><span class="code">- </span><span class="default">eAL</span><span class="code">.</span><span class="default">resize</span><span class="brackets">[</span><span class="string">"</span><span class="string">start_left</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">document</span><span class="code">.</span><span class="default">getElementById</span><span class="brackets">(</span><span class="string">"</span><span class="string">edit_area_resize</span><span class="string">"</span><span class="brackets">)</span><span class="code">.</span><span class="default">style</span><span class="code">.</span><span class="default">width</span><span class="code">=</span><span class="default">new_width</span><span class="code">+</span><span class="string">"</span><span class="string">px</span><span class="string">"</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">return</span><span class="code"> </span><span class="keyword">false</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">eAL</span><span class="code">.</span><span class="default">waiting_loading</span><span class="brackets">[</span><span class="string">"</span><span class="string">resize_area.js</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="string">"</span><span class="string">loaded</span><span class="string">"</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">get_regexp</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">text_array</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">res</span><span class="code">=</span><span class="string">"</span><span class="string">(</span><span class="special">\\</span><span class="string">b)(</span><span class="string">"</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="default">i</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="default">i</span><span class="code">&lt;</span><span class="default">text_array</span><span class="code">.</span><span class="default">length</span><span class="code">;</span><span class="default">i</span><span class="code">++</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">i</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="code"> </span><span class="default">res</span><span class="code">+=</span><span class="string">"</span><span class="string">|</span><span class="string">"</span><span class="code">;</span><span class="default">res</span><span class="code">+=</span><span class="keyword">this</span><span class="code">.</span><span class="default">get_escaped_regexp</span><span class="brackets">(</span><span class="default">text_array</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="default">res</span><span class="code">+=</span><span class="string">"</span><span class="string">)(</span><span class="special">\\</span><span class="string">b)</span><span class="string">"</span><span class="code">;</span><span class="default">reg</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">RegExp</span><span class="brackets">(</span><span class="default">res</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">return</span><span class="code"> </span><span class="default">res</span><span class="code">;</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">get_escaped_regexp</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="default">str</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">return</span><span class="code"> </span><span class="default">str</span><span class="code">.</span><span class="default">replace</span><span class="brackets">(</span><span class="code">/</span><span class="brackets">(</span><span class="code">\.|\?|\*|\+|\\|\</span><span class="brackets">(</span><span class="code">|\</span><span class="brackets">)</span><span class="code">|\</span><span class="brackets">[</span><span class="code">|\</span><span class="brackets">]</span><span class="code">|\}|\</span><span class="brackets">{</span><span class="code">|\$|\^|\|)/</span><span class="default">g</span><span class="code">, </span><span class="string">"</span><span class="special">\\</span><span class="string">$1</span><span class="string">"</span><span class="code">);</span><span class="brackets">}</span><span class="code">;</span><span class="default">EAL</span><span class="code">.</span><span class="default">prototype</span><span class="code">.</span><span class="default">init_syntax_regexp</span><span class="code">=</span><span class="keyword">function</span><span class="brackets">(</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">lang_style</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">lang</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">keywords_reg_exp</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">keywords_reg_exp_nb</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">KEYWORDS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">param</span><span class="code">=</span><span class="string">"</span><span class="string">g</span><span class="string">"</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">KEYWORD_CASE_SENSITIVE</span><span class="string">'</span><span class="brackets">]</span><span class="code">===</span><span class="keyword">false</span><span class="brackets">)</span><span class="code"> </span><span class="default">param</span><span class="code">+=</span><span class="string">"</span><span class="string">i</span><span class="string">"</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">KEYWORDS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">typeof</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">KEYWORDS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">==</span><span class="string">"</span><span class="string">function</span><span class="string">"</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">continue</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">keywords_reg_exp</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">RegExp</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">get_regexp</span><span class="brackets">(</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">KEYWORDS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code"> </span><span class="brackets">)</span><span class="code">, </span><span class="default">param</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">keywords_reg_exp_nb</span><span class="code">++;</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">OPERATORS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">str</span><span class="code">=</span><span class="string">"</span><span class="string">"</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">nb</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">OPERATORS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">typeof</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">OPERATORS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">==</span><span class="string">"</span><span class="string">function</span><span class="string">"</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">continue</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">nb</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="code"> </span><span class="default">str</span><span class="code">+=</span><span class="string">"</span><span class="string">|</span><span class="string">"</span><span class="code">;</span><span class="default">str</span><span class="code">+=</span><span class="keyword">this</span><span class="code">.</span><span class="default">get_escaped_regexp</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">OPERATORS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="default">nb</span><span class="code">++;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">str</span><span class="code">.</span><span class="default">length</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">operators_reg_exp</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">RegExp</span><span class="brackets">(</span><span class="string">"</span><span class="string">(</span><span class="string">"</span><span class="code">+</span><span class="default">str</span><span class="code">+</span><span class="string">"</span><span class="string">)</span><span class="string">"</span><span class="code">,</span><span class="string">"</span><span class="string">g</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">DELIMITERS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">var</span><span class="code"> </span><span class="default">str</span><span class="code">=</span><span class="string">"</span><span class="string">"</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">nb</span><span class="code">=</span><span class="number">0</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">DELIMITERS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">typeof</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">DELIMITERS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">==</span><span class="string">"</span><span class="string">function</span><span class="string">"</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">continue</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">nb</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="code"> </span><span class="default">str</span><span class="code">+=</span><span class="string">"</span><span class="string">|</span><span class="string">"</span><span class="code">;</span><span class="default">str</span><span class="code">+=</span><span class="keyword">this</span><span class="code">.</span><span class="default">get_escaped_regexp</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">DELIMITERS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="default">nb</span><span class="code">++;</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">str</span><span class="code">.</span><span class="default">length</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">delimiters_reg_exp</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">RegExp</span><span class="brackets">(</span><span class="string">"</span><span class="string">(</span><span class="string">"</span><span class="code">+</span><span class="default">str</span><span class="code">+</span><span class="string">"</span><span class="string">)</span><span class="string">"</span><span class="code">,</span><span class="string">"</span><span class="string">g</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="keyword">var</span><span class="code"> </span><span class="default">syntax_trace</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">Array</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">quotes</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">quote_tab</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">Array</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">QUOTEMARKS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">QUOTEMARKS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">typeof</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">QUOTEMARKS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">==</span><span class="string">"</span><span class="string">function</span><span class="string">"</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">continue</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">x</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">get_escaped_regexp</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">QUOTEMARKS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">quotes</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">x</span><span class="brackets">]</span><span class="code">=</span><span class="default">x</span><span class="code">;</span><span class="default">quote_tab</span><span class="brackets">[</span><span class="default">quote_tab</span><span class="code">.</span><span class="default">length</span><span class="brackets">]</span><span class="code">=</span><span class="string">"</span><span class="string">(</span><span class="string">"</span><span class="code">+</span><span class="default">x</span><span class="code">+</span><span class="string">"</span><span class="string">(?:[^</span><span class="string">"</span><span class="code">+</span><span class="default">x</span><span class="code">+</span><span class="string">"</span><span class="special">\\</span><span class="special">\\</span><span class="string">]*(</span><span class="special">\\</span><span class="special">\\</span><span class="special">\\</span><span class="special">\\</span><span class="string">)*(</span><span class="special">\\</span><span class="special">\\</span><span class="string">"</span><span class="code">+</span><span class="default">x</span><span class="code">+</span><span class="string">"</span><span class="string">?)?)*(</span><span class="string">"</span><span class="code">+</span><span class="default">x</span><span class="code">+</span><span class="string">"</span><span class="string">|$))</span><span class="string">"</span><span class="code">;</span><span class="default">syntax_trace</span><span class="code">.</span><span class="default">push</span><span class="brackets">(</span><span class="default">x</span><span class="brackets">)</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">comments</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">COMMENT_SINGLE</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">COMMENT_SINGLE</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">typeof</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">COMMENT_SINGLE</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">==</span><span class="string">"</span><span class="string">function</span><span class="string">"</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">continue</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">x</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">get_escaped_regexp</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">COMMENT_SINGLE</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="default">quote_tab</span><span class="brackets">[</span><span class="default">quote_tab</span><span class="code">.</span><span class="default">length</span><span class="brackets">]</span><span class="code">=</span><span class="string">"</span><span class="string">(</span><span class="string">"</span><span class="code">+</span><span class="default">x</span><span class="code">+</span><span class="string">"</span><span class="string">(.|</span><span class="special">\\</span><span class="string">r|</span><span class="special">\\</span><span class="string">t)*(</span><span class="special">\\</span><span class="string">n|$))</span><span class="string">"</span><span class="code">;</span><span class="default">syntax_trace</span><span class="code">.</span><span class="default">push</span><span class="brackets">(</span><span class="default">x</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">comments</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">x</span><span class="brackets">]</span><span class="code">=</span><span class="string">"</span><span class="special">\n</span><span class="string">"</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">COMMENT_MULTI</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">COMMENT_MULTI</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">typeof</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">COMMENT_MULTI</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">==</span><span class="string">"</span><span class="string">function</span><span class="string">"</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">continue</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">start</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">get_escaped_regexp</span><span class="brackets">(</span><span class="default">i</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">end</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">get_escaped_regexp</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">COMMENT_MULTI</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">;</span><span class="default">quote_tab</span><span class="brackets">[</span><span class="default">quote_tab</span><span class="code">.</span><span class="default">length</span><span class="brackets">]</span><span class="code">=</span><span class="string">"</span><span class="string">(</span><span class="string">"</span><span class="code">+</span><span class="default">start</span><span class="code">+</span><span class="string">"</span><span class="string">(.|</span><span class="special">\\</span><span class="string">n|</span><span class="special">\\</span><span class="string">r)*?(</span><span class="string">"</span><span class="code">+</span><span class="default">end</span><span class="code">+</span><span class="string">"</span><span class="string">|$))</span><span class="string">"</span><span class="code">;</span><span class="default">syntax_trace</span><span class="code">.</span><span class="default">push</span><span class="brackets">(</span><span class="default">start</span><span class="brackets">)</span><span class="code">;</span><span class="default">syntax_trace</span><span class="code">.</span><span class="default">push</span><span class="brackets">(</span><span class="default">end</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">comments</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">COMMENT_MULTI</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">quote_tab</span><span class="code">.</span><span class="default">length</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">comment_or_quote_reg_exp</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">RegExp</span><span class="brackets">(</span><span class="string">"</span><span class="string">(</span><span class="string">"</span><span class="code">+</span><span class="default">quote_tab</span><span class="code">.</span><span class="default">join</span><span class="brackets">(</span><span class="string">"</span><span class="string">|</span><span class="string">"</span><span class="brackets">)</span><span class="code">+</span><span class="string">"</span><span class="string">)</span><span class="string">"</span><span class="code">,</span><span class="string">"</span><span class="string">gi</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">syntax_trace</span><span class="code">.</span><span class="default">length</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">syntax_trace_regexp</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="keyword">RegExp</span><span class="brackets">(</span><span class="string">"</span><span class="string">((.|</span><span class="special">\n</span><span class="string">)*?)(</span><span class="special">\\</span><span class="special">\\</span><span class="string">*(</span><span class="string">"</span><span class="code">+ </span><span class="default">syntax_trace</span><span class="code">.</span><span class="default">join</span><span class="brackets">(</span><span class="string">"</span><span class="string">|</span><span class="string">"</span><span class="brackets">)</span><span class="code"> +</span><span class="string">"</span><span class="string">|$))</span><span class="string">"</span><span class="code">, </span><span class="string">"</span><span class="string">gmi</span><span class="string">"</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">SCRIPT_DELIMITERS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">script_delimiters</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">SCRIPT_DELIMITERS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">typeof</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">SCRIPT_DELIMITERS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">==</span><span class="string">"</span><span class="string">function</span><span class="string">"</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">continue</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">script_delimiters</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">SCRIPT_DELIMITERS</span><span class="string">'</span><span class="brackets">]</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">custom_regexp</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">REGEXPS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">REGEXPS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">typeof</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">REGEXPS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">==</span><span class="string">"</span><span class="string">function</span><span class="string">"</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">continue</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">val</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">REGEXPS</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="code">!</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">custom_regexp</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">val</span><span class="brackets">[</span><span class="string">'</span><span class="string">execute</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">]</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">custom_regexp</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">val</span><span class="brackets">[</span><span class="string">'</span><span class="string">execute</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">custom_regexp</span><span class="string">"</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">val</span><span class="brackets">[</span><span class="string">'</span><span class="string">execute</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">=</span><span class="brackets">{</span><span class="string">'</span><span class="string">regexp</span><span class="string">'</span><span class="code"> : </span><span class="keyword">new</span><span class="code"> </span><span class="keyword">RegExp</span><span class="brackets">(</span><span class="default">val</span><span class="brackets">[</span><span class="string">'</span><span class="string">search</span><span class="string">'</span><span class="brackets">]</span><span class="code">, </span><span class="default">val</span><span class="brackets">[</span><span class="string">'</span><span class="string">modifiers</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="code"> , </span><span class="string">'</span><span class="string">class</span><span class="string">'</span><span class="code"> : </span><span class="default">val</span><span class="brackets">[</span><span class="string">'</span><span class="string">class</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">}</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">STYLES</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">lang_style</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">new</span><span class="code"> </span><span class="default">Object</span><span class="brackets">(</span><span class="brackets">)</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">STYLES</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">typeof</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">STYLES</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code">==</span><span class="string">"</span><span class="string">function</span><span class="string">"</span><span class="brackets">)</span><span class="code"> </span><span class="keyword">continue</span><span class="code">;</span><span class="keyword">if</span><span class="brackets">(</span><span class="keyword">typeof</span><span class="brackets">(</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">STYLES</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="code"> !=</span><span class="string">"</span><span class="string">string</span><span class="string">"</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">j</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">STYLES</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">lang_style</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">j</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">STYLES</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">j</span><span class="brackets">]</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="code"></span><a name="line_31"></a></li>
<li id="line_32" class="even"><span class="lineNumber">32&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">else</span><span class="brackets">{</span><span class="default">lang_style</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">=</span><span class="keyword">this</span><span class="code">.</span><span class="default">load_syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">'</span><span class="string">STYLES</span><span class="string">'</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">var</span><span class="code"> </span><span class="default">style</span><span class="code">=</span><span class="string">"</span><span class="string">"</span><span class="code">;</span><span class="keyword">for</span><span class="brackets">(</span><span class="keyword">var</span><span class="code"> </span><span class="default">i</span><span class="code"> </span><span class="keyword">in</span><span class="code"> </span><span class="default">lang_style</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">)</span><span class="brackets">{</span><span class="keyword">if</span><span class="brackets">(</span><span class="default">lang_style</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">.</span><span class="default">length</span><span class="code">&gt;</span><span class="number">0</span><span class="brackets">)</span><span class="brackets">{</span><span class="default">style</span><span class="code">+=</span><span class="string">"</span><span class="string">.</span><span class="string">"</span><span class="code">+ </span><span class="default">lang</span><span class="code"> +</span><span class="string">"</span><span class="string"> .</span><span class="string">"</span><span class="code">+ </span><span class="default">i</span><span class="code">.</span><span class="default">toLowerCase</span><span class="brackets">(</span><span class="brackets">)</span><span class="code"> +</span><span class="string">"</span><span class="string"> span{</span><span class="string">"</span><span class="code">+</span><span class="default">lang_style</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">+</span><span class="string">"</span><span class="string">}</span><span class="special">\n</span><span class="string">"</span><span class="code">;</span><span class="default">style</span><span class="code">+=</span><span class="string">"</span><span class="string">.</span><span class="string">"</span><span class="code">+ </span><span class="default">lang</span><span class="code"> +</span><span class="string">"</span><span class="string"> .</span><span class="string">"</span><span class="code">+ </span><span class="default">i</span><span class="code">.</span><span class="default">toLowerCase</span><span class="brackets">(</span><span class="brackets">)</span><span class="code"> +</span><span class="string">"</span><span class="string">{</span><span class="string">"</span><span class="code">+</span><span class="default">lang_style</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="default">i</span><span class="brackets">]</span><span class="code">+</span><span class="string">"</span><span class="string">}</span><span class="special">\n</span><span class="string">"</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="keyword">this</span><span class="code">.</span><span class="default">syntax</span><span class="brackets">[</span><span class="default">lang</span><span class="brackets">]</span><span class="brackets">[</span><span class="string">"</span><span class="string">styles</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="default">style</span><span class="code">;</span><span class="brackets">}</span><span class="brackets">}</span><span class="brackets">}</span><span class="code">;</span><span class="default">eAL</span><span class="code">.</span><span class="default">waiting_loading</span><span class="brackets">[</span><span class="string">"</span><span class="string">reg_syntax.js</span><span class="string">"</span><span class="brackets">]</span><span class="code">=</span><span class="string">"</span><span class="string">loaded</span><span class="string">"</span><span class="code">;</span><a name="line_32"></a></li>
<li id="line_33" class="odd"><span class="lineNumber">33&nbsp;</span><span class="code">&nbsp;</span><span class="keyword">var</span><span class="code"> </span><span class="default">editAreaLoader</span><span class="code">= </span><span class="default">eAL</span><span class="code">;</span><span class="keyword">var</span><span class="code"> </span><span class="default">editAreas</span><span class="code">=</span><span class="default">eAs</span><span class="code">;</span><span class="default">EditAreaLoader</span><span class="code">=</span><span class="default">EAL</span><span class="code">;</span><span class="default">editAreaLoader</span><span class="code">.</span><span class="default">iframe_script</span><span class="code">= </span><span class="string">"</span><span class="string">&lt;script language='Javascript' type='text/javascript'&gt; function EA(){this.error=false;this.inlinePopup=new Array({popup_id: </span><span class="special">\"</span><span class="string">area_search_replace</span><span class="special">\"</span><span class="string">, icon_id: </span><span class="special">\"</span><span class="string">search</span><span class="special">\"</span><span class="string">}, {popup_id: </span><span class="special">\"</span><span class="string">edit_area_help</span><span class="special">\"</span><span class="string">, icon_id: </span><span class="special">\"</span><span class="string">help</span><span class="special">\"</span><span class="string">});this.plugins=new Object();this.line_number=0;this.nav=parent.eAL.nav;this.last_selection=new Object();this.last_text_to_highlight=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;this.last_hightlighted_text=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;this.textareaFocused=false;this.previous=new Array();this.next=new Array();this.last_undo=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;this.assocBracket=new Object();this.revertAssocBracket=new Object();this.assocBracket[</span><span class="special">\"</span><span class="string">(</span><span class="special">\"</span><span class="string">]=</span><span class="special">\"</span><span class="string">)</span><span class="special">\"</span><span class="string">;this.assocBracket[</span><span class="special">\"</span><span class="string">{</span><span class="special">\"</span><span class="string">]=</span><span class="special">\"</span><span class="string">}</span><span class="special">\"</span><span class="string">;this.assocBracket[</span><span class="special">\"</span><span class="string">[</span><span class="special">\"</span><span class="string">]=</span><span class="special">\"</span><span class="string">]</span><span class="special">\"</span><span class="string">;for(var index in this.assocBracket){this.revertAssocBracket[this.assocBracket[index]]=index;}this.lineHeight=16;this.tab_nb_char=8;if(this.nav['isOpera']) this.tab_nb_char=6;this.is_tabbing=false;this.fullscreen={'isFull': false};this.isResizing=false;this.id=area_id;this.settings=eAs[this.id][</span><span class="special">\"</span><span class="string">settings</span><span class="special">\"</span><span class="string">];if((</span><span class="special">\"</span><span class="special">\"</span><span class="string">+this.settings['replace_tab_by_spaces']).match(/^[0-9]+$/)){this.tab_nb_char=this.settings['replace_tab_by_spaces'];this.tabulation=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;for(var i=0;i&lt;this.tab_nb_char;i++) this.tabulation+=</span><span class="special">\"</span><span class="string"> </span><span class="special">\"</span><span class="string">;}</span><span class="special">\n</span><span class="string">else this.tabulation=</span><span class="special">\"</span><span class="special">\t</span><span class="special">\"</span><span class="string">;};EA.prototype.update_size=function(){if(eAs[eA.id] &amp;&amp; eAs[eA.id][</span><span class="special">\"</span><span class="string">displayed</span><span class="special">\"</span><span class="string">]==true){if(eA.fullscreen['isFull']){parent.document.getElementById(</span><span class="special">\"</span><span class="string">frame_</span><span class="special">\"</span><span class="string">+eA.id).style.width=parent.document.getElementsByTagName(</span><span class="special">\"</span><span class="string">html</span><span class="special">\"</span><span class="string">)[0].clientWidth + </span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;parent.document.getElementById(</span><span class="special">\"</span><span class="string">frame_</span><span class="special">\"</span><span class="string">+eA.id).style.height=parent.document.getElementsByTagName(</span><span class="special">\"</span><span class="string">html</span><span class="special">\"</span><span class="string">)[0].clientHeight + </span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;}var height=document.body.offsetHeight - eA.get_all_toolbar_height() - 4;eA.result.style.height=height +</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;var width=document.body.offsetWidth -2;eA.result.style.width=width+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;for(var i=0;i&lt;eA.inlinePopup.length;i++){var popup=document.getElementById(eA.inlinePopup[i][</span><span class="special">\"</span><span class="string">popup_id</span><span class="special">\"</span><span class="string">]);var max_left=document.body.offsetWidth- popup.offsetWidth;var max_top=document.body.offsetHeight- popup.offsetHeight;if(popup.offsetTop&gt;max_top) popup.style.top=max_top+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;if(popup.offsetLeft&gt;max_left) popup.style.left=max_left+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;}}};EA.prototype.init=function(){this.textarea=document.getElementById(</span><span class="special">\"</span><span class="string">textarea</span><span class="special">\"</span><span class="string">);this.container=document.getElementById(</span><span class="special">\"</span><span class="string">container</span><span class="special">\"</span><span class="string">);this.result=document.getElementById(</span><span class="special">\"</span><span class="string">result</span><span class="special">\"</span><span class="string">);this.content_highlight=document.getElementById(</span><span class="special">\"</span><span class="string">content_highlight</span><span class="special">\"</span><span class="string">);this.selection_field=document.getElementById(</span><span class="special">\"</span><span class="string">selection_field</span><span class="special">\"</span><span class="string">);spans=parent.getChildren(document.getElementById(</span><span class="special">\"</span><span class="string">toolbar_1</span><span class="special">\"</span><span class="string">), </span><span class="special">\"</span><span class="string">span</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">all</span><span class="special">\"</span><span class="string">, -1);for(var i=0;i&lt;spans.length;i++){id=spans[i].id.replace(/tmp_tool_(.*)/, </span><span class="special">\"</span><span class="string">$1</span><span class="special">\"</span><span class="string">);if(id!=spans[i].id){for(var j in this.plugins){if(typeof(this.plugins[j].get_control_html)==</span><span class="special">\"</span><span class="string">function</span><span class="special">\"</span><span class="string"> ){html=this.plugins[j].get_control_html(id);if(html!=false){html=parent.eAL.translate(html, this.settings[</span><span class="special">\"</span><span class="string">language</span><span class="special">\"</span><span class="string">], </span><span class="special">\"</span><span class="string">template</span><span class="special">\"</span><span class="string">);var new_span=document.createElement(</span><span class="special">\"</span><span class="string">span</span><span class="special">\"</span><span class="string">);new_span.innerHTML=html;var father=spans[i].parentNode;spans[i].parentNode.replaceChild(new_span, spans[i]);break;}}}}}this.textarea.value=eAs[this.id][</span><span class="special">\"</span><span class="string">textarea</span><span class="special">\"</span><span class="string">].value;if(this.settings[</span><span class="special">\"</span><span class="string">debug</span><span class="special">\"</span><span class="string">]) this.debug=parent.document.getElementById(</span><span class="special">\"</span><span class="string">edit_area_debug_</span><span class="special">\"</span><span class="string">+this.id);if(document.getElementById(</span><span class="special">\"</span><span class="string">redo</span><span class="special">\"</span><span class="string">) !=null) this.switchClassSticky(document.getElementById(</span><span class="special">\"</span><span class="string">redo</span><span class="special">\"</span><span class="string">), 'editAreaButtonDisabled', true);if(typeof(parent.eAL.syntax[this.settings[</span><span class="special">\"</span><span class="string">syntax</span><span class="special">\"</span><span class="string">]])!=</span><span class="special">\"</span><span class="string">undefined</span><span class="special">\"</span><span class="string">){for(var i in parent.eAL.syntax){this.add_style(parent.eAL.syntax[i][</span><span class="special">\"</span><span class="string">styles</span><span class="special">\"</span><span class="string">]);}}if(this.nav['isOpera']) document.getElementById(</span><span class="special">\"</span><span class="string">editor</span><span class="special">\"</span><span class="string">).onkeypress=keyDown;</span><span class="special">\n</span><span class="string">else document.getElementById(</span><span class="special">\"</span><span class="string">editor</span><span class="special">\"</span><span class="string">).onkeydown=keyDown;for(var i=0;i&lt;this.inlinePopup.length;i++){if(this.nav['isIE'] || this.nav['isFirefox']) document.getElementById(this.inlinePopup[i][</span><span class="special">\"</span><span class="string">popup_id</span><span class="special">\"</span><span class="string">]).onkeydown=keyDown;</span><span class="special">\n</span><span class="string">else document.getElementById(this.inlinePopup[i][</span><span class="special">\"</span><span class="string">popup_id</span><span class="special">\"</span><span class="string">]).onkeypress=keyDown;}if(this.settings[</span><span class="special">\"</span><span class="string">allow_resize</span><span class="special">\"</span><span class="string">]==</span><span class="special">\"</span><span class="string">both</span><span class="special">\"</span><span class="string"> || this.settings[</span><span class="special">\"</span><span class="string">allow_resize</span><span class="special">\"</span><span class="string">]==</span><span class="special">\"</span><span class="string">x</span><span class="special">\"</span><span class="string"> || this.settings[</span><span class="special">\"</span><span class="string">allow_resize</span><span class="special">\"</span><span class="string">]==</span><span class="special">\"</span><span class="string">y</span><span class="special">\"</span><span class="string">) this.allow_resize(true);parent.eAL.toggle(this.id, </span><span class="special">\"</span><span class="string">on</span><span class="special">\"</span><span class="string">);this.change_smooth_selection_mode(eA.smooth_selection);this.execCommand(</span><span class="special">\"</span><span class="string">change_highlight</span><span class="special">\"</span><span class="string">, this.settings[</span><span class="special">\"</span><span class="string">start_highlight</span><span class="special">\"</span><span class="string">]);this.set_font(eA.settings[</span><span class="special">\"</span><span class="string">font_family</span><span class="special">\"</span><span class="string">], eA.settings[</span><span class="special">\"</span><span class="string">font_size</span><span class="special">\"</span><span class="string">]);children=parent.getChildren(document.body, </span><span class="special">\"</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">selec</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">none</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">all</span><span class="special">\"</span><span class="string">, -1);for(var i=0;i&lt;children.length;i++){if(this.nav['isIE']) children[i].unselectable=true;</span><span class="special">\n</span><span class="string">else children[i].onmousedown=function(){return false};}if(this.nav['isGecko']){this.textarea.spellcheck=this.settings[</span><span class="special">\"</span><span class="string">gecko_spellcheck</span><span class="special">\"</span><span class="string">];}if(this.nav['isOpera']){document.getElementById(</span><span class="special">\"</span><span class="string">editor</span><span class="special">\"</span><span class="string">).style.position=</span><span class="special">\"</span><span class="string">absolute</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">selection_field</span><span class="special">\"</span><span class="string">).style.marginTop=</span><span class="special">\"</span><span class="string">-1pt</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">selection_field</span><span class="special">\"</span><span class="string">).style.paddingTop=</span><span class="special">\"</span><span class="string">1pt</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">cursor_pos</span><span class="special">\"</span><span class="string">).style.marginTop=</span><span class="special">\"</span><span class="string">-1pt</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">end_bracket</span><span class="special">\"</span><span class="string">).style.marginTop=</span><span class="special">\"</span><span class="string">-1pt</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">content_highlight</span><span class="special">\"</span><span class="string">).style.marginTop=</span><span class="special">\"</span><span class="string">-1pt</span><span class="special">\"</span><span class="string">;}parent.eAL.add_event(this.result, </span><span class="special">\"</span><span class="string">click</span><span class="special">\"</span><span class="string">, function(e){if((e.target || e.srcElement)==eA.result){eA.area_select(eA.textarea.value.length, 0);}});setTimeout(</span><span class="special">\"</span><span class="string">eA.manage_size();eA.execCommand('EA_load');</span><span class="special">\"</span><span class="string">, 10);this.check_undo();this.check_line_selection(true);this.scroll_to_view();for(var i in this.plugins){if(typeof(this.plugins[i].onload)==</span><span class="special">\"</span><span class="string">function</span><span class="special">\"</span><span class="string">) this.plugins[i].onload();}if(this.settings['fullscreen']==true) this.toggle_full_screen(true);parent.eAL.add_event(window, </span><span class="special">\"</span><span class="string">resize</span><span class="special">\"</span><span class="string">, eA.update_size);parent.eAL.add_event(parent.window, </span><span class="special">\"</span><span class="string">resize</span><span class="special">\"</span><span class="string">, eA.update_size);parent.eAL.add_event(top.window, </span><span class="special">\"</span><span class="string">resize</span><span class="special">\"</span><span class="string">, eA.update_size);parent.eAL.add_event(window, </span><span class="special">\"</span><span class="string">unload</span><span class="special">\"</span><span class="string">, function(){if(eAs[eA.id] &amp;&amp; eAs[eA.id][</span><span class="special">\"</span><span class="string">displayed</span><span class="special">\"</span><span class="string">]) eA.execCommand(</span><span class="special">\"</span><span class="string">EA_unload</span><span class="special">\"</span><span class="string">);});};EA.prototype.manage_size=function(){if(!eAs[this.id]) return false;if(eAs[this.id][</span><span class="special">\"</span><span class="string">displayed</span><span class="special">\"</span><span class="string">]==true){var resized=false;area_width=this.textarea.scrollWidth;area_height=this.textarea.scrollHeight;if(this.nav['isOpera']){area_height=this.last_selection['nb_line']*this.lineHeight;area_width=10000;}if(this.nav['isIE']==7) area_width-=45;if(this.nav['isGecko'] &amp;&amp; this.smooth_selection &amp;&amp; this.last_selection[</span><span class="special">\"</span><span class="string">nb_line</span><span class="special">\"</span><span class="string">]) area_height=this.last_selection[</span><span class="special">\"</span><span class="string">nb_line</span><span class="special">\"</span><span class="string">]*this.lineHeight;if(this.last_selection[</span><span class="special">\"</span><span class="string">nb_line</span><span class="special">\"</span><span class="string">] &gt;=this.line_number){var div_line_number=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;for(i=this.line_number+1;i&lt;this.last_selection[</span><span class="special">\"</span><span class="string">nb_line</span><span class="special">\"</span><span class="string">]+100;i++){div_line_number+=i+</span><span class="special">\"</span><span class="string">&lt;br /&gt;</span><span class="special">\"</span><span class="string">;this.line_number++;}var span=document.createElement(</span><span class="special">\"</span><span class="string">span</span><span class="special">\"</span><span class="string">);if(this.nav['isIE']) span.unselectable=true;span.innerHTML=div_line_number;document.getElementById(</span><span class="special">\"</span><span class="string">line_number</span><span class="special">\"</span><span class="string">).appendChild(span);}if(this.textarea.previous_scrollWidth!=area_width){if(this.nav['isOpera']){}</span><span class="special">\n</span><span class="string">else{if(this.textarea.style.width &amp;&amp; (this.textarea.style.width.replace(</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">,</span><span class="special">\"</span><span class="special">\"</span><span class="string">) &lt; area_width)){area_width+=50;}}if(this.nav['isGecko'] || this.nav['isOpera']) this.container.style.width=(area_width+45)+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;</span><span class="special">\n</span><span class="string">else this.container.style.width=area_width+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;this.textarea.style.width=area_width+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;this.content_highlight.style.width=area_width+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;this.textarea.previous_scrollWidth=area_width;resized=true;}if(this.textarea.previous_scrollHeight!=area_height){this.container.style.height=(area_height+2)+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;this.textarea.style.height=area_height+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;this.content_highlight.style.height=area_height+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;this.textarea.previous_scrollHeight=area_height;resized=true;}this.textarea.scrollTop=</span><span class="special">\"</span><span class="string">0px</span><span class="special">\"</span><span class="string">;this.textarea.scrollLeft=</span><span class="special">\"</span><span class="string">0px</span><span class="special">\"</span><span class="string">;if(resized==true){this.scroll_to_view();}}setTimeout(</span><span class="special">\"</span><span class="string">eA.manage_size();</span><span class="special">\"</span><span class="string">, 100);};EA.prototype.add_event=function(obj, name, handler){if (this.nav['isIE']){obj.attachEvent(</span><span class="special">\"</span><span class="string">on</span><span class="special">\"</span><span class="string"> + name, handler);}</span><span class="special">\n</span><span class="string">else{obj.addEventListener(name, handler, false);}};EA.prototype.execCommand=function(cmd, param){for(var i in this.plugins){if(typeof(this.plugins[i].execCommand)==</span><span class="special">\"</span><span class="string">function</span><span class="special">\"</span><span class="string">){if(!this.plugins[i].execCommand(cmd, param)) return;}}switch(cmd){case </span><span class="special">\"</span><span class="string">save</span><span class="special">\"</span><span class="string">: if(this.settings[</span><span class="special">\"</span><span class="string">save_callback</span><span class="special">\"</span><span class="string">].length&gt;0) eval(</span><span class="special">\"</span><span class="string">parent.</span><span class="special">\"</span><span class="string">+this.settings[</span><span class="special">\"</span><span class="string">save_callback</span><span class="special">\"</span><span class="string">]+</span><span class="special">\"</span><span class="string">('</span><span class="special">\"</span><span class="string">+ this.id +</span><span class="special">\"</span><span class="string">', eA.textarea.value);</span><span class="special">\"</span><span class="string">);break; case </span><span class="special">\"</span><span class="string">save_as</span><span class="special">\"</span><span class="string">: if(this.settings[</span><span class="special">\"</span><span class="string">save_as_callback</span><span class="special">\"</span><span class="string">].length&gt;0) eval(</span><span class="special">\"</span><span class="string">parent.</span><span class="special">\"</span><span class="string">+this.settings[</span><span class="special">\"</span><span class="string">save_as_callback</span><span class="special">\"</span><span class="string">]+</span><span class="special">\"</span><span class="string">('</span><span class="special">\"</span><span class="string">+ this.id +</span><span class="special">\"</span><span class="string">', eA.textarea.value);</span><span class="special">\"</span><span class="string">);break; case </span><span class="special">\"</span><span class="string">load</span><span class="special">\"</span><span class="string">: if(this.settings[</span><span class="special">\"</span><span class="string">load_callback</span><span class="special">\"</span><span class="string">].length&gt;0) eval(</span><span class="special">\"</span><span class="string">parent.</span><span class="special">\"</span><span class="string">+this.settings[</span><span class="special">\"</span><span class="string">load_callback</span><span class="special">\"</span><span class="string">]+</span><span class="special">\"</span><span class="string">('</span><span class="special">\"</span><span class="string">+ this.id +</span><span class="special">\"</span><span class="string">');</span><span class="special">\"</span><span class="string">);break;case </span><span class="special">\"</span><span class="string">onchange</span><span class="special">\"</span><span class="string">: if(this.settings[</span><span class="special">\"</span><span class="string">change_callback</span><span class="special">\"</span><span class="string">].length&gt;0) eval(</span><span class="special">\"</span><span class="string">parent.</span><span class="special">\"</span><span class="string">+this.settings[</span><span class="special">\"</span><span class="string">change_callback</span><span class="special">\"</span><span class="string">]+</span><span class="special">\"</span><span class="string">('</span><span class="special">\"</span><span class="string">+ this.id +</span><span class="special">\"</span><span class="string">');</span><span class="special">\"</span><span class="string">);break;case </span><span class="special">\"</span><span class="string">EA_load</span><span class="special">\"</span><span class="string">: if(this.settings[</span><span class="special">\"</span><span class="string">EA_load_callback</span><span class="special">\"</span><span class="string">].length&gt;0) eval(</span><span class="special">\"</span><span class="string">parent.</span><span class="special">\"</span><span class="string">+this.settings[</span><span class="special">\"</span><span class="string">EA_load_callback</span><span class="special">\"</span><span class="string">]+</span><span class="special">\"</span><span class="string">('</span><span class="special">\"</span><span class="string">+ this.id +</span><span class="special">\"</span><span class="string">');</span><span class="special">\"</span><span class="string">);break;case </span><span class="special">\"</span><span class="string">EA_unload</span><span class="special">\"</span><span class="string">: if(this.settings[</span><span class="special">\"</span><span class="string">EA_unload_callback</span><span class="special">\"</span><span class="string">].length&gt;0) eval(</span><span class="special">\"</span><span class="string">parent.</span><span class="special">\"</span><span class="string">+this.settings[</span><span class="special">\"</span><span class="string">EA_unload_callback</span><span class="special">\"</span><span class="string">]+</span><span class="special">\"</span><span class="string">('</span><span class="special">\"</span><span class="string">+ this.id +</span><span class="special">\"</span><span class="string">');</span><span class="special">\"</span><span class="string">);break;case </span><span class="special">\"</span><span class="string">toggle_on</span><span class="special">\"</span><span class="string">: if(this.settings[</span><span class="special">\"</span><span class="string">EA_toggle_on_callback</span><span class="special">\"</span><span class="string">].length&gt;0) eval(</span><span class="special">\"</span><span class="string">parent.</span><span class="special">\"</span><span class="string">+this.settings[</span><span class="special">\"</span><span class="string">EA_toggle_on_callback</span><span class="special">\"</span><span class="string">]+</span><span class="special">\"</span><span class="string">('</span><span class="special">\"</span><span class="string">+ this.id +</span><span class="special">\"</span><span class="string">');</span><span class="special">\"</span><span class="string">);break;case </span><span class="special">\"</span><span class="string">toggle_off</span><span class="special">\"</span><span class="string">: if(this.settings[</span><span class="special">\"</span><span class="string">EA_toggle_off_callback</span><span class="special">\"</span><span class="string">].length&gt;0) eval(</span><span class="special">\"</span><span class="string">parent.</span><span class="special">\"</span><span class="string">+this.settings[</span><span class="special">\"</span><span class="string">EA_toggle_off_callback</span><span class="special">\"</span><span class="string">]+</span><span class="special">\"</span><span class="string">('</span><span class="special">\"</span><span class="string">+ this.id +</span><span class="special">\"</span><span class="string">');</span><span class="special">\"</span><span class="string">);break;case </span><span class="special">\"</span><span class="string">re_sync</span><span class="special">\"</span><span class="string">: if(!this.do_highlight) break;default: if(typeof(eval(</span><span class="special">\"</span><span class="string">eA.</span><span class="special">\"</span><span class="string">+cmd))==</span><span class="special">\"</span><span class="string">function</span><span class="special">\"</span><span class="string">) try{eval(</span><span class="special">\"</span><span class="string">eA.</span><span class="special">\"</span><span class="string">+ cmd +</span><span class="special">\"</span><span class="string">(param);</span><span class="special">\"</span><span class="string">);}catch(e){};}};EA.prototype.get_translation=function(word, mode){if(mode==</span><span class="special">\"</span><span class="string">template</span><span class="special">\"</span><span class="string">) return parent.eAL.translate(word, this.settings[</span><span class="special">\"</span><span class="string">language</span><span class="special">\"</span><span class="string">], mode);</span><span class="special">\n</span><span class="string">else return parent.eAL.get_word_translation(word, this.settings[</span><span class="special">\"</span><span class="string">language</span><span class="special">\"</span><span class="string">]);};EA.prototype.add_plugin=function(plug_name, plug_obj){for(var i=0;i&lt;this.settings[</span><span class="special">\"</span><span class="string">plugins</span><span class="special">\"</span><span class="string">].length;i++){if(this.settings[</span><span class="special">\"</span><span class="string">plugins</span><span class="special">\"</span><span class="string">][i]==plug_name){this.plugins[plug_name]=plug_obj;plug_obj.baseURL=parent.eAL.baseURL + </span><span class="special">\"</span><span class="string">plugins/</span><span class="special">\"</span><span class="string"> + plug_name + </span><span class="special">\"</span><span class="string">/</span><span class="special">\"</span><span class="string">;if( typeof(plug_obj.init)==</span><span class="special">\"</span><span class="string">function</span><span class="special">\"</span><span class="string"> ) plug_obj.init();}}};EA.prototype.load_css=function(url){try{link=document.createElement(</span><span class="special">\"</span><span class="string">link</span><span class="special">\"</span><span class="string">);link.type=</span><span class="special">\"</span><span class="string">text/css</span><span class="special">\"</span><span class="string">;link.rel=</span><span class="special">\"</span><span class="string">stylesheet</span><span class="special">\"</span><span class="string">;link.media=</span><span class="special">\"</span><span class="string">all</span><span class="special">\"</span><span class="string">;link.href=url;head=document.getElementsByTagName(</span><span class="special">\"</span><span class="string">head</span><span class="special">\"</span><span class="string">);head[0].appendChild(link);}catch(e){document.write(</span><span class="special">\"</span><span class="string">&lt;link href='</span><span class="special">\"</span><span class="string">+ url +</span><span class="special">\"</span><span class="string">' rel='stylesheet' type='text/css' /&gt;</span><span class="special">\"</span><span class="string">);}};EA.prototype.load_script=function(url){try{script=document.createElement(</span><span class="special">\"</span><span class="string">script</span><span class="special">\"</span><span class="string">);script.type=</span><span class="special">\"</span><span class="string">text/javascript</span><span class="special">\"</span><span class="string">;script.src =url;head=document.getElementsByTagName(</span><span class="special">\"</span><span class="string">head</span><span class="special">\"</span><span class="string">);head[0].appendChild(script);}catch(e){document.write(</span><span class="special">\"</span><span class="string">&lt;script type='text/javascript' src='</span><span class="special">\"</span><span class="string"> + url + </span><span class="special">\"</span><span class="string">'&gt;&lt;</span><span class="special">\"</span><span class="string">+</span><span class="special">\"</span><span class="string">/script&gt;</span><span class="special">\"</span><span class="string">);}};EA.prototype.add_lang=function(language, values){if(!parent.eAL.lang[language]) parent.eAL.lang[language]=new Object();for(var i in values) parent.eAL.lang[language][i]=values[i];};var eA=new EA();eA.add_event(window, </span><span class="special">\"</span><span class="string">load</span><span class="special">\"</span><span class="string">, init);function init(){setTimeout(</span><span class="special">\"</span><span class="string">eA.init();</span><span class="special">\"</span><span class="string">, 10);};    EA.prototype.focus=function(){this.textarea.focus();this.textareaFocused=true;};EA.prototype.check_line_selection=function(timer_checkup){if(!eAs[this.id]) return false;time=new Date;t1=t2=t3=time.getTime();if(!this.smooth_selection &amp;&amp; !this.do_highlight){}</span><span class="special">\n</span><span class="string">else if(this.textareaFocused &amp;&amp; eAs[this.id][</span><span class="special">\"</span><span class="string">displayed</span><span class="special">\"</span><span class="string">]==true &amp;&amp; this.isResizing==false){infos=this.get_selection_infos();time=new Date;t2=time.getTime();if(this.last_selection[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">] !=infos[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">] || this.last_selection[</span><span class="special">\"</span><span class="string">line_nb</span><span class="special">\"</span><span class="string">] !=infos[</span><span class="special">\"</span><span class="string">line_nb</span><span class="special">\"</span><span class="string">] || infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">] !=this.last_selection[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">] || this.reload_highlight){new_top=this.lineHeight * (infos[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">]-1);new_height=Math.max(0, this.lineHeight * infos[</span><span class="special">\"</span><span class="string">line_nb</span><span class="special">\"</span><span class="string">]);new_width=Math.max(this.textarea.scrollWidth, this.container.clientWidth -50);this.selection_field.style.top=new_top+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;this.selection_field.style.width=new_width+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;this.selection_field.style.height=new_height+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">cursor_pos</span><span class="special">\"</span><span class="string">).style.top=new_top+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;if(this.do_highlight==true){var curr_text=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">);var content=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;var start=Math.max(0,infos[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">]-1);var end=Math.min(curr_text.length, infos[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">]+infos[</span><span class="special">\"</span><span class="string">line_nb</span><span class="special">\"</span><span class="string">]-1);for(i=start;i&lt; end;i++){content+=curr_text[i]+</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">;}content=content.replace(/&amp;/g,</span><span class="special">\"</span><span class="string">&amp;amp;</span><span class="special">\"</span><span class="string">);content=content.replace(/&lt;/g,</span><span class="special">\"</span><span class="string">&amp;lt;</span><span class="special">\"</span><span class="string">);content=content.replace(/&gt;/g,</span><span class="special">\"</span><span class="string">&amp;gt;</span><span class="special">\"</span><span class="string">);if(this.nav['isIE'] || this.nav['isOpera']) this.selection_field.innerHTML=</span><span class="special">\"</span><span class="string">&lt;pre&gt;</span><span class="special">\"</span><span class="string"> + content.replace(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">&lt;br/&gt;</span><span class="special">\"</span><span class="string">) + </span><span class="special">\"</span><span class="string">&lt;/pre&gt;</span><span class="special">\"</span><span class="string">;</span><span class="special">\n</span><span class="string">else this.selection_field.innerHTML=content;if(this.reload_highlight || (infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">] !=this.last_text_to_highlight &amp;&amp; (this.last_selection[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">]!=infos[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">] || this.last_selection[</span><span class="special">\"</span><span class="string">line_nb</span><span class="special">\"</span><span class="string">]!=infos[</span><span class="special">\"</span><span class="string">line_nb</span><span class="special">\"</span><span class="string">] || this.last_selection[</span><span class="special">\"</span><span class="string">nb_line</span><span class="special">\"</span><span class="string">]!=infos[</span><span class="special">\"</span><span class="string">nb_line</span><span class="special">\"</span><span class="string">]) ) ) this.maj_highlight(infos);}}time=new Date;t3=time.getTime();if(infos[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">] !=this.last_selection[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">] || infos[</span><span class="special">\"</span><span class="string">curr_pos</span><span class="special">\"</span><span class="string">] !=this.last_selection[</span><span class="special">\"</span><span class="string">curr_pos</span><span class="special">\"</span><span class="string">] || infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].length!=this.last_selection[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].length || this.reload_highlight){var selec_char=infos[</span><span class="special">\"</span><span class="string">curr_line</span><span class="special">\"</span><span class="string">].charAt(infos[</span><span class="special">\"</span><span class="string">curr_pos</span><span class="special">\"</span><span class="string">]-1);var no_real_move=true;if(infos[</span><span class="special">\"</span><span class="string">line_nb</span><span class="special">\"</span><span class="string">]==1 &amp;&amp; (this.assocBracket[selec_char] || this.revertAssocBracket[selec_char]) ){no_real_move=false;if(this.findEndBracket(infos, selec_char) ===true){document.getElementById(</span><span class="special">\"</span><span class="string">end_bracket</span><span class="special">\"</span><span class="string">).style.visibility=</span><span class="special">\"</span><span class="string">visible</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">cursor_pos</span><span class="special">\"</span><span class="string">).style.visibility=</span><span class="special">\"</span><span class="string">visible</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">cursor_pos</span><span class="special">\"</span><span class="string">).innerHTML=selec_char;document.getElementById(</span><span class="special">\"</span><span class="string">end_bracket</span><span class="special">\"</span><span class="string">).innerHTML=(this.assocBracket[selec_char] || this.revertAssocBracket[selec_char]);}</span><span class="special">\n</span><span class="string">else{document.getElementById(</span><span class="special">\"</span><span class="string">end_bracket</span><span class="special">\"</span><span class="string">).style.visibility=</span><span class="special">\"</span><span class="string">hidden</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">cursor_pos</span><span class="special">\"</span><span class="string">).style.visibility=</span><span class="special">\"</span><span class="string">hidden</span><span class="special">\"</span><span class="string">;}}</span><span class="special">\n</span><span class="string">else{document.getElementById(</span><span class="special">\"</span><span class="string">cursor_pos</span><span class="special">\"</span><span class="string">).style.visibility=</span><span class="special">\"</span><span class="string">hidden</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">end_bracket</span><span class="special">\"</span><span class="string">).style.visibility=</span><span class="special">\"</span><span class="string">hidden</span><span class="special">\"</span><span class="string">;}this.displayToCursorPosition(</span><span class="special">\"</span><span class="string">cursor_pos</span><span class="special">\"</span><span class="string">, infos[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">], infos[</span><span class="special">\"</span><span class="string">curr_pos</span><span class="special">\"</span><span class="string">]-1, infos[</span><span class="special">\"</span><span class="string">curr_line</span><span class="special">\"</span><span class="string">], no_real_move);if(infos[</span><span class="special">\"</span><span class="string">line_nb</span><span class="special">\"</span><span class="string">]==1 &amp;&amp; infos[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">]!=this.last_selection[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">]) this.scroll_to_view();}this.last_selection=infos;}time=new Date;tend=time.getTime();if(timer_checkup){if(this.do_highlight==true) setTimeout(</span><span class="special">\"</span><span class="string">eA.check_line_selection(true)</span><span class="special">\"</span><span class="string">, 50);</span><span class="special">\n</span><span class="string">else setTimeout(</span><span class="special">\"</span><span class="string">eA.check_line_selection(true)</span><span class="special">\"</span><span class="string">, 50);}};EA.prototype.get_selection_infos=function(){if(this.nav['isIE']) this.getIESelection();start=this.textarea.selectionStart;end=this.textarea.selectionEnd;if(this.last_selection[</span><span class="special">\"</span><span class="string">selectionStart</span><span class="special">\"</span><span class="string">]==start &amp;&amp; this.last_selection[</span><span class="special">\"</span><span class="string">selectionEnd</span><span class="special">\"</span><span class="string">]==end &amp;&amp; this.last_selection[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">]==this.textarea.value) return this.last_selection;if(this.tabulation!=</span><span class="special">\"</span><span class="special">\t</span><span class="special">\"</span><span class="string"> &amp;&amp; this.textarea.value.indexOf(</span><span class="special">\"</span><span class="special">\t</span><span class="special">\"</span><span class="string">)!=-1){var len=this.textarea.value.length;this.textarea.value=this.replace_tab(this.textarea.value);start=end=start+(this.textarea.value.length-len);this.area_select(start, 0);}var selections=new Object();selections[</span><span class="special">\"</span><span class="string">selectionStart</span><span class="special">\"</span><span class="string">]=start;selections[</span><span class="special">\"</span><span class="string">selectionEnd</span><span class="special">\"</span><span class="string">]=end;selections[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">]=this.textarea.value;selections[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">]=1;selections[</span><span class="special">\"</span><span class="string">line_nb</span><span class="special">\"</span><span class="string">]=1;selections[</span><span class="special">\"</span><span class="string">curr_pos</span><span class="special">\"</span><span class="string">]=0;selections[</span><span class="special">\"</span><span class="string">curr_line</span><span class="special">\"</span><span class="string">]=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;selections[</span><span class="special">\"</span><span class="string">indexOfCursor</span><span class="special">\"</span><span class="string">]=0;selections[</span><span class="special">\"</span><span class="string">selec_direction</span><span class="special">\"</span><span class="string">]=this.last_selection[</span><span class="special">\"</span><span class="string">selec_direction</span><span class="special">\"</span><span class="string">];var splitTab=selections[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">);var nbLine=Math.max(0, splitTab.length);var nbChar=Math.max(0, selections[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].length - (nbLine - 1));if(selections[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].indexOf(</span><span class="special">\"</span><span class="special">\\</span><span class="string">r</span><span class="special">\"</span><span class="string">)!=-1) nbChar=nbChar - (nbLine -1);selections[</span><span class="special">\"</span><span class="string">nb_line</span><span class="special">\"</span><span class="string">]=nbLine;selections[</span><span class="special">\"</span><span class="string">nb_char</span><span class="special">\"</span><span class="string">]=nbChar;if(start&gt;0){var str=selections[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].substr(0,start);selections[</span><span class="special">\"</span><span class="string">curr_pos</span><span class="special">\"</span><span class="string">]=start - str.lastIndexOf(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">);selections[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">]=Math.max(1, str.split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">).length);}</span><span class="special">\n</span><span class="string">else{selections[</span><span class="special">\"</span><span class="string">curr_pos</span><span class="special">\"</span><span class="string">]=1;}if(end&gt;start){selections[</span><span class="special">\"</span><span class="string">line_nb</span><span class="special">\"</span><span class="string">]=selections[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].substring(start,end).split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">).length;}selections[</span><span class="special">\"</span><span class="string">indexOfCursor</span><span class="special">\"</span><span class="string">]=this.textarea.selectionStart;selections[</span><span class="special">\"</span><span class="string">curr_line</span><span class="special">\"</span><span class="string">]=splitTab[Math.max(0,selections[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">]-1)];if(selections[</span><span class="special">\"</span><span class="string">selectionStart</span><span class="special">\"</span><span class="string">]==this.last_selection[</span><span class="special">\"</span><span class="string">selectionStart</span><span class="special">\"</span><span class="string">]){if(selections[</span><span class="special">\"</span><span class="string">selectionEnd</span><span class="special">\"</span><span class="string">]&gt;this.last_selection[</span><span class="special">\"</span><span class="string">selectionEnd</span><span class="special">\"</span><span class="string">]) selections[</span><span class="special">\"</span><span class="string">selec_direction</span><span class="special">\"</span><span class="string">]=</span><span class="special">\"</span><span class="string">down</span><span class="special">\"</span><span class="string">;</span><span class="special">\n</span><span class="string">else if(selections[</span><span class="special">\"</span><span class="string">selectionEnd</span><span class="special">\"</span><span class="string">]==this.last_selection[</span><span class="special">\"</span><span class="string">selectionStart</span><span class="special">\"</span><span class="string">]) selections[</span><span class="special">\"</span><span class="string">selec_direction</span><span class="special">\"</span><span class="string">]=this.last_selection[</span><span class="special">\"</span><span class="string">selec_direction</span><span class="special">\"</span><span class="string">];}</span><span class="special">\n</span><span class="string">else if(selections[</span><span class="special">\"</span><span class="string">selectionStart</span><span class="special">\"</span><span class="string">]==this.last_selection[</span><span class="special">\"</span><span class="string">selectionEnd</span><span class="special">\"</span><span class="string">] &amp;&amp; selections[</span><span class="special">\"</span><span class="string">selectionEnd</span><span class="special">\"</span><span class="string">]&gt;this.last_selection[</span><span class="special">\"</span><span class="string">selectionEnd</span><span class="special">\"</span><span class="string">]){selections[</span><span class="special">\"</span><span class="string">selec_direction</span><span class="special">\"</span><span class="string">]=</span><span class="special">\"</span><span class="string">down</span><span class="special">\"</span><span class="string">;}</span><span class="special">\n</span><span class="string">else{selections[</span><span class="special">\"</span><span class="string">selec_direction</span><span class="special">\"</span><span class="string">]=</span><span class="special">\"</span><span class="string">up</span><span class="special">\"</span><span class="string">;}document.getElementById(</span><span class="special">\"</span><span class="string">nbLine</span><span class="special">\"</span><span class="string">).innerHTML=nbLine;document.getElementById(</span><span class="special">\"</span><span class="string">nbChar</span><span class="special">\"</span><span class="string">).innerHTML=nbChar;document.getElementById(</span><span class="special">\"</span><span class="string">linePos</span><span class="special">\"</span><span class="string">).innerHTML=selections[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">];document.getElementById(</span><span class="special">\"</span><span class="string">currPos</span><span class="special">\"</span><span class="string">).innerHTML=selections[</span><span class="special">\"</span><span class="string">curr_pos</span><span class="special">\"</span><span class="string">];return selections;};EA.prototype.getIESelection=function(){var range=document.selection.createRange();var stored_range=range.duplicate();stored_range.moveToElementText( this.textarea );stored_range.setEndPoint( 'EndToEnd', range );if(stored_range.parentElement() !=this.textarea) return;var scrollTop=this.result.scrollTop + document.body.scrollTop;var relative_top=range.offsetTop - parent.calculeOffsetTop(this.textarea) + scrollTop;var line_start=Math.round((relative_top / this.lineHeight) +1);var line_nb=Math.round(range.boundingHeight / this.lineHeight);var range_start=stored_range.text.length - range.text.length;var tab=this.textarea.value.substr(0, range_start).split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">);range_start+=(line_start - tab.length)*2;this.textarea.selectionStart=range_start;var range_end=this.textarea.selectionStart + range.text.length;tab=this.textarea.value.substr(0, range_start + range.text.length).split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">);range_end+=(line_start + line_nb - 1 - tab.length)*2;this.textarea.selectionEnd=range_end;};EA.prototype.setIESelection=function(){var nbLineStart=this.textarea.value.substr(0, this.textarea.selectionStart).split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">).length - 1;var nbLineEnd=this.textarea.value.substr(0, this.textarea.selectionEnd).split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">).length - 1;var range=document.selection.createRange();range.moveToElementText( this.textarea );range.setEndPoint( 'EndToStart', range );range.moveStart('character', this.textarea.selectionStart - nbLineStart);range.moveEnd('character', this.textarea.selectionEnd - nbLineEnd - (this.textarea.selectionStart - nbLineStart)  );range.select();};EA.prototype.tab_selection=function(){if(this.is_tabbing) return;this.is_tabbing=true;if( this.nav['isIE'] ) this.getIESelection();var start=this.textarea.selectionStart;var end=this.textarea.selectionEnd;var insText=this.textarea.value.substring(start, end);var pos_start=start;var pos_end=end;if (insText.length==0){this.textarea.value=this.textarea.value.substr(0, start) + this.tabulation + this.textarea.value.substr(end);pos_start=start + this.tabulation.length;pos_end=pos_start;}</span><span class="special">\n</span><span class="string">else{start=Math.max(0, this.textarea.value.substr(0, start).lastIndexOf(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">)+1);endText=this.textarea.value.substr(end);startText=this.textarea.value.substr(0, start);tmp=this.textarea.value.substring(start, end).split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">);insText=this.tabulation+tmp.join(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">+this.tabulation);this.textarea.value=startText + insText + endText;pos_start=start;pos_end=this.textarea.value.indexOf(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">, startText.length + insText.length);if(pos_end==-1) pos_end=this.textarea.value.length;}this.textarea.selectionStart=pos_start;this.textarea.selectionEnd=pos_end;if(this.nav['isIE']){this.setIESelection();setTimeout(</span><span class="special">\"</span><span class="string">eA.is_tabbing=false;</span><span class="special">\"</span><span class="string">, 100);}</span><span class="special">\n</span><span class="string">else this.is_tabbing=false;};EA.prototype.invert_tab_selection=function(){if(this.is_tabbing) return;this.is_tabbing=true;if(this.nav['isIE']) this.getIESelection();var start=this.textarea.selectionStart;var end=this.textarea.selectionEnd;var insText=this.textarea.value.substring(start, end);var pos_start=start;var pos_end=end;if (insText.length==0){if(this.textarea.value.substring(start-this.tabulation.length, start)==this.tabulation){this.textarea.value=this.textarea.value.substr(0, start-this.tabulation.length) + this.textarea.value.substr(end);pos_start=Math.max(0, start-this.tabulation.length);pos_end=pos_start;}}</span><span class="special">\n</span><span class="string">else{start=this.textarea.value.substr(0, start).lastIndexOf(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">)+1;endText=this.textarea.value.substr(end);startText=this.textarea.value.substr(0, start);tmp=this.textarea.value.substring(start, end).split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">);insText=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;for(i=0;i&lt;tmp.length;i++){for(j=0;j&lt;this.tab_nb_char;j++){if(tmp[i].charAt(0)==</span><span class="special">\"</span><span class="special">\t</span><span class="special">\"</span><span class="string">){tmp[i]=tmp[i].substr(1);j=this.tab_nb_char;}</span><span class="special">\n</span><span class="string">else if(tmp[i].charAt(0)==</span><span class="special">\"</span><span class="string"> </span><span class="special">\"</span><span class="string">) tmp[i]=tmp[i].substr(1);}insText+=tmp[i];if(i&lt;tmp.length-1) insText+=</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">;}this.textarea.value=startText + insText + endText;pos_start=start;pos_end=this.textarea.value.indexOf(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">, startText.length + insText.length);if(pos_end==-1) pos_end=this.textarea.value.length;}this.textarea.selectionStart=pos_start;this.textarea.selectionEnd=pos_end;if(this.nav['isIE']){this.setIESelection();setTimeout(</span><span class="special">\"</span><span class="string">eA.is_tabbing=false;</span><span class="special">\"</span><span class="string">, 100);}</span><span class="special">\n</span><span class="string">else this.is_tabbing=false;};EA.prototype.press_enter=function(){if(!this.smooth_selection) return false;if(this.nav['isIE']) this.getIESelection();var scrollTop=this.result.scrollTop;var scrollLeft=this.result.scrollLeft;var start=this.textarea.selectionStart;var end=this.textarea.selectionEnd;var start_last_line=Math.max(0 , this.textarea.value.substring(0, start).lastIndexOf(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">) + 1 );var begin_line=this.textarea.value.substring(start_last_line, start).replace(/^([ </span><span class="special">\t</span><span class="string">]*).*/gm, </span><span class="special">\"</span><span class="string">$1</span><span class="special">\"</span><span class="string">);if(begin_line==</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string"> || begin_line==</span><span class="special">\"</span><span class="special">\\</span><span class="string">r</span><span class="special">\"</span><span class="string"> || begin_line.length==0) return false;if(this.nav['isIE'] || this.nav['isOpera']){begin_line=</span><span class="special">\"</span><span class="special">\\</span><span class="string">r</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">+ begin_line;}</span><span class="special">\n</span><span class="string">else{begin_line=</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">+ begin_line;}this.textarea.value=this.textarea.value.substring(0, start) + begin_line + this.textarea.value.substring(end);this.area_select(start+ begin_line.length ,0);if(this.nav['isIE']){this.result.scrollTop=scrollTop;this.result.scrollLeft=scrollLeft;}return true;};EA.prototype.findEndBracket=function(infos, bracket){var start=infos[</span><span class="special">\"</span><span class="string">indexOfCursor</span><span class="special">\"</span><span class="string">];var normal_order=true;if(this.assocBracket[bracket]) endBracket=this.assocBracket[bracket];</span><span class="special">\n</span><span class="string">else if(this.revertAssocBracket[bracket]){endBracket=this.revertAssocBracket[bracket];normal_order=false;}var end=-1;var nbBracketOpen=0;for(var i=start;i&lt;infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].length &amp;&amp; i&gt;=0;){if(infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].charAt(i)==endBracket){nbBracketOpen--;if(nbBracketOpen&lt;=0){end=i;break;}}</span><span class="special">\n</span><span class="string">else if(infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].charAt(i)==bracket) nbBracketOpen++;if(normal_order) i++;</span><span class="special">\n</span><span class="string">else i--;}if(end==-1) return false;var endLastLine=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].substr(0, end).lastIndexOf(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">);if(endLastLine==-1) line=1;</span><span class="special">\n</span><span class="string">else line=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].substr(0, endLastLine).split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">).length + 1;var curPos=end - endLastLine;this.displayToCursorPosition(</span><span class="special">\"</span><span class="string">end_bracket</span><span class="special">\"</span><span class="string">, line, curPos, infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].substring(endLastLine +1, end));return true;};EA.prototype.displayToCursorPosition=function(id, start_line, cur_pos, lineContent, no_real_move){var elem=document.getElementById(</span><span class="special">\"</span><span class="string">test_font_size</span><span class="special">\"</span><span class="string">);var dest=document.getElementById(id);var postLeft=0;elem.innerHTML=</span><span class="special">\"</span><span class="string">&lt;pre&gt;&lt;span id='test_font_size_inner'&gt;</span><span class="special">\"</span><span class="string">+lineContent.substr(0, cur_pos).replace(/&lt;/g,</span><span class="special">\"</span><span class="string">&amp;lt;</span><span class="special">\"</span><span class="string">).replace(/&amp;/g,</span><span class="special">\"</span><span class="string">&amp;amp;</span><span class="special">\"</span><span class="string">)+</span><span class="special">\"</span><span class="string">&lt;/span&gt;&lt;/pre&gt;</span><span class="special">\"</span><span class="string">;posLeft=45 + document.getElementById('test_font_size_inner').offsetWidth;var posTop=this.lineHeight * (start_line-1);if(no_real_move!=true){dest.style.top=posTop+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;dest.style.left=posLeft+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;}dest.cursor_top=posTop;dest.cursor_left=posLeft;};EA.prototype.area_select=function(start, length){this.textarea.focus();start=Math.max(0, Math.min(this.textarea.value.length, start));end=Math.max(start, Math.min(this.textarea.value.length, start+length));if(this.nav['isIE']){this.textarea.selectionStart=start;this.textarea.selectionEnd=end;this.setIESelection();}</span><span class="special">\n</span><span class="string">else{if(this.nav['isOpera']){this.textarea.setSelectionRange(0, 0);}this.textarea.setSelectionRange(start, end);}this.check_line_selection();};EA.prototype.area_get_selection=function(){var text=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;if( document.selection ){var range=document.selection.createRange();text=range.text;}</span><span class="special">\n</span><span class="string">else{text=this.textarea.value.substring(this.textarea.selectionStart, this.textarea.selectionEnd);}return text;}; EA.prototype.replace_tab=function(text){return text.replace(/((</span><span class="special">\\</span><span class="string">n?)([^</span><span class="special">\t</span><span class="special">\\</span><span class="string">n]*)</span><span class="special">\t</span><span class="string">)/gi, eA.smartTab);};EA.prototype.smartTab=function(){val=</span><span class="special">\"</span><span class="string">                   </span><span class="special">\"</span><span class="string">;return EA.prototype.smartTab.arguments[2] + EA.prototype.smartTab.arguments[3] + val.substr(0, eA.tab_nb_char - (EA.prototype.smartTab.arguments[3].length)%eA.tab_nb_char);};EA.prototype.add_style=function(styles){if(styles.length&gt;0){newcss=document.createElement(</span><span class="special">\"</span><span class="string">style</span><span class="special">\"</span><span class="string">);newcss.type=</span><span class="special">\"</span><span class="string">text/css</span><span class="special">\"</span><span class="string">;newcss.media=</span><span class="special">\"</span><span class="string">all</span><span class="special">\"</span><span class="string">;document.getElementsByTagName(</span><span class="special">\"</span><span class="string">head</span><span class="special">\"</span><span class="string">)[0].appendChild(newcss);cssrules=styles.split(</span><span class="special">\"</span><span class="string">}</span><span class="special">\"</span><span class="string">);newcss=document.styleSheets[0];if(newcss.rules){for(i=cssrules.length-2;i&gt;=0;i--){newrule=cssrules[i].split(</span><span class="special">\"</span><span class="string">{</span><span class="special">\"</span><span class="string">);newcss.addRule(newrule[0],newrule[1])}}</span><span class="special">\n</span><span class="string">else if(newcss.cssRules){for(i=cssrules.length-1;i&gt;=0;i--){if(cssrules[i].indexOf(</span><span class="special">\"</span><span class="string">{</span><span class="special">\"</span><span class="string">)!=-1){newcss.insertRule(cssrules[i]+</span><span class="special">\"</span><span class="string">}</span><span class="special">\"</span><span class="string">,0);}}}}};EA.prototype.set_font=function(family, size){var elems=new Array(</span><span class="special">\"</span><span class="string">textarea</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">content_highlight</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">cursor_pos</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">end_bracket</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">selection_field</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">line_number</span><span class="special">\"</span><span class="string">);if(family &amp;&amp; family!=</span><span class="special">\"</span><span class="special">\"</span><span class="string">) this.settings[</span><span class="special">\"</span><span class="string">font_family</span><span class="special">\"</span><span class="string">]=family;if(size &amp;&amp; size&gt;0) this.settings[</span><span class="special">\"</span><span class="string">font_size</span><span class="special">\"</span><span class="string">]=size;if(this.nav['isOpera']) this.settings['font_family']=</span><span class="special">\"</span><span class="string">monospace</span><span class="special">\"</span><span class="string">;var elem_font=document.getElementById(</span><span class="special">\"</span><span class="string">area_font_size</span><span class="special">\"</span><span class="string">);if(elem_font){for(var i=0;i&lt;elem_font.length;i++){if(elem_font.options[i].value &amp;&amp; elem_font.options[i].value==this.settings[</span><span class="special">\"</span><span class="string">font_size</span><span class="special">\"</span><span class="string">]) elem_font.options[i].selected=true;}}document.getElementById(</span><span class="special">\"</span><span class="string">test_font_size</span><span class="special">\"</span><span class="string">).style.fontFamily=</span><span class="special">\"</span><span class="special">\"</span><span class="string">+this.settings[</span><span class="special">\"</span><span class="string">font_family</span><span class="special">\"</span><span class="string">];document.getElementById(</span><span class="special">\"</span><span class="string">test_font_size</span><span class="special">\"</span><span class="string">).style.fontSize=this.settings[</span><span class="special">\"</span><span class="string">font_size</span><span class="special">\"</span><span class="string">]+</span><span class="special">\"</span><span class="string">pt</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">test_font_size</span><span class="special">\"</span><span class="string">).innerHTML=</span><span class="special">\"</span><span class="string">0</span><span class="special">\"</span><span class="string">;this.lineHeight=document.getElementById(</span><span class="special">\"</span><span class="string">test_font_size</span><span class="special">\"</span><span class="string">).offsetHeight;for(var i=0;i&lt;elems.length;i++){var elem=document.getElementById(elems[i]);document.getElementById(elems[i]).style.fontFamily=this.settings[</span><span class="special">\"</span><span class="string">font_family</span><span class="special">\"</span><span class="string">];document.getElementById(elems[i]).style.fontSize=this.settings[</span><span class="special">\"</span><span class="string">font_size</span><span class="special">\"</span><span class="string">]+</span><span class="special">\"</span><span class="string">pt</span><span class="special">\"</span><span class="string">;document.getElementById(elems[i]).style.lineHeight=this.lineHeight+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;}if(this.nav['isOpera']){var start=this.textarea.selectionStart;var end=this.textarea.selectionEnd;var parNod=this.textarea.parentNode, nxtSib=this.textarea.nextSibling;parNod.removeChild(this.textarea);parNod.insertBefore(this.textarea, nxtSib);this.area_select(start, end-start);}this.add_style(</span><span class="special">\"</span><span class="string">pre{font-family:</span><span class="special">\"</span><span class="string">+this.settings[</span><span class="special">\"</span><span class="string">font_family</span><span class="special">\"</span><span class="string">]+</span><span class="special">\"</span><span class="string">}</span><span class="special">\"</span><span class="string">);this.last_line_selected=-1;this.last_selection=new Array();this.resync_highlight();};EA.prototype.change_font_size=function(){var size=document.getElementById(</span><span class="special">\"</span><span class="string">area_font_size</span><span class="special">\"</span><span class="string">).value;if(size&gt;0) this.set_font(</span><span class="special">\"</span><span class="special">\"</span><span class="string">, size);};EA.prototype.open_inline_popup=function(popup_id){this.close_all_inline_popup();var popup=document.getElementById(popup_id);var editor=document.getElementById(</span><span class="special">\"</span><span class="string">editor</span><span class="special">\"</span><span class="string">);for(var i=0;i&lt;this.inlinePopup.length;i++){if(this.inlinePopup[i][</span><span class="special">\"</span><span class="string">popup_id</span><span class="special">\"</span><span class="string">]==popup_id){var icon=document.getElementById(this.inlinePopup[i][</span><span class="special">\"</span><span class="string">icon_id</span><span class="special">\"</span><span class="string">]);if(icon){this.switchClassSticky(icon, 'editAreaButtonSelected', true);break;}}}popup.style.height=</span><span class="special">\"</span><span class="string">auto</span><span class="special">\"</span><span class="string">;popup.style.overflow=</span><span class="special">\"</span><span class="string">visible</span><span class="special">\"</span><span class="string">;if(document.body.offsetHeight&lt; popup.offsetHeight){popup.style.height=(document.body.offsetHeight-10)+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;popup.style.overflow=</span><span class="special">\"</span><span class="string">auto</span><span class="special">\"</span><span class="string">;}if(!popup.positionned){var new_left=editor.offsetWidth /2 - popup.offsetWidth /2;var new_top=editor.offsetHeight /2 - popup.offsetHeight /2;popup.style.left=new_left+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;popup.style.top=new_top+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;popup.positionned=true;}popup.style.visibility=</span><span class="special">\"</span><span class="string">visible</span><span class="special">\"</span><span class="string">;};EA.prototype.close_inline_popup=function(popup_id){var popup=document.getElementById(popup_id);for(var i=0;i&lt;this.inlinePopup.length;i++){if(this.inlinePopup[i][</span><span class="special">\"</span><span class="string">popup_id</span><span class="special">\"</span><span class="string">]==popup_id){var icon=document.getElementById(this.inlinePopup[i][</span><span class="special">\"</span><span class="string">icon_id</span><span class="special">\"</span><span class="string">]);if(icon){this.switchClassSticky(icon, 'editAreaButtonNormal', false);break;}}}popup.style.visibility=</span><span class="special">\"</span><span class="string">hidden</span><span class="special">\"</span><span class="string">;};EA.prototype.close_all_inline_popup=function(e){for(var i=0;i&lt;this.inlinePopup.length;i++){this.close_inline_popup(this.inlinePopup[i][</span><span class="special">\"</span><span class="string">popup_id</span><span class="special">\"</span><span class="string">]);}this.textarea.focus();};EA.prototype.show_help=function(){this.open_inline_popup(</span><span class="special">\"</span><span class="string">edit_area_help</span><span class="special">\"</span><span class="string">);};EA.prototype.new_document=function(){this.textarea.value=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;this.area_select(0,0);};EA.prototype.get_all_toolbar_height=function(){var area=document.getElementById(</span><span class="special">\"</span><span class="string">editor</span><span class="special">\"</span><span class="string">);var results=parent.getChildren(area, </span><span class="special">\"</span><span class="string">div</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">class</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">area_toolbar</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">all</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">0</span><span class="special">\"</span><span class="string">);var height=0;for(var i=0;i&lt;results.length;i++){height+=results[i].offsetHeight;}return height;};EA.prototype.go_to_line=function(line){if(!line){var icon=document.getElementById(</span><span class="special">\"</span><span class="string">go_to_line</span><span class="special">\"</span><span class="string">);if(icon !=null){this.restoreClass(icon);this.switchClassSticky(icon, 'editAreaButtonSelected', true);}line=prompt(this.get_translation(</span><span class="special">\"</span><span class="string">go_to_line_prompt</span><span class="special">\"</span><span class="string">));if(icon !=null) this.switchClassSticky(icon, 'editAreaButtonNormal', false);}if(line &amp;&amp; line!=null &amp;&amp; line.search(/^[0-9]+$/)!=-1){var start=0;var lines=this.textarea.value.split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">);if(line &gt; lines.length) start=this.textarea.value.length;</span><span class="special">\n</span><span class="string">else{for(var i=0;i&lt;Math.min(line-1, lines.length);i++) start+=lines[i].length + 1;}this.area_select(start, 0);}};EA.prototype.change_smooth_selection_mode=function(setTo){if(this.do_highlight) return;if(setTo !=null){if(setTo ===false) this.smooth_selection=true;</span><span class="special">\n</span><span class="string">else this.smooth_selection=false;}var icon=document.getElementById(</span><span class="special">\"</span><span class="string">change_smooth_selection</span><span class="special">\"</span><span class="string">);this.textarea.focus();if(this.smooth_selection===true){this.switchClassSticky(icon, 'editAreaButtonNormal', false);this.smooth_selection=false;document.getElementById(</span><span class="special">\"</span><span class="string">selection_field</span><span class="special">\"</span><span class="string">).style.display=</span><span class="special">\"</span><span class="string">none</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">cursor_pos</span><span class="special">\"</span><span class="string">).style.display=</span><span class="special">\"</span><span class="string">none</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">end_bracket</span><span class="special">\"</span><span class="string">).style.display=</span><span class="special">\"</span><span class="string">none</span><span class="special">\"</span><span class="string">;}</span><span class="special">\n</span><span class="string">else{this.switchClassSticky(icon, 'editAreaButtonSelected', false);this.smooth_selection=true;document.getElementById(</span><span class="special">\"</span><span class="string">selection_field</span><span class="special">\"</span><span class="string">).style.display=</span><span class="special">\"</span><span class="string">block</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">cursor_pos</span><span class="special">\"</span><span class="string">).style.display=</span><span class="special">\"</span><span class="string">block</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">end_bracket</span><span class="special">\"</span><span class="string">).style.display=</span><span class="special">\"</span><span class="string">block</span><span class="special">\"</span><span class="string">;}};EA.prototype.scroll_to_view=function(show){if(!this.smooth_selection) return;var zone=document.getElementById(</span><span class="special">\"</span><span class="string">result</span><span class="special">\"</span><span class="string">);var cursor_pos_top=document.getElementById(</span><span class="special">\"</span><span class="string">cursor_pos</span><span class="special">\"</span><span class="string">).cursor_top;if(show==</span><span class="special">\"</span><span class="string">bottom</span><span class="special">\"</span><span class="string">) cursor_pos_top+=(this.last_selection[</span><span class="special">\"</span><span class="string">line_nb</span><span class="special">\"</span><span class="string">]-1)* this.lineHeight;var max_height_visible=zone.clientHeight + zone.scrollTop;var miss_top=cursor_pos_top + this.lineHeight - max_height_visible;if(miss_top&gt;0){zone.scrollTop=zone.scrollTop + miss_top;}</span><span class="special">\n</span><span class="string">else if( zone.scrollTop &gt; cursor_pos_top){zone.scrollTop=cursor_pos_top;}var cursor_pos_left=document.getElementById(</span><span class="special">\"</span><span class="string">cursor_pos</span><span class="special">\"</span><span class="string">).cursor_left;var max_width_visible=zone.clientWidth + zone.scrollLeft;var miss_left=cursor_pos_left + 10 - max_width_visible;if(miss_left&gt;0){zone.scrollLeft=zone.scrollLeft + miss_left+ 50;}</span><span class="special">\n</span><span class="string">else if( zone.scrollLeft &gt; cursor_pos_left){zone.scrollLeft=cursor_pos_left;}</span><span class="special">\n</span><span class="string">else if( zone.scrollLeft==45){zone.scrollLeft=0;}};EA.prototype.check_undo=function(){if(!eAs[this.id]) return false;if(this.textareaFocused &amp;&amp; eAs[this.id][</span><span class="special">\"</span><span class="string">displayed</span><span class="special">\"</span><span class="string">]==true){var text=this.textarea.value;if(this.previous.length&lt;=1) this.switchClassSticky(document.getElementById(</span><span class="special">\"</span><span class="string">undo</span><span class="special">\"</span><span class="string">), 'editAreaButtonDisabled', true);if(!this.previous[this.previous.length-1] || this.previous[this.previous.length-1][</span><span class="special">\"</span><span class="string">text</span><span class="special">\"</span><span class="string">] !=text){this.previous.push({</span><span class="special">\"</span><span class="string">text</span><span class="special">\"</span><span class="string">: text, </span><span class="special">\"</span><span class="string">selStart</span><span class="special">\"</span><span class="string">: this.textarea.selectionStart, </span><span class="special">\"</span><span class="string">selEnd</span><span class="special">\"</span><span class="string">: this.textarea.selectionEnd});if(this.previous.length &gt; this.settings[</span><span class="special">\"</span><span class="string">max_undo</span><span class="special">\"</span><span class="string">]+1) this.previous.shift();}if(this.previous.length==2) this.switchClassSticky(document.getElementById(</span><span class="special">\"</span><span class="string">undo</span><span class="special">\"</span><span class="string">), 'editAreaButtonNormal', false);}setTimeout(</span><span class="special">\"</span><span class="string">eA.check_undo()</span><span class="special">\"</span><span class="string">, 3000);};EA.prototype.undo=function(){if(this.previous.length &gt; 0){if(this.nav['isIE']) this.getIESelection();this.next.push({</span><span class="special">\"</span><span class="string">text</span><span class="special">\"</span><span class="string">: this.textarea.value, </span><span class="special">\"</span><span class="string">selStart</span><span class="special">\"</span><span class="string">: this.textarea.selectionStart, </span><span class="special">\"</span><span class="string">selEnd</span><span class="special">\"</span><span class="string">: this.textarea.selectionEnd});var prev=this.previous.pop();if(prev[</span><span class="special">\"</span><span class="string">text</span><span class="special">\"</span><span class="string">]==this.textarea.value &amp;&amp; this.previous.length &gt; 0) prev=this.previous.pop();this.textarea.value=prev[</span><span class="special">\"</span><span class="string">text</span><span class="special">\"</span><span class="string">];this.last_undo=prev[</span><span class="special">\"</span><span class="string">text</span><span class="special">\"</span><span class="string">];this.area_select(prev[</span><span class="special">\"</span><span class="string">selStart</span><span class="special">\"</span><span class="string">], prev[</span><span class="special">\"</span><span class="string">selEnd</span><span class="special">\"</span><span class="string">]-prev[</span><span class="special">\"</span><span class="string">selStart</span><span class="special">\"</span><span class="string">]);this.switchClassSticky(document.getElementById(</span><span class="special">\"</span><span class="string">redo</span><span class="special">\"</span><span class="string">), 'editAreaButtonNormal', false);this.resync_highlight(true);}};EA.prototype.redo=function(){if(this.next.length &gt; 0){var next=this.next.pop();this.previous.push(next);this.textarea.value=next[</span><span class="special">\"</span><span class="string">text</span><span class="special">\"</span><span class="string">];this.last_undo=next[</span><span class="special">\"</span><span class="string">text</span><span class="special">\"</span><span class="string">];this.area_select(next[</span><span class="special">\"</span><span class="string">selStart</span><span class="special">\"</span><span class="string">], next[</span><span class="special">\"</span><span class="string">selEnd</span><span class="special">\"</span><span class="string">]-next[</span><span class="special">\"</span><span class="string">selStart</span><span class="special">\"</span><span class="string">]);this.switchClassSticky(document.getElementById(</span><span class="special">\"</span><span class="string">undo</span><span class="special">\"</span><span class="string">), 'editAreaButtonNormal', false);this.resync_highlight(true);}if(    this.next.length==0) this.switchClassSticky(document.getElementById(</span><span class="special">\"</span><span class="string">redo</span><span class="special">\"</span><span class="string">), 'editAreaButtonDisabled', true);};EA.prototype.check_redo=function(){if(eA.next.length &gt; 0 &amp;&amp; eA.textarea.value!=eA.last_undo){eA.next=new Array();eA.switchClassSticky(document.getElementById(</span><span class="special">\"</span><span class="string">redo</span><span class="special">\"</span><span class="string">), 'editAreaButtonDisabled', true);}};EA.prototype.switchClass=function(element, class_name, lock_state){var lockChanged=false;if (typeof(lock_state) !=</span><span class="special">\"</span><span class="string">undefined</span><span class="special">\"</span><span class="string"> &amp;&amp; element !=null){element.classLock=lock_state;lockChanged=true;}if (element !=null &amp;&amp; (lockChanged || !element.classLock)){element.oldClassName=element.className;element.className=class_name;}};EA.prototype.restoreAndSwitchClass=function(element, class_name){if (element !=null &amp;&amp; !element.classLock){this.restoreClass(element);this.switchClass(element, class_name);}};EA.prototype.restoreClass=function(element){if (element !=null &amp;&amp; element.oldClassName &amp;&amp; !element.classLock){element.className=element.oldClassName;element.oldClassName=null;}};EA.prototype.setClassLock=function(element, lock_state){if (element !=null) element.classLock=lock_state;};EA.prototype.switchClassSticky=function(element, class_name, lock_state){var lockChanged=false;if (typeof(lock_state) !=</span><span class="special">\"</span><span class="string">undefined</span><span class="special">\"</span><span class="string"> &amp;&amp; element !=null){element.classLock=lock_state;lockChanged=true;}if (element !=null &amp;&amp; (lockChanged || !element.classLock)){element.className=class_name;element.oldClassName=class_name;if (this.nav['isOpera']){if (class_name==</span><span class="special">\"</span><span class="string">mceButtonDisabled</span><span class="special">\"</span><span class="string">){var suffix=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;if (!element.mceOldSrc) element.mceOldSrc=element.src;if (this.operaOpacityCounter &gt; -1) suffix='?rnd=' + this.operaOpacityCounter++;element.src=this.baseURL + </span><span class="special">\"</span><span class="string">/images/opacity.png</span><span class="special">\"</span><span class="string">;element.style.backgroundImage=</span><span class="special">\"</span><span class="string">url('</span><span class="special">\"</span><span class="string"> + element.mceOldSrc + </span><span class="special">\"</span><span class="string">')</span><span class="special">\"</span><span class="string">;}</span><span class="special">\n</span><span class="string">else{if (element.mceOldSrc){element.src=element.mceOldSrc;element.parentNode.style.backgroundImage=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;element.mceOldSrc=null;}}}}};EA.prototype.scroll_page=function(params){var dir=params[</span><span class="special">\"</span><span class="string">dir</span><span class="special">\"</span><span class="string">];var shift_pressed=params[</span><span class="special">\"</span><span class="string">shift</span><span class="special">\"</span><span class="string">];screen_height=document.getElementById(</span><span class="special">\"</span><span class="string">result</span><span class="special">\"</span><span class="string">).clientHeight;var lines=this.textarea.value.split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">);var new_pos=0;var length=0;var char_left=0;var line_nb=0;if(dir==</span><span class="special">\"</span><span class="string">up</span><span class="special">\"</span><span class="string">){var scroll_line=Math.ceil((screen_height -30)/this.lineHeight);if(this.last_selection[</span><span class="special">\"</span><span class="string">selec_direction</span><span class="special">\"</span><span class="string">]==</span><span class="special">\"</span><span class="string">up</span><span class="special">\"</span><span class="string">){for(line_nb=0;line_nb&lt; Math.min(this.last_selection[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">]-scroll_line, lines.length);line_nb++){new_pos+=lines[line_nb].length + 1;}char_left=Math.min(lines[Math.min(lines.length-1, line_nb)].length, this.last_selection[</span><span class="special">\"</span><span class="string">curr_pos</span><span class="special">\"</span><span class="string">]-1);if(shift_pressed) length=this.last_selection[</span><span class="special">\"</span><span class="string">selectionEnd</span><span class="special">\"</span><span class="string">]-new_pos-char_left;this.area_select(new_pos+char_left, length);view=</span><span class="special">\"</span><span class="string">top</span><span class="special">\"</span><span class="string">;}</span><span class="special">\n</span><span class="string">else{view=</span><span class="special">\"</span><span class="string">bottom</span><span class="special">\"</span><span class="string">;for(line_nb=0;line_nb&lt; Math.min(this.last_selection[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">]+this.last_selection[</span><span class="special">\"</span><span class="string">line_nb</span><span class="special">\"</span><span class="string">]-1-scroll_line, lines.length);line_nb++){new_pos+=lines[line_nb].length + 1;}char_left=Math.min(lines[Math.min(lines.length-1, line_nb)].length, this.last_selection[</span><span class="special">\"</span><span class="string">curr_pos</span><span class="special">\"</span><span class="string">]-1);if(shift_pressed){start=Math.min(this.last_selection[</span><span class="special">\"</span><span class="string">selectionStart</span><span class="special">\"</span><span class="string">], new_pos+char_left);length=Math.max(new_pos+char_left, this.last_selection[</span><span class="special">\"</span><span class="string">selectionStart</span><span class="special">\"</span><span class="string">] )- start;if(new_pos+char_left &lt; this.last_selection[</span><span class="special">\"</span><span class="string">selectionStart</span><span class="special">\"</span><span class="string">]) view=</span><span class="special">\"</span><span class="string">top</span><span class="special">\"</span><span class="string">;}</span><span class="special">\n</span><span class="string">else start=new_pos+char_left;this.area_select(start, length);}}</span><span class="special">\n</span><span class="string">else{var scroll_line=Math.floor((screen_height-30)/this.lineHeight);if(this.last_selection[</span><span class="special">\"</span><span class="string">selec_direction</span><span class="special">\"</span><span class="string">]==</span><span class="special">\"</span><span class="string">down</span><span class="special">\"</span><span class="string">){view=</span><span class="special">\"</span><span class="string">bottom</span><span class="special">\"</span><span class="string">;for(line_nb=0;line_nb&lt; Math.min(this.last_selection[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">]+this.last_selection[</span><span class="special">\"</span><span class="string">line_nb</span><span class="special">\"</span><span class="string">]-2+scroll_line, lines.length);line_nb++){if(line_nb==this.last_selection[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">]-1) char_left=this.last_selection[</span><span class="special">\"</span><span class="string">selectionStart</span><span class="special">\"</span><span class="string">] -new_pos;new_pos+=lines[line_nb].length + 1;}if(shift_pressed){length=Math.abs(this.last_selection[</span><span class="special">\"</span><span class="string">selectionStart</span><span class="special">\"</span><span class="string">]-new_pos);length+=Math.min(lines[Math.min(lines.length-1, line_nb)].length, this.last_selection[</span><span class="special">\"</span><span class="string">curr_pos</span><span class="special">\"</span><span class="string">]);this.area_select(Math.min(this.last_selection[</span><span class="special">\"</span><span class="string">selectionStart</span><span class="special">\"</span><span class="string">], new_pos), length);}</span><span class="special">\n</span><span class="string">else{this.area_select(new_pos+char_left, 0);}}</span><span class="special">\n</span><span class="string">else{view=</span><span class="special">\"</span><span class="string">top</span><span class="special">\"</span><span class="string">;for(line_nb=0;line_nb&lt; Math.min(this.last_selection[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">]+scroll_line-1, lines.length, lines.length);line_nb++){if(line_nb==this.last_selection[</span><span class="special">\"</span><span class="string">line_start</span><span class="special">\"</span><span class="string">]-1) char_left=this.last_selection[</span><span class="special">\"</span><span class="string">selectionStart</span><span class="special">\"</span><span class="string">] -new_pos;new_pos+=lines[line_nb].length + 1;}if(shift_pressed){length=Math.abs(this.last_selection[</span><span class="special">\"</span><span class="string">selectionEnd</span><span class="special">\"</span><span class="string">]-new_pos-char_left);length+=Math.min(lines[Math.min(lines.length-1, line_nb)].length, this.last_selection[</span><span class="special">\"</span><span class="string">curr_pos</span><span class="special">\"</span><span class="string">])- char_left-1;this.area_select(Math.min(this.last_selection[</span><span class="special">\"</span><span class="string">selectionEnd</span><span class="special">\"</span><span class="string">], new_pos+char_left), length);if(new_pos+char_left &gt; this.last_selection[</span><span class="special">\"</span><span class="string">selectionEnd</span><span class="special">\"</span><span class="string">]) view=</span><span class="special">\"</span><span class="string">bottom</span><span class="special">\"</span><span class="string">;}</span><span class="special">\n</span><span class="string">else{this.area_select(new_pos+char_left, 0);}}}this.check_line_selection();this.scroll_to_view(view);};EA.prototype.start_resize=function(e){parent.eAL.resize[</span><span class="special">\"</span><span class="string">id</span><span class="special">\"</span><span class="string">]=eA.id;parent.eAL.resize[</span><span class="special">\"</span><span class="string">start_x</span><span class="special">\"</span><span class="string">]=(e)? e.pageX : event.x + document.body.scrollLeft;parent.eAL.resize[</span><span class="special">\"</span><span class="string">start_y</span><span class="special">\"</span><span class="string">]=(e)? e.pageY : event.y + document.body.scrollTop;if(eA.nav['isIE']){eA.textarea.focus();eA.getIESelection();}parent.eAL.resize[</span><span class="special">\"</span><span class="string">selectionStart</span><span class="special">\"</span><span class="string">]=eA.textarea.selectionStart;parent.eAL.resize[</span><span class="special">\"</span><span class="string">selectionEnd</span><span class="special">\"</span><span class="string">]=eA.textarea.selectionEnd;parent.eAL.start_resize_area();};EA.prototype.toggle_full_screen=function(to){if(typeof(to)==</span><span class="special">\"</span><span class="string">undefined</span><span class="special">\"</span><span class="string">) to=!this.fullscreen['isFull'];var old=this.fullscreen['isFull'];this.fullscreen['isFull']=to;var icon=document.getElementById(</span><span class="special">\"</span><span class="string">fullscreen</span><span class="special">\"</span><span class="string">);if(to &amp;&amp; to!=old){var selStart=this.textarea.selectionStart;var selEnd=this.textarea.selectionEnd;var html=parent.document.getElementsByTagName(</span><span class="special">\"</span><span class="string">html</span><span class="special">\"</span><span class="string">)[0];var frame=parent.document.getElementById(</span><span class="special">\"</span><span class="string">frame_</span><span class="special">\"</span><span class="string">+this.id);this.fullscreen['old_overflow']=parent.get_css_property(html, </span><span class="special">\"</span><span class="string">overflow</span><span class="special">\"</span><span class="string">);this.fullscreen['old_height']=parent.get_css_property(html, </span><span class="special">\"</span><span class="string">height</span><span class="special">\"</span><span class="string">);this.fullscreen['old_width']=parent.get_css_property(html, </span><span class="special">\"</span><span class="string">width</span><span class="special">\"</span><span class="string">);this.fullscreen['old_scrollTop']=html.scrollTop;this.fullscreen['old_scrollLeft']=html.scrollLeft;this.fullscreen['old_zIndex']=parent.get_css_property(frame, </span><span class="special">\"</span><span class="string">z-index</span><span class="special">\"</span><span class="string">);if(this.nav['isOpera']){html.style.height=</span><span class="special">\"</span><span class="string">100%</span><span class="special">\"</span><span class="string">;html.style.width=</span><span class="special">\"</span><span class="string">100%</span><span class="special">\"</span><span class="string">;}html.style.overflow=</span><span class="special">\"</span><span class="string">hidden</span><span class="special">\"</span><span class="string">;html.scrollTop=0;html.scrollLeft=0;frame.style.position=</span><span class="special">\"</span><span class="string">absolute</span><span class="special">\"</span><span class="string">;frame.style.width=html.clientWidth+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;frame.style.height=html.clientHeight+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;frame.style.display=</span><span class="special">\"</span><span class="string">block</span><span class="special">\"</span><span class="string">;frame.style.zIndex=</span><span class="special">\"</span><span class="string">999999</span><span class="special">\"</span><span class="string">;frame.style.top=</span><span class="special">\"</span><span class="string">0px</span><span class="special">\"</span><span class="string">;frame.style.left=</span><span class="special">\"</span><span class="string">0px</span><span class="special">\"</span><span class="string">;frame.style.top=</span><span class="special">\"</span><span class="string">-</span><span class="special">\"</span><span class="string">+parent.calculeOffsetTop(frame)+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;frame.style.left=</span><span class="special">\"</span><span class="string">-</span><span class="special">\"</span><span class="string">+parent.calculeOffsetLeft(frame)+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;this.switchClassSticky(icon, 'editAreaButtonSelected', false);this.fullscreen['allow_resize']=this.resize_allowed;this.allow_resize(false);if(this.nav['isFirefox']){parent.eAL.execCommand(this.id, </span><span class="special">\"</span><span class="string">update_size();</span><span class="special">\"</span><span class="string">);this.area_select(selStart, selEnd-selStart);this.scroll_to_view();this.focus();}</span><span class="special">\n</span><span class="string">else{setTimeout(</span><span class="special">\"</span><span class="string">parent.eAL.execCommand('</span><span class="special">\"</span><span class="string">+ this.id +</span><span class="special">\"</span><span class="string">', 'update_size();');eA.focus();</span><span class="special">\"</span><span class="string">, 10);}}</span><span class="special">\n</span><span class="string">else if(to!=old){var selStart=this.textarea.selectionStart;var selEnd=this.textarea.selectionEnd;var frame=parent.document.getElementById(</span><span class="special">\"</span><span class="string">frame_</span><span class="special">\"</span><span class="string">+this.id);frame.style.position=</span><span class="special">\"</span><span class="string">static</span><span class="special">\"</span><span class="string">;frame.style.zIndex=this.fullscreen['old_zIndex'];var html=parent.document.getElementsByTagName(</span><span class="special">\"</span><span class="string">html</span><span class="special">\"</span><span class="string">)[0];if(this.nav['isOpera']){html.style.height=</span><span class="special">\"</span><span class="string">auto</span><span class="special">\"</span><span class="string">;html.style.width=</span><span class="special">\"</span><span class="string">auto</span><span class="special">\"</span><span class="string">;html.style.overflow=</span><span class="special">\"</span><span class="string">auto</span><span class="special">\"</span><span class="string">;}</span><span class="special">\n</span><span class="string">else if(this.nav['isIE'] &amp;&amp; parent!=top){html.style.overflow=</span><span class="special">\"</span><span class="string">auto</span><span class="special">\"</span><span class="string">;}</span><span class="special">\n</span><span class="string">else html.style.overflow=this.fullscreen['old_overflow'];html.scrollTop=this.fullscreen['old_scrollTop'];html.scrollTop=this.fullscreen['old_scrollLeft'];parent.eAL.hide(this.id);parent.eAL.show(this.id);this.switchClassSticky(icon, 'editAreaButtonNormal', false);if(this.fullscreen['allow_resize']) this.allow_resize(this.fullscreen['allow_resize']);if(this.nav['isFirefox']){this.area_select(selStart, selEnd-selStart);setTimeout(</span><span class="special">\"</span><span class="string">eA.scroll_to_view();</span><span class="special">\"</span><span class="string">, 10);}}};EA.prototype.allow_resize=function(allow){var resize=document.getElementById(</span><span class="special">\"</span><span class="string">resize_area</span><span class="special">\"</span><span class="string">);if(allow){resize.style.visibility=</span><span class="special">\"</span><span class="string">visible</span><span class="special">\"</span><span class="string">;parent.eAL.add_event(resize, </span><span class="special">\"</span><span class="string">mouseup</span><span class="special">\"</span><span class="string">, eA.start_resize);}</span><span class="special">\n</span><span class="string">else{resize.style.visibility=</span><span class="special">\"</span><span class="string">hidden</span><span class="special">\"</span><span class="string">;parent.eAL.remove_event(resize, </span><span class="special">\"</span><span class="string">mouseup</span><span class="special">\"</span><span class="string">, eA.start_resize);}this.resize_allowed=allow;};var clavier_cds=new Object(146);clavier_cds[8]=</span><span class="special">\"</span><span class="string">Retour arriere</span><span class="special">\"</span><span class="string">;clavier_cds[9]=</span><span class="special">\"</span><span class="string">Tabulation</span><span class="special">\"</span><span class="string">;clavier_cds[12]=</span><span class="special">\"</span><span class="string">Milieu (pave numerique)</span><span class="special">\"</span><span class="string">;clavier_cds[13]=</span><span class="special">\"</span><span class="string">Entrer</span><span class="special">\"</span><span class="string">;clavier_cds[16]=</span><span class="special">\"</span><span class="string">Shift</span><span class="special">\"</span><span class="string">;clavier_cds[17]=</span><span class="special">\"</span><span class="string">Ctrl</span><span class="special">\"</span><span class="string">;clavier_cds[18]=</span><span class="special">\"</span><span class="string">Alt</span><span class="special">\"</span><span class="string">;clavier_cds[19]=</span><span class="special">\"</span><span class="string">Pause</span><span class="special">\"</span><span class="string">;clavier_cds[20]=</span><span class="special">\"</span><span class="string">Verr Maj</span><span class="special">\"</span><span class="string">;clavier_cds[27]=</span><span class="special">\"</span><span class="string">Esc</span><span class="special">\"</span><span class="string">;clavier_cds[32]=</span><span class="special">\"</span><span class="string">Espace</span><span class="special">\"</span><span class="string">;clavier_cds[33]=</span><span class="special">\"</span><span class="string">Page up</span><span class="special">\"</span><span class="string">;clavier_cds[34]=</span><span class="special">\"</span><span class="string">Page down</span><span class="special">\"</span><span class="string">;clavier_cds[35]=</span><span class="special">\"</span><span class="string">End</span><span class="special">\"</span><span class="string">;clavier_cds[36]=</span><span class="special">\"</span><span class="string">Begin</span><span class="special">\"</span><span class="string">;clavier_cds[37]=</span><span class="special">\"</span><span class="string">Fleche gauche</span><span class="special">\"</span><span class="string">;clavier_cds[38]=</span><span class="special">\"</span><span class="string">Fleche haut</span><span class="special">\"</span><span class="string">;clavier_cds[39]=</span><span class="special">\"</span><span class="string">Fleche droite</span><span class="special">\"</span><span class="string">;clavier_cds[40]=</span><span class="special">\"</span><span class="string">Fleche bas</span><span class="special">\"</span><span class="string">;clavier_cds[44]=</span><span class="special">\"</span><span class="string">Impr ecran</span><span class="special">\"</span><span class="string">;clavier_cds[45]=</span><span class="special">\"</span><span class="string">Inser</span><span class="special">\"</span><span class="string">;clavier_cds[46]=</span><span class="special">\"</span><span class="string">Suppr</span><span class="special">\"</span><span class="string">;clavier_cds[91]=</span><span class="special">\"</span><span class="string">Menu Demarrer Windows / touche pomme Mac</span><span class="special">\"</span><span class="string">;clavier_cds[92]=</span><span class="special">\"</span><span class="string">Menu Demarrer Windows</span><span class="special">\"</span><span class="string">;clavier_cds[93]=</span><span class="special">\"</span><span class="string">Menu contextuel Windows</span><span class="special">\"</span><span class="string">;clavier_cds[112]=</span><span class="special">\"</span><span class="string">F1</span><span class="special">\"</span><span class="string">;clavier_cds[113]=</span><span class="special">\"</span><span class="string">F2</span><span class="special">\"</span><span class="string">;clavier_cds[114]=</span><span class="special">\"</span><span class="string">F3</span><span class="special">\"</span><span class="string">;clavier_cds[115]=</span><span class="special">\"</span><span class="string">F4</span><span class="special">\"</span><span class="string">;clavier_cds[116]=</span><span class="special">\"</span><span class="string">F5</span><span class="special">\"</span><span class="string">;clavier_cds[117]=</span><span class="special">\"</span><span class="string">F6</span><span class="special">\"</span><span class="string">;clavier_cds[118]=</span><span class="special">\"</span><span class="string">F7</span><span class="special">\"</span><span class="string">;clavier_cds[119]=</span><span class="special">\"</span><span class="string">F8</span><span class="special">\"</span><span class="string">;clavier_cds[120]=</span><span class="special">\"</span><span class="string">F9</span><span class="special">\"</span><span class="string">;clavier_cds[121]=</span><span class="special">\"</span><span class="string">F10</span><span class="special">\"</span><span class="string">;clavier_cds[122]=</span><span class="special">\"</span><span class="string">F11</span><span class="special">\"</span><span class="string">;clavier_cds[123]=</span><span class="special">\"</span><span class="string">F12</span><span class="special">\"</span><span class="string">;clavier_cds[144]=</span><span class="special">\"</span><span class="string">Verr Num</span><span class="special">\"</span><span class="string">;clavier_cds[145]=</span><span class="special">\"</span><span class="string">Arret defil</span><span class="special">\"</span><span class="string">;function keyDown(e){if(!e){e=event;}for(var i in eA.plugins){if(typeof(eA.plugins[i].onkeydown)==</span><span class="special">\"</span><span class="string">function</span><span class="special">\"</span><span class="string">){if(eA.plugins[i].onkeydown(e)===false){if(eA.nav['isIE']) e.keyCode=0;return false;}}}var target_id=(e.target || e.srcElement).id;var use=false;if (clavier_cds[e.keyCode]) letter=clavier_cds[e.keyCode];</span><span class="special">\n</span><span class="string">else letter=String.fromCharCode(e.keyCode);var low_letter=letter.toLowerCase();if(letter==</span><span class="special">\"</span><span class="string">Tabulation</span><span class="special">\"</span><span class="string"> &amp;&amp; target_id==</span><span class="special">\"</span><span class="string">textarea</span><span class="special">\"</span><span class="string"> &amp;&amp; !CtrlPressed(e) &amp;&amp; !AltPressed(e)){if(ShiftPressed(e)) eA.execCommand(</span><span class="special">\"</span><span class="string">invert_tab_selection</span><span class="special">\"</span><span class="string">);</span><span class="special">\n</span><span class="string">else eA.execCommand(</span><span class="special">\"</span><span class="string">tab_selection</span><span class="special">\"</span><span class="string">);use=true;if(eA.nav['isOpera']) setTimeout(</span><span class="special">\"</span><span class="string">eA.execCommand('focus');</span><span class="special">\"</span><span class="string">, 1);}</span><span class="special">\n</span><span class="string">else if(letter==</span><span class="special">\"</span><span class="string">Entrer</span><span class="special">\"</span><span class="string"> &amp;&amp; target_id==</span><span class="special">\"</span><span class="string">textarea</span><span class="special">\"</span><span class="string">){if(eA.press_enter()) use=true;}</span><span class="special">\n</span><span class="string">else if(letter==</span><span class="special">\"</span><span class="string">Entrer</span><span class="special">\"</span><span class="string"> &amp;&amp; target_id==</span><span class="special">\"</span><span class="string">area_search</span><span class="special">\"</span><span class="string">){eA.execCommand(</span><span class="special">\"</span><span class="string">area_search</span><span class="special">\"</span><span class="string">);use=true;}</span><span class="special">\n</span><span class="string">else if(letter==</span><span class="special">\"</span><span class="string">Page up</span><span class="special">\"</span><span class="string"> &amp;&amp; !eA.nav['isOpera']){eA.execCommand(</span><span class="special">\"</span><span class="string">scroll_page</span><span class="special">\"</span><span class="string">, {</span><span class="special">\"</span><span class="string">dir</span><span class="special">\"</span><span class="string">: </span><span class="special">\"</span><span class="string">up</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">shift</span><span class="special">\"</span><span class="string">: ShiftPressed(e)});use=true;}</span><span class="special">\n</span><span class="string">else if(letter==</span><span class="special">\"</span><span class="string">Page down</span><span class="special">\"</span><span class="string"> &amp;&amp; !eA.nav['isOpera']){eA.execCommand(</span><span class="special">\"</span><span class="string">scroll_page</span><span class="special">\"</span><span class="string">, {</span><span class="special">\"</span><span class="string">dir</span><span class="special">\"</span><span class="string">: </span><span class="special">\"</span><span class="string">down</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">shift</span><span class="special">\"</span><span class="string">: ShiftPressed(e)});use=true;}</span><span class="special">\n</span><span class="string">else if(letter==</span><span class="special">\"</span><span class="string">Esc</span><span class="special">\"</span><span class="string">){eA.execCommand(</span><span class="special">\"</span><span class="string">close_all_inline_popup</span><span class="special">\"</span><span class="string">, e);use=true;}</span><span class="special">\n</span><span class="string">else if(CtrlPressed(e) &amp;&amp; !AltPressed(e) &amp;&amp; !ShiftPressed(e)){switch(low_letter){case </span><span class="special">\"</span><span class="string">f</span><span class="special">\"</span><span class="string">: eA.execCommand(</span><span class="special">\"</span><span class="string">area_search</span><span class="special">\"</span><span class="string">);use=true;break;case </span><span class="special">\"</span><span class="string">r</span><span class="special">\"</span><span class="string">: eA.execCommand(</span><span class="special">\"</span><span class="string">area_replace</span><span class="special">\"</span><span class="string">);use=true;break;case </span><span class="special">\"</span><span class="string">q</span><span class="special">\"</span><span class="string">: eA.execCommand(</span><span class="special">\"</span><span class="string">close_all_inline_popup</span><span class="special">\"</span><span class="string">, e);use=true;break;case </span><span class="special">\"</span><span class="string">h</span><span class="special">\"</span><span class="string">: eA.execCommand(</span><span class="special">\"</span><span class="string">change_highlight</span><span class="special">\"</span><span class="string">);use=true;break;case </span><span class="special">\"</span><span class="string">g</span><span class="special">\"</span><span class="string">: setTimeout(</span><span class="special">\"</span><span class="string">eA.execCommand('go_to_line');</span><span class="special">\"</span><span class="string">, 5);use=true;break;case </span><span class="special">\"</span><span class="string">e</span><span class="special">\"</span><span class="string">: eA.execCommand(</span><span class="special">\"</span><span class="string">show_help</span><span class="special">\"</span><span class="string">);use=true;break;case </span><span class="special">\"</span><span class="string">z</span><span class="special">\"</span><span class="string">: use=true;eA.execCommand(</span><span class="special">\"</span><span class="string">undo</span><span class="special">\"</span><span class="string">);break;case </span><span class="special">\"</span><span class="string">y</span><span class="special">\"</span><span class="string">: use=true;eA.execCommand(</span><span class="special">\"</span><span class="string">redo</span><span class="special">\"</span><span class="string">);break;default: break;}}if(eA.next.length &gt; 0){setTimeout(</span><span class="special">\"</span><span class="string">eA.check_redo();</span><span class="special">\"</span><span class="string">, 10);}if(use){if(eA.nav['isIE']) e.keyCode=0;return false;}return true;};function AltPressed(e){if (window.event){return (window.event.altKey);}</span><span class="special">\n</span><span class="string">else{if(e.modifiers) return (e.altKey || (e.modifiers % 2));</span><span class="special">\n</span><span class="string">else return e.altKey;}};function CtrlPressed(e){if (window.event){return (window.event.ctrlKey);}</span><span class="special">\n</span><span class="string">else{return (e.ctrlKey || (e.modifiers==2) || (e.modifiers==3) || (e.modifiers&gt;5));}};function ShiftPressed(e){if (window.event){return (window.event.shiftKey);}</span><span class="special">\n</span><span class="string">else{return (e.shiftKey || (e.modifiers&gt;3));}};    EA.prototype.show_search=function(){if(document.getElementById(</span><span class="special">\"</span><span class="string">area_search_replace</span><span class="special">\"</span><span class="string">).style.visibility==</span><span class="special">\"</span><span class="string">visible</span><span class="special">\"</span><span class="string">){this.hidden_search();}</span><span class="special">\n</span><span class="string">else{this.open_inline_popup(</span><span class="special">\"</span><span class="string">area_search_replace</span><span class="special">\"</span><span class="string">);var text=this.area_get_selection();var search=text.split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">)[0];document.getElementById(</span><span class="special">\"</span><span class="string">area_search</span><span class="special">\"</span><span class="string">).value=search;document.getElementById(</span><span class="special">\"</span><span class="string">area_search</span><span class="special">\"</span><span class="string">).focus();}};EA.prototype.hidden_search=function(){this.close_inline_popup(</span><span class="special">\"</span><span class="string">area_search_replace</span><span class="special">\"</span><span class="string">);};EA.prototype.area_search=function(mode){if(!mode) mode=</span><span class="special">\"</span><span class="string">search</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">area_search_msg</span><span class="special">\"</span><span class="string">).innerHTML=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;var search=document.getElementById(</span><span class="special">\"</span><span class="string">area_search</span><span class="special">\"</span><span class="string">).value;this.textarea.focus();this.textarea.textareaFocused=true;var infos=this.get_selection_infos();var start=infos[</span><span class="special">\"</span><span class="string">selectionStart</span><span class="special">\"</span><span class="string">];var pos=-1;var pos_begin=-1;var length=search.length;if(document.getElementById(</span><span class="special">\"</span><span class="string">area_search_replace</span><span class="special">\"</span><span class="string">).style.visibility!=</span><span class="special">\"</span><span class="string">visible</span><span class="special">\"</span><span class="string">){this.show_search();return;}if(search.length==0){document.getElementById(</span><span class="special">\"</span><span class="string">area_search_msg</span><span class="special">\"</span><span class="string">).innerHTML=this.get_translation(</span><span class="special">\"</span><span class="string">search_field_empty</span><span class="special">\"</span><span class="string">);return;}if(mode!=</span><span class="special">\"</span><span class="string">replace</span><span class="special">\"</span><span class="string"> ){if(document.getElementById(</span><span class="special">\"</span><span class="string">area_search_reg_exp</span><span class="special">\"</span><span class="string">).checked) start++;</span><span class="special">\n</span><span class="string">else start+=search.length;}if(document.getElementById(</span><span class="special">\"</span><span class="string">area_search_reg_exp</span><span class="special">\"</span><span class="string">).checked){var opt=</span><span class="special">\"</span><span class="string">m</span><span class="special">\"</span><span class="string">;if(!document.getElementById(</span><span class="special">\"</span><span class="string">area_search_match_case</span><span class="special">\"</span><span class="string">).checked) opt+=</span><span class="special">\"</span><span class="string">i</span><span class="special">\"</span><span class="string">;var reg=new RegExp(search, opt);pos=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].substr(start).search(reg);pos_begin=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].search(reg);if(pos!=-1){pos+=start;length=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].substr(start).match(reg)[0].length;}</span><span class="special">\n</span><span class="string">else if(pos_begin!=-1){length=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].match(reg)[0].length;}}</span><span class="special">\n</span><span class="string">else{if(document.getElementById(</span><span class="special">\"</span><span class="string">area_search_match_case</span><span class="special">\"</span><span class="string">).checked){pos=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].indexOf(search, start);pos_begin=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].indexOf(search);}</span><span class="special">\n</span><span class="string">else{pos=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].toLowerCase().indexOf(search.toLowerCase(), start);pos_begin=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].toLowerCase().indexOf(search.toLowerCase());}}if(pos==-1 &amp;&amp; pos_begin==-1){document.getElementById(</span><span class="special">\"</span><span class="string">area_search_msg</span><span class="special">\"</span><span class="string">).innerHTML=</span><span class="special">\"</span><span class="string">&lt;strong&gt;</span><span class="special">\"</span><span class="string">+search+</span><span class="special">\"</span><span class="string">&lt;/strong&gt; </span><span class="special">\"</span><span class="string">+this.get_translation(</span><span class="special">\"</span><span class="string">not_found</span><span class="special">\"</span><span class="string">);return;}</span><span class="special">\n</span><span class="string">else if(pos==-1 &amp;&amp; pos_begin !=-1){begin=pos_begin;document.getElementById(</span><span class="special">\"</span><span class="string">area_search_msg</span><span class="special">\"</span><span class="string">).innerHTML=this.get_translation(</span><span class="special">\"</span><span class="string">restart_search_at_begin</span><span class="special">\"</span><span class="string">);}</span><span class="special">\n</span><span class="string">else begin=pos;if(mode==</span><span class="special">\"</span><span class="string">replace</span><span class="special">\"</span><span class="string"> &amp;&amp; pos==infos[</span><span class="special">\"</span><span class="string">indexOfCursor</span><span class="special">\"</span><span class="string">]){var replace=document.getElementById(</span><span class="special">\"</span><span class="string">area_replace</span><span class="special">\"</span><span class="string">).value;var new_text=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;if(document.getElementById(</span><span class="special">\"</span><span class="string">area_search_reg_exp</span><span class="special">\"</span><span class="string">).checked){var opt=</span><span class="special">\"</span><span class="string">m</span><span class="special">\"</span><span class="string">;if(!document.getElementById(</span><span class="special">\"</span><span class="string">area_search_match_case</span><span class="special">\"</span><span class="string">).checked) opt+=</span><span class="special">\"</span><span class="string">i</span><span class="special">\"</span><span class="string">;var reg=new RegExp(search, opt);new_text=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].substr(0, begin) + infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].substr(start).replace(reg, replace);}</span><span class="special">\n</span><span class="string">else{new_text=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].substr(0, begin) + replace + infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].substr(begin + length);}this.textarea.value=new_text;this.area_select(begin, length);this.area_search();}</span><span class="special">\n</span><span class="string">else this.area_select(begin, length);};EA.prototype.area_replace=function(){this.area_search(</span><span class="special">\"</span><span class="string">replace</span><span class="special">\"</span><span class="string">);};EA.prototype.area_replace_all=function(){var base_text=this.textarea.value;var search=document.getElementById(</span><span class="special">\"</span><span class="string">area_search</span><span class="special">\"</span><span class="string">).value;var replace=document.getElementById(</span><span class="special">\"</span><span class="string">area_replace</span><span class="special">\"</span><span class="string">).value;if(search.length==0){document.getElementById(</span><span class="special">\"</span><span class="string">area_search_msg</span><span class="special">\"</span><span class="string">).innerHTML=this.get_translation(</span><span class="special">\"</span><span class="string">search_field_empty</span><span class="special">\"</span><span class="string">);return;}var new_text=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;var nb_change=0;if(document.getElementById(</span><span class="special">\"</span><span class="string">area_search_reg_exp</span><span class="special">\"</span><span class="string">).checked){var opt=</span><span class="special">\"</span><span class="string">mg</span><span class="special">\"</span><span class="string">;if(!document.getElementById(</span><span class="special">\"</span><span class="string">area_search_match_case</span><span class="special">\"</span><span class="string">).checked) opt+=</span><span class="special">\"</span><span class="string">i</span><span class="special">\"</span><span class="string">;var reg=new RegExp(search, opt);nb_change=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].match(reg).length;new_text=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].replace(reg, replace);}</span><span class="special">\n</span><span class="string">else{if(document.getElementById(</span><span class="special">\"</span><span class="string">area_search_match_case</span><span class="special">\"</span><span class="string">).checked){var tmp_tab=base_text.split(search);nb_change=tmp_tab.length -1;new_text=tmp_tab.join(replace);}</span><span class="special">\n</span><span class="string">else{var lower_value=base_text.toLowerCase();var lower_search=search.toLowerCase();var start=0;var pos=lower_value.indexOf(lower_search);while(pos!=-1){nb_change++;new_text+=this.textarea.value.substring(start , pos)+replace;start=pos+ search.length;pos=lower_value.indexOf(lower_search, pos+1);}new_text+=this.textarea.value.substring(start);}}if(new_text==base_text){document.getElementById(</span><span class="special">\"</span><span class="string">area_search_msg</span><span class="special">\"</span><span class="string">).innerHTML=</span><span class="special">\"</span><span class="string">&lt;strong&gt;</span><span class="special">\"</span><span class="string">+search+</span><span class="special">\"</span><span class="string">&lt;/strong&gt; </span><span class="special">\"</span><span class="string">+this.get_translation(</span><span class="special">\"</span><span class="string">not_found</span><span class="special">\"</span><span class="string">);}</span><span class="special">\n</span><span class="string">else{this.textarea.value=new_text;document.getElementById(</span><span class="special">\"</span><span class="string">area_search_msg</span><span class="special">\"</span><span class="string">).innerHTML=</span><span class="special">\"</span><span class="string">&lt;strong&gt;</span><span class="special">\"</span><span class="string">+nb_change+</span><span class="special">\"</span><span class="string">&lt;/strong&gt; </span><span class="special">\"</span><span class="string">+this.get_translation(</span><span class="special">\"</span><span class="string">occurrence_replaced</span><span class="special">\"</span><span class="string">);setTimeout(</span><span class="special">\"</span><span class="string">eA.textarea.focus();eA.textarea.textareaFocused=true;</span><span class="special">\"</span><span class="string">, 100);}}; EA.prototype.change_highlight=function(change_to){if(this.settings[</span><span class="special">\"</span><span class="string">syntax</span><span class="special">\"</span><span class="string">].length==0){this.switchClassSticky(document.getElementById(</span><span class="special">\"</span><span class="string">highlight</span><span class="special">\"</span><span class="string">), 'editAreaButtonDisabled', true);this.switchClassSticky(document.getElementById(</span><span class="special">\"</span><span class="string">reset_highlight</span><span class="special">\"</span><span class="string">), 'editAreaButtonDisabled', true);return false;}if(this.nav['isIE']) this.getIESelection();var pos_start=this.textarea.selectionStart;var pos_end=this.textarea.selectionEnd;if(this.do_highlight===true || change_to==false) this.disable_highlight();</span><span class="special">\n</span><span class="string">else this.enable_highlight();this.textarea.focus();this.textarea.selectionStart=pos_start;this.textarea.selectionEnd=pos_end;if(this.nav['isIE']) this.setIESelection();};EA.prototype.disable_highlight=function(displayOnly){document.getElementById(</span><span class="special">\"</span><span class="string">selection_field</span><span class="special">\"</span><span class="string">).innerHTML=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;this.content_highlight.style.visibility=</span><span class="special">\"</span><span class="string">hidden</span><span class="special">\"</span><span class="string">;var new_Obj=this.content_highlight.cloneNode(false);new_Obj.innerHTML=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;this.content_highlight.parentNode.insertBefore(new_Obj, this.content_highlight);this.content_highlight.parentNode.removeChild(this.content_highlight);this.content_highlight=new_Obj;var old_class=parent.getAttribute(this.textarea,</span><span class="special">\"</span><span class="string">class</span><span class="special">\"</span><span class="string">);if(old_class){var new_class=old_class.replace(</span><span class="special">\"</span><span class="string">hidden</span><span class="special">\"</span><span class="string">,</span><span class="special">\"</span><span class="special">\"</span><span class="string">);parent.setAttribute(this.textarea, </span><span class="special">\"</span><span class="string">class</span><span class="special">\"</span><span class="string">, new_class);}this.textarea.style.backgroundColor=</span><span class="special">\"</span><span class="string">transparent</span><span class="special">\"</span><span class="string">;this.switchClassSticky(document.getElementById(</span><span class="special">\"</span><span class="string">highlight</span><span class="special">\"</span><span class="string">), 'editAreaButtonNormal', false);this.switchClassSticky(document.getElementById(</span><span class="special">\"</span><span class="string">reset_highlight</span><span class="special">\"</span><span class="string">), 'editAreaButtonDisabled', true);this.do_highlight=false;this.switchClassSticky(document.getElementById(</span><span class="special">\"</span><span class="string">change_smooth_selection</span><span class="special">\"</span><span class="string">), 'editAreaButtonSelected', true);if(typeof(this.smooth_selection_before_highlight)!=</span><span class="special">\"</span><span class="string">undefined</span><span class="special">\"</span><span class="string"> &amp;&amp; this.smooth_selection_before_highlight===false){this.change_smooth_selection_mode(false);}};EA.prototype.enable_highlight=function(){width=document.getElementById(</span><span class="special">\"</span><span class="string">editor</span><span class="special">\"</span><span class="string">).offsetWidth;height=document.getElementById(</span><span class="special">\"</span><span class="string">editor</span><span class="special">\"</span><span class="string">).offsetHeight;if(this.nav['isGecko'] || this.nav['isOpera'] || this.nav['isIE']&gt;=7){width-=2;height-=2;}if(this.textarea.value.length&gt;0){this.should_display_processing_screen=true;document.getElementById(</span><span class="special">\"</span><span class="string">processing</span><span class="special">\"</span><span class="string">).style.display=</span><span class="special">\"</span><span class="string">block</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">processing</span><span class="special">\"</span><span class="string">).style.width=width+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;document.getElementById(</span><span class="special">\"</span><span class="string">processing</span><span class="special">\"</span><span class="string">).style.height=height+</span><span class="special">\"</span><span class="string">px</span><span class="special">\"</span><span class="string">;}this.content_highlight.style.visibility=</span><span class="special">\"</span><span class="string">visible</span><span class="special">\"</span><span class="string">;var new_class=parent.getAttribute(this.textarea,</span><span class="special">\"</span><span class="string">class</span><span class="special">\"</span><span class="string">)+</span><span class="special">\"</span><span class="string"> hidden</span><span class="special">\"</span><span class="string">;parent.setAttribute(this.textarea, </span><span class="special">\"</span><span class="string">class</span><span class="special">\"</span><span class="string">, new_class);if(this.nav['isIE']) this.textarea.style.backgroundColor=</span><span class="special">\"</span><span class="string">#FFFFFF</span><span class="special">\"</span><span class="string">;this.switchClassSticky(document.getElementById(</span><span class="special">\"</span><span class="string">highlight</span><span class="special">\"</span><span class="string">), 'editAreaButtonSelected', false);this.switchClassSticky(document.getElementById(</span><span class="special">\"</span><span class="string">reset_highlight</span><span class="special">\"</span><span class="string">), 'editAreaButtonNormal', false);this.smooth_selection_before_highlight=this.smooth_selection;if(!this.smooth_selection) this.change_smooth_selection_mode(true);this.switchClassSticky(document.getElementById(</span><span class="special">\"</span><span class="string">change_smooth_selection</span><span class="special">\"</span><span class="string">), 'editAreaButtonDisabled', true);this.do_highlight=true;this.resync_highlight();};EA.prototype.maj_highlight=function(infos){if(this.last_highlight_base_text==infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">] &amp;&amp; this.resync_highlight!==true) return;if(infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].indexOf(</span><span class="special">\"</span><span class="special">\\</span><span class="string">r</span><span class="special">\"</span><span class="string">)!=-1) text_to_highlight=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].replace(/</span><span class="special">\\</span><span class="string">r/g, </span><span class="special">\"</span><span class="special">\"</span><span class="string">);</span><span class="special">\n</span><span class="string">else text_to_highlight=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">];var start_line_pb=-1;var end_line_pb=-1;var stay_begin=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;var stay_end=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;var debug_opti=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;var date=new Date();var tps_start=date.getTime();var tps_middle_opti=date.getTime();if(this.reload_highlight===true){this.reload_highlight=false;}</span><span class="special">\n</span><span class="string">else if(text_to_highlight.length==0){text_to_highlight=</span><span class="special">\"</span><span class="special">\\</span><span class="string">n </span><span class="special">\"</span><span class="string">;}</span><span class="special">\n</span><span class="string">else{var base_step=200;var cpt=0;var end=Math.min(text_to_highlight.length, this.last_text_to_highlight.length);var step=base_step;while(cpt&lt;end &amp;&amp; step&gt;=1){if(this.last_text_to_highlight.substr(cpt, step)==text_to_highlight.substr(cpt, step)){cpt+=step;}</span><span class="special">\n</span><span class="string">else{step=Math.floor(step/2);}}var pos_start_change=cpt;var line_start_change=text_to_highlight.substr(0, pos_start_change).split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">).length -1;cpt_last=this.last_text_to_highlight.length;cpt=text_to_highlight.length;step=base_step;while(cpt&gt;=0 &amp;&amp; cpt_last&gt;=0 &amp;&amp; step&gt;=1){if(this.last_text_to_highlight.substr(cpt_last-step, step)==text_to_highlight.substr(cpt-step, step)){cpt-=step;cpt_last-=step;}</span><span class="special">\n</span><span class="string">else{step=Math.floor(step/2);}}var pos_new_end_change=cpt;var pos_last_end_change=cpt_last;if(pos_new_end_change&lt;=pos_start_change){if(this.last_text_to_highlight.length &lt; text_to_highlight.length){pos_new_end_change=pos_start_change + text_to_highlight.length - this.last_text_to_highlight.length;pos_last_end_change=pos_start_change;}</span><span class="special">\n</span><span class="string">else{pos_last_end_change=pos_start_change + this.last_text_to_highlight.length - text_to_highlight.length;pos_new_end_change=pos_start_change;}}var change_new_text=text_to_highlight.substring(pos_start_change, pos_new_end_change);var change_last_text=this.last_text_to_highlight.substring(pos_start_change, pos_last_end_change);var line_new_end_change=text_to_highlight.substr(0, pos_new_end_change).split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">).length -1;var line_last_end_change=this.last_text_to_highlight.substr(0, pos_last_end_change).split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">).length -1;var change_new_text_line=text_to_highlight.split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">).slice(line_start_change, line_new_end_change+1).join(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">);var change_last_text_line=this.last_text_to_highlight.split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">).slice(line_start_change, line_last_end_change+1).join(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">);var trace_new=this.get_syntax_trace(change_new_text_line);var trace_last=this.get_syntax_trace(change_last_text_line);if(trace_new==trace_last){date=new Date();tps_middle_opti=date.getTime();stay_begin=this.last_hightlighted_text.split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">).slice(0, line_start_change).join(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">);if(line_start_change&gt;0) stay_begin+=</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">;stay_end=this.last_hightlighted_text.split(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">).slice(line_last_end_change+1).join(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">);if(stay_end.length&gt;0) stay_end=</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">+stay_end;if(stay_begin.length==0 &amp;&amp; pos_last_end_change==-1) change_new_text_line+=</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">;text_to_highlight=change_new_text_line;}if(this.settings[</span><span class="special">\"</span><span class="string">debug</span><span class="special">\"</span><span class="string">]){debug_opti=(trace_new==trace_last)?</span><span class="special">\"</span><span class="string">Optimisation</span><span class="special">\"</span><span class="string">: </span><span class="special">\"</span><span class="string">No optimisation</span><span class="special">\"</span><span class="string">;debug_opti+=</span><span class="special">\"</span><span class="string"> start: </span><span class="special">\"</span><span class="string">+pos_start_change +</span><span class="special">\"</span><span class="string">(</span><span class="special">\"</span><span class="string">+line_start_change+</span><span class="special">\"</span><span class="string">)</span><span class="special">\"</span><span class="string">;debug_opti+=</span><span class="special">\"</span><span class="string"> end_new: </span><span class="special">\"</span><span class="string">+ pos_new_end_change+</span><span class="special">\"</span><span class="string">(</span><span class="special">\"</span><span class="string">+line_new_end_change+</span><span class="special">\"</span><span class="string">)</span><span class="special">\"</span><span class="string">;debug_opti+=</span><span class="special">\"</span><span class="string"> end_last: </span><span class="special">\"</span><span class="string">+ pos_last_end_change+</span><span class="special">\"</span><span class="string">(</span><span class="special">\"</span><span class="string">+line_last_end_change+</span><span class="special">\"</span><span class="string">)</span><span class="special">\"</span><span class="string">;debug_opti+=</span><span class="special">\"</span><span class="special">\\</span><span class="string">nchanged_text: </span><span class="special">\"</span><span class="string">+change_new_text+</span><span class="special">\"</span><span class="string"> =&gt; trace: </span><span class="special">\"</span><span class="string">+trace_new;debug_opti+=</span><span class="special">\"</span><span class="special">\\</span><span class="string">nchanged_last_text: </span><span class="special">\"</span><span class="string">+change_last_text+</span><span class="special">\"</span><span class="string"> =&gt; trace: </span><span class="special">\"</span><span class="string">+trace_last;debug_opti+=</span><span class="special">\"</span><span class="special">\\</span><span class="string">nchanged_line: </span><span class="special">\"</span><span class="string">+change_new_text_line;debug_opti+=</span><span class="special">\"</span><span class="special">\\</span><span class="string">nlast_changed_line: </span><span class="special">\"</span><span class="string">+change_last_text_line;debug_opti+=</span><span class="special">\"</span><span class="special">\\</span><span class="string">nstay_begin: </span><span class="special">\"</span><span class="string">+ stay_begin.slice(-200);debug_opti+=</span><span class="special">\"</span><span class="special">\\</span><span class="string">nstay_end: </span><span class="special">\"</span><span class="string">+ stay_end;debug_opti+=</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">;}}date=new Date();tps_end_opti=date.getTime();var updated_highlight=this.colorize_text(text_to_highlight);date=new Date();tps2=date.getTime();var hightlighted_text=stay_begin + updated_highlight + stay_end;date=new Date();inner1=date.getTime();var new_Obj=this.content_highlight.cloneNode(false);if(this.nav['isIE'] || this.nav['isOpera']) new_Obj.innerHTML=</span><span class="special">\"</span><span class="string">&lt;pre&gt;&lt;span class='</span><span class="special">\"</span><span class="string">+ this.settings[</span><span class="special">\"</span><span class="string">syntax</span><span class="special">\"</span><span class="string">] +</span><span class="special">\"</span><span class="string">'&gt;</span><span class="special">\"</span><span class="string"> + hightlighted_text.replace(</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">&lt;br/&gt;</span><span class="special">\"</span><span class="string">) + </span><span class="special">\"</span><span class="string">&lt;/span&gt;&lt;/pre&gt;</span><span class="special">\"</span><span class="string">;</span><span class="special">\n</span><span class="string">else new_Obj.innerHTML=</span><span class="special">\"</span><span class="string">&lt;span class='</span><span class="special">\"</span><span class="string">+ this.settings[</span><span class="special">\"</span><span class="string">syntax</span><span class="special">\"</span><span class="string">] +</span><span class="special">\"</span><span class="string">'&gt;</span><span class="special">\"</span><span class="string">+ hightlighted_text +</span><span class="special">\"</span><span class="string">&lt;/span&gt;</span><span class="special">\"</span><span class="string">;this.content_highlight.parentNode.insertBefore(new_Obj, this.content_highlight);this.content_highlight.parentNode.removeChild(this.content_highlight);this.content_highlight=new_Obj;if(infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].indexOf(</span><span class="special">\"</span><span class="special">\\</span><span class="string">r</span><span class="special">\"</span><span class="string">)!=-1) this.last_text_to_highlight=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">].replace(/</span><span class="special">\\</span><span class="string">r/g, </span><span class="special">\"</span><span class="special">\"</span><span class="string">);</span><span class="special">\n</span><span class="string">else this.last_text_to_highlight=infos[</span><span class="special">\"</span><span class="string">full_text</span><span class="special">\"</span><span class="string">];this.last_hightlighted_text=hightlighted_text;date=new Date();tps3=date.getTime();if(this.settings[</span><span class="special">\"</span><span class="string">debug</span><span class="special">\"</span><span class="string">]){tot1=tps_end_opti-tps_start;tot_middle=tps_end_opti- tps_middle_opti;tot2=tps2-tps_end_opti;tps_join=inner1-tps2;tps_td2=tps3-inner1;this.debug.value=</span><span class="special">\"</span><span class="string">Tps optimisation </span><span class="special">\"</span><span class="string">+tot1+</span><span class="special">\"</span><span class="string"> (second part: </span><span class="special">\"</span><span class="string">+tot_middle+</span><span class="special">\"</span><span class="string">) | tps reg exp: </span><span class="special">\"</span><span class="string">+tot2+</span><span class="special">\"</span><span class="string"> | tps join: </span><span class="special">\"</span><span class="string">+tps_join;this.debug.value+=</span><span class="special">\"</span><span class="string"> | tps update highlight content: </span><span class="special">\"</span><span class="string">+tps_td2+</span><span class="special">\"</span><span class="string">(</span><span class="special">\"</span><span class="string">+tps3+</span><span class="special">\"</span><span class="string">)</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">;this.debug.value+=debug_opti;}if(this.should_display_processing_screen){this.should_display_processing_screen=false;document.getElementById(</span><span class="special">\"</span><span class="string">processing</span><span class="special">\"</span><span class="string">).style.display=</span><span class="special">\"</span><span class="string">none</span><span class="special">\"</span><span class="string">;}};EA.prototype.resync_highlight=function(reload_now){this.reload_highlight=true;this.last_highlight_base_text=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;this.focus();if(reload_now) this.check_line_selection(false);}; EA.prototype.comment_or_quote=function(){var new_class=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;var close_tag=</span><span class="special">\"</span><span class="special">\"</span><span class="string">;for(var i in parent.eAL.syntax[eA.current_code_lang][</span><span class="special">\"</span><span class="string">quotes</span><span class="special">\"</span><span class="string">]){if(EA.prototype.comment_or_quote.arguments[0].indexOf(i)==0){new_class=</span><span class="special">\"</span><span class="string">quotesmarks</span><span class="special">\"</span><span class="string">;close_tag=parent.eAL.syntax[eA.current_code_lang][</span><span class="special">\"</span><span class="string">quotes</span><span class="special">\"</span><span class="string">][i];}}if(new_class.length==0){for(var i in parent.eAL.syntax[eA.current_code_lang][</span><span class="special">\"</span><span class="string">comments</span><span class="special">\"</span><span class="string">]){if(EA.prototype.comment_or_quote.arguments[0].indexOf(i)==0){new_class=</span><span class="special">\"</span><span class="string">comments</span><span class="special">\"</span><span class="string">;close_tag=parent.eAL.syntax[eA.current_code_lang][</span><span class="special">\"</span><span class="string">comments</span><span class="special">\"</span><span class="string">][i];}}}if(close_tag==</span><span class="special">\"</span><span class="special">\\</span><span class="string">n</span><span class="special">\"</span><span class="string">){return </span><span class="special">\"</span><span class="string">&micro;__</span><span class="special">\"</span><span class="string">+ new_class +</span><span class="special">\"</span><span class="string">__&micro;</span><span class="special">\"</span><span class="string">+EA.prototype.comment_or_quote.arguments[0].replace(/(</span><span class="special">\\</span><span class="string">r?</span><span class="special">\\</span><span class="string">n)?$/m, </span><span class="special">\"</span><span class="string">&micro;_END_&micro;$1</span><span class="special">\"</span><span class="string">);}</span><span class="special">\n</span><span class="string">else{reg=new RegExp(parent.eAL.get_escaped_regexp(close_tag)+</span><span class="special">\"</span><span class="string">$</span><span class="special">\"</span><span class="string">, </span><span class="special">\"</span><span class="string">m</span><span class="special">\"</span><span class="string">);if(EA.prototype.comment_or_quote.arguments[0].search(reg)!=-1) return </span><span class="special">\"</span><span class="string">&micro;__</span><span class="special">\"</span><span class="string">+ new_class +</span><span class="special">\"</span><span class="string">__&micro;</span><span class="special">\"</span><span class="string">+EA.prototype.comment_or_quote.arguments[0]+</span><span class="special">\"</span><span class="string">&micro;_END_&micro;</span><span class="special">\"</span><span class="string">;</span><span class="special">\n</span><span class="string">else return </span><span class="special">\"</span><span class="string">&micro;__</span><span class="special">\"</span><span class="string">+ new_class +</span><span class="special">\"</span><span class="string">__&micro;</span><span class="special">\"</span><span class="string">+EA.prototype.comment_or_quote.arguments[0];}};EA.prototype.get_syntax_trace=function(text){if(this.settings[</span><span class="special">\"</span><span class="string">syntax</span><span class="special">\"</span><span class="string">].length&gt;0 &amp;&amp; parent.eAL.syntax[this.settings[</span><span class="special">\"</span><span class="string">syntax</span><span class="special">\"</span><span class="string">]][</span><span class="special">\"</span><span class="string">syntax_trace_regexp</span><span class="special">\"</span><span class="string">]) return text.replace(parent.eAL.syntax[this.settings[</span><span class="special">\"</span><span class="string">syntax</span><span class="special">\"</span><span class="string">]][</span><span class="special">\"</span><span class="string">syntax_trace_regexp</span><span class="special">\"</span><span class="string">], </span><span class="special">\"</span><span class="string">$3</span><span class="special">\"</span><span class="string">);};EA.prototype.colorize_text=function(text){text=</span><span class="special">\"</span><span class="string"> </span><span class="special">\"</span><span class="string">+text;if(this.settings[</span><span class="special">\"</span><span class="string">syntax</span><span class="special">\"</span><span class="string">].length&gt;0) text=this.apply_syntax(text, this.settings[</span><span class="special">\"</span><span class="string">syntax</span><span class="special">\"</span><span class="string">]);text=text.substr(1);text=text.replace(/&amp;/g,</span><span class="special">\"</span><span class="string">&amp;amp;</span><span class="special">\"</span><span class="string">);text=text.replace(/&lt;/g,</span><span class="special">\"</span><span class="string">&amp;lt;</span><span class="special">\"</span><span class="string">);text=text.replace(/&gt;/g,</span><span class="special">\"</span><span class="string">&amp;gt;</span><span class="special">\"</span><span class="string">);text=text.replace(/&micro;_END_&micro;/g,</span><span class="special">\"</span><span class="string">&lt;/span&gt;</span><span class="special">\"</span><span class="string">);text=text.replace(/&micro;__([a-zA-Z0-9]+)__&micro;/g,</span><span class="special">\"</span><span class="string">&lt;span class='$1'&gt;</span><span class="special">\"</span><span class="string">);return text;};EA.prototype.apply_syntax=function(text, lang){this.current_code_lang=lang;if(!parent.eAL.syntax[lang]) return text;if(parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">custom_regexp</span><span class="special">\"</span><span class="string">]['before']){for( var i in parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">custom_regexp</span><span class="special">\"</span><span class="string">]['before']){var convert=</span><span class="special">\"</span><span class="string">$1&micro;__</span><span class="special">\"</span><span class="string">+ parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">custom_regexp</span><span class="special">\"</span><span class="string">]['before'][i]['class'] +</span><span class="special">\"</span><span class="string">__&micro;$2&micro;_END_&micro;$3</span><span class="special">\"</span><span class="string">;text=text.replace(parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">custom_regexp</span><span class="special">\"</span><span class="string">]['before'][i]['regexp'], convert);}}if(parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">comment_or_quote_reg_exp</span><span class="special">\"</span><span class="string">]){text=text.replace(parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">comment_or_quote_reg_exp</span><span class="special">\"</span><span class="string">], this.comment_or_quote);}if(parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">keywords_reg_exp</span><span class="special">\"</span><span class="string">]){for(var i in parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">keywords_reg_exp</span><span class="special">\"</span><span class="string">]){text=text.replace(parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">keywords_reg_exp</span><span class="special">\"</span><span class="string">][i], '&micro;__'+i+'__&micro;$2&micro;_END_&micro;');}}if(parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">delimiters_reg_exp</span><span class="special">\"</span><span class="string">]){text=text.replace(parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">delimiters_reg_exp</span><span class="special">\"</span><span class="string">], '&micro;__delimiters__&micro;$1&micro;_END_&micro;');}if(parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">operators_reg_exp</span><span class="special">\"</span><span class="string">]){text=text.replace(parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">operators_reg_exp</span><span class="special">\"</span><span class="string">], '&micro;__operators__&micro;$1&micro;_END_&micro;');}if(parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">custom_regexp</span><span class="special">\"</span><span class="string">]['after']){for( var i in parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">custom_regexp</span><span class="special">\"</span><span class="string">]['after']){var convert=</span><span class="special">\"</span><span class="string">$1&micro;__</span><span class="special">\"</span><span class="string">+ parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">custom_regexp</span><span class="special">\"</span><span class="string">]['after'][i]['class'] +</span><span class="special">\"</span><span class="string">__&micro;$2&micro;_END_&micro;$3</span><span class="special">\"</span><span class="string">;text=text.replace(parent.eAL.syntax[lang][</span><span class="special">\"</span><span class="string">custom_regexp</span><span class="special">\"</span><span class="string">]['after'][i]['regexp'], convert);}}return text;};var editArea= eA;EditArea=EA;&lt;/script&gt;</span><span class="string">"</span><span class="code">;</span><a name="line_33"></a></li>
<li id="line_34" class="even"><span class="lineNumber">34&nbsp;</span><span class="code">&nbsp;</span><span class="default">editAreaLoader</span><span class="code">.</span><span class="default">template</span><span class="code">= </span><span class="string">"</span><span class="string">&lt;?xml version=</span><span class="special">\"</span><span class="string">1.0</span><span class="special">\"</span><span class="string"> encoding=</span><span class="special">\"</span><span class="string">UTF-8</span><span class="special">\"</span><span class="string">?&gt; &lt;!DOCTYPE html PUBLIC </span><span class="special">\"</span><span class="string">-//W3C//DTD XHTML 1.1//EN</span><span class="special">\"</span><span class="string"> </span><span class="special">\"</span><span class="string">http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd</span><span class="special">\"</span><span class="string">&gt; &lt;html xmlns=</span><span class="special">\"</span><span class="string">http://www.w3.org/1999/xhtml</span><span class="special">\"</span><span class="string"> xml:lang=</span><span class="special">\"</span><span class="string">en</span><span class="special">\"</span><span class="string"> &gt; &lt;head&gt; &lt;title&gt;EditArea&lt;/title&gt; &lt;meta http-equiv=</span><span class="special">\"</span><span class="string">Content-Type</span><span class="special">\"</span><span class="string"> content=</span><span class="special">\"</span><span class="string">text/html; charset=utf-8</span><span class="special">\"</span><span class="string"> /&gt; [__CSSRULES__] [__JSCODE__] &lt;/head&gt; &lt;body&gt; &lt;div class='editor' id='editor'&gt; &lt;div class='area_toolbar' id='toolbar_1'&gt;[__TOOLBAR__]&lt;/div&gt; &lt;div id='result'&gt; &lt;div id='container'&gt; &lt;div id='cursor_pos' class='edit_area_cursor'&gt;&amp;nbsp;&lt;/div&gt; &lt;div id='end_bracket' class='edit_area_cursor'&gt;&amp;nbsp;&lt;/div&gt; &lt;div id='selection_field'&gt;&lt;/div&gt; &lt;div id='line_number' selec='none'&gt;&lt;/div&gt; &lt;div id='content_highlight'&gt;&lt;/div&gt; &lt;div id='test_font_size'&gt;&lt;/div&gt; &lt;textarea id='textarea' wrap='off' onchange='editArea.execCommand(</span><span class="special">\"</span><span class="string">onchange</span><span class="special">\"</span><span class="string">);' onfocus='javascript:editArea.textareaFocused=true;' onblur='javascript:editArea.textareaFocused=false;'&gt; &lt;/textarea&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class='area_toolbar' id='toolbar_2'&gt; &lt;table class='statusbar' cellspacing='0' cellpadding='0'&gt; &lt;tr&gt; &lt;td class='total' selec='none'&gt;{$position}:&lt;/td&gt; &lt;td class='infos' selec='none'&gt; {$line_abbr} &lt;span  id='linePos'&gt;0&lt;/span&gt;, {$char_abbr} &lt;span id='currPos'&gt;0&lt;/span&gt; &lt;/td&gt; &lt;td class='total' selec='none'&gt;{$total}:&lt;/td&gt; &lt;td class='infos' selec='none'&gt; {$line_abbr} &lt;span id='nbLine'&gt;0&lt;/span&gt;, {$char_abbr} &lt;span id='nbChar'&gt;0&lt;/span&gt; &lt;/td&gt; &lt;td class='resize'&gt; &lt;span id='resize_area'&gt;&lt;img src='[__BASEURL__]images/statusbar_resize.gif' alt='resize' selec='none'&gt;&lt;/span&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/div&gt; &lt;/div&gt; &lt;div id='processing'&gt; &lt;div id='processing_text'&gt; {$processing} &lt;/div&gt; &lt;/div&gt; &lt;div id='area_search_replace' class='editarea_popup'&gt; &lt;table cellspacing='2' cellpadding='0' style='width: 100%'&gt; &lt;tr&gt; &lt;td selec='none'&gt;{$search}&lt;/td&gt; &lt;td&gt;&lt;input type='text' id='area_search' /&gt;&lt;/td&gt; &lt;td id='close_area_search_replace'&gt; &lt;a onclick='Javascript:editArea.execCommand(</span><span class="special">\"</span><span class="string">hidden_search</span><span class="special">\"</span><span class="string">)'&gt;&lt;img selec='none' src='[__BASEURL__]images/close.gif' alt='{$close_popup}' title='{$close_popup}' /&gt;&lt;/a&gt;&lt;br /&gt; &lt;/tr&gt;&lt;tr&gt; &lt;td selec='none'&gt;{$replace}&lt;/td&gt; &lt;td&gt;&lt;input type='text' id='area_replace' /&gt;&lt;/td&gt; &lt;td&gt;&lt;img id='move_area_search_replace' onmousedown='return parent.start_move_element(event,</span><span class="special">\"</span><span class="string">area_search_replace</span><span class="special">\"</span><span class="string">, parent.frames[</span><span class="special">\"</span><span class="string">frame_</span><span class="special">\"</span><span class="string">+editArea.id]);'  src='[__BASEURL__]images/move.gif' alt='{$move_popup}' title='{$move_popup}' /&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;div class='button'&gt; &lt;input type='checkbox' id='area_search_match_case' /&gt;&lt;label for='area_search_match_case' selec='none'&gt;{$match_case}&lt;/label&gt; &lt;input type='checkbox' id='area_search_reg_exp' /&gt;&lt;label for='area_search_reg_exp' selec='none'&gt;{$reg_exp}&lt;/label&gt; &lt;br /&gt; &lt;a onclick='Javascript:editArea.execCommand(</span><span class="special">\"</span><span class="string">area_search</span><span class="special">\"</span><span class="string">)' selec='none'&gt;{$find_next}&lt;/a&gt; &lt;a onclick='Javascript:editArea.execCommand(</span><span class="special">\"</span><span class="string">area_replace</span><span class="special">\"</span><span class="string">)' selec='none'&gt;{$replace}&lt;/a&gt; &lt;a onclick='Javascript:editArea.execCommand(</span><span class="special">\"</span><span class="string">area_replace_all</span><span class="special">\"</span><span class="string">)' selec='none'&gt;{$replace_all}&lt;/a&gt;&lt;br /&gt; &lt;/div&gt; &lt;div id='area_search_msg' selec='none'&gt;&lt;/div&gt; &lt;/div&gt; &lt;div id='edit_area_help' class='editarea_popup'&gt; &lt;div class='close_popup'&gt; &lt;a onclick='Javascript:editArea.execCommand(</span><span class="special">\"</span><span class="string">close_all_inline_popup</span><span class="special">\"</span><span class="string">)'&gt;&lt;img src='[__BASEURL__]images/close.gif' alt='{$close_popup}' title='{$close_popup}' /&gt;&lt;/a&gt; &lt;/div&gt; &lt;div&gt;&lt;h2&gt;Editarea [__EA_VERSION__]&lt;/h2&gt;&lt;br /&gt; &lt;h3&gt;{$shortcuts}:&lt;/h3&gt; {$tab}: {$add_tab}&lt;br /&gt; {$shift}+{$tab}: {$remove_tab}&lt;br /&gt; {$ctrl}+f: {$search_command}&lt;br /&gt; {$ctrl}+r: {$replace_command}&lt;br /&gt; {$ctrl}+h: {$highlight}&lt;br /&gt; {$ctrl}+g: {$go_to_line}&lt;br /&gt; {$ctrl}+z: {$undo}&lt;br /&gt; {$ctrl}+y: {$redo}&lt;br /&gt; {$ctrl}+e: {$help}&lt;br /&gt; {$ctrl}+q, {$esc}: {$close_popup}&lt;br /&gt; {$accesskey} E: {$toggle}&lt;br /&gt; &lt;br /&gt; &lt;em&gt;{$about_notice}&lt;/em&gt; &lt;br /&gt;&lt;div class='copyright'&gt;&amp;copy; Christophe Dolivet - 2007&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/body&gt; &lt;/html&gt; </span><span class="string">"</span><span class="code">;</span><a name="line_34"></a></li>
<li id="line_35" class="odd"><span class="lineNumber">35&nbsp;</span><span class="code">&nbsp;</span><span class="default">editAreaLoader</span><span class="code">.</span><span class="default">iframe_css</span><span class="code">= </span><span class="string">"</span><span class="string">&lt;style&gt;body, html{}body, html, table, form, textarea{}#editor{}#result{z-index: 4;}#container{overflow: hidden;}#textarea{position: relative;top: 0px;left: 0px;padding: 0px 0px 0px 45px;width: 100%;height: 100%;overflow: hidden;z-index: 7;border: solid green 0px;}#content_highlight{white-space: pre;padding: 1px 0 0 45px;position : absolute;z-index: 4;overflow: visible;border: solid yellow 0px;}#selection_field{padding: 0px 0px 0 45px;background-color: #FFFF99;height: 1px;position: absolute;z-index: 5;top: -100px;margin: 1px 0 0 0px;white-space: pre;overflow: hidden;}#line_number{position: absolute;overflow: hidden;border-right: solid black 1px;z-index:8;width: 38px;padding-right: 5px;text-align: right;color: #AAAAAA;}#test_font_size{padding: 0;margin: 0;visibility: hidden;position: absolute;white-space: pre;}pre{margin: 0;padding: 0;}.hidden{opacity: 0.2;-moz-opacity: 0.2;filter:alpha(opacity=20);}#result .edit_area_cursor{position: absolute;z-index:6;background-color: #FF6633;top: -100px;margin: 1px 0 0 0px;}#result .edit_area_selection_field .overline{background-color: #996600;}.editarea_popup{border: solid 1px #888888;background-color: #ECE9D8;width: 250px;padding: 4px;position: absolute;visibility: hidden;z-index: 15;top: -500px;}.editarea_popup, .editarea_popup table{font-family: sans-serif;font-size: 10pt;}.editarea_popup img{border: 0;}.editarea_popup .close_popup{float: right;line-height: 16px;border: 0px;padding: 0px;}.editarea_popup h1,.editarea_popup h2,.editarea_popup h3,.editarea_popup h4,.editarea_popup h5,.editarea_popup h6{margin: 0px;padding: 0px;}.editarea_popup .copyright{text-align: right;}div#area_search_replace{}div#area_search_replace img{border: 0px;}div#area_search_replace div.button{text-align: center;line-height: 1.7em;}div#area_search_replace .button a{cursor: pointer;border: solid 1px #888888;background-color: #DEDEDE;text-decoration: none;padding: 0 2px;color: #000000;white-space: nowrap;}div#area_search_replace a:hover{background-color: #EDEDED;}div#area_search_replace  #move_area_search_replace{cursor: move;border: solid 1px #888888;}div#area_search_replace  #close_area_search_replace{text-align: right;vertical-align: top;white-space: nowrap;}div#area_search_replace  #area_search_msg{height: 18px;overflow: hidden;border-top: solid 1px #888888;margin-top: 3px;}#edit_area_help{width: 350px;}#edit_area_help div.close_popup{float: right;}.area_toolbar{width: 100%;margin: 0px;padding: 0px;background-color: #ECE9D8;text-align: center;}.area_toolbar, .area_toolbar table{font: 11px sans-serif;}.area_toolbar img{border: 0px;vertical-align: middle;}.area_toolbar input{margin: 0px;padding: 0px;}.area_toolbar select{font-family: 'MS Sans Serif',sans-serif,Verdana,Arial;font-size: 7pt;font-weight: normal;margin: 2px 0 0 0 ;padding: 0;vertical-align: top;background-color: #F0F0EE;}table.statusbar{width: 100%;}.area_toolbar td.infos{text-align: center;width: 130px;border-right: solid 1px #888888;border-width: 0 1px 0 0;padding: 0;}.area_toolbar td.total{text-align: right;width: 50px;padding: 0;}.area_toolbar td.resize{text-align: right;}.area_toolbar span#resize_area{cursor: nw-resize;visibility: hidden;}.editAreaButtonNormal, .editAreaButtonOver, .editAreaButtonDown, .editAreaSeparator, .editAreaSeparatorLine, .editAreaButtonDisabled, .editAreaButtonSelected {border: 0px; margin: 0px; padding: 0px; background: transparent;margin-top: 0px;margin-left: 1px;padding: 0px;}.editAreaButtonNormal {border: 1px solid #ECE9D8 !important;cursor: pointer;}.editAreaButtonOver {border: 1px solid #0A246A !important;cursor: pointer;background-color: #B6BDD2;}.editAreaButtonDown {cursor: pointer;border: 1px solid #0A246A !important;background-color: #8592B5;}.editAreaButtonSelected {border: 1px solid #C0C0BB !important;cursor: pointer;background-color: #F4F2E8;}.editAreaButtonDisabled {filter:progid:DXImageTransform.Microsoft.Alpha(opacity=30);-moz-opacity:0.3;opacity: 0.3;border: 1px solid #F0F0EE !important;cursor: pointer;}.editAreaSeparatorLine {margin: 1px 2px;background-color: #C0C0BB;width: 2px;height: 18px;}#processing{display: none;background-color:#ECE9D8;border: solid #888888 1px;position: absolute;top: 0;left: 0;width: 100%;height: 100%;z-index: 100;text-align: center;}#processing_text{position:absolute;left: 50%;top: 50%;width: 200px;height: 20px;margin-left: -100px;margin-top: -10px;text-align: center;}&lt;/style&gt;</span><span class="string">"</span><span class="code">;</span><a name="line_35"></a></li></ol></div></body></html>
                    </div>
    </body>
</html>
